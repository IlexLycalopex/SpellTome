<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
<title>Spell Tome — D&D 5e Spell Cards</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap" rel="stylesheet">
<style>
/* ===== main.css ===== */
/* ============================================================
   CSS VARIABLES
   ============================================================ */
:root {
  --school-Abjuration:    #4DC8D0;
  --school-Enchantment:   #C4306A;
  --school-Conjuration:   #6A3A8A;
  --school-Illusion:      #3A4A8A;
  --school-Transmutation: #6AAA2A;
  --school-Divination:    #BCAA20;
  --school-Necromancy:    #7A3A2A;
  --school-Evocation:     #2A8A6A;

  --bg-dark:    #1a1a2e;
  --bg-panel:   #16213e;
  --text-light: #e8e8e8;
  --text-muted: #9a9ab0;
  --text-dim:   #6a6a80;
  --gold:       #c9a84c;
  --gold-dim:   #8a6a2c;
  --border:     #2a2a4a;
  --shadow:     0 4px 24px rgba(0,0,0,0.5);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'EB Garamond', Georgia, serif;
  background: var(--bg-dark);
  color: var(--text-light);
  min-height: 100vh;
  background-image:
    radial-gradient(ellipse at 20% 50%, rgba(74,0,120,0.15) 0%, transparent 60%),
    radial-gradient(ellipse at 80% 20%, rgba(0,80,120,0.15) 0%, transparent 60%);
}

/* ============================================================
   HEADER
   ============================================================ */
#app-header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: rgba(22, 33, 62, 0.97);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(12px);
}

.header-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 24px 10px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}

.app-title {
  font-family: 'Cinzel', serif;
  font-size: 1.5rem;
  font-weight: 900;
  letter-spacing: 0.08em;
  color: var(--gold);
  text-shadow: 0 0 20px rgba(201,168,76,0.4);
  text-transform: uppercase;
}

.app-title span {
  color: var(--text-muted);
  font-weight: 400;
  font-size: 0.9rem;
  margin-left: 8px;
  letter-spacing: 0.2em;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.selection-badge {
  font-family: 'Cinzel', serif;
  font-size: 0.8rem;
  color: var(--gold);
  background: rgba(201,168,76,0.12);
  border: 1px solid rgba(201,168,76,0.3);
  border-radius: 20px;
  padding: 4px 14px;
  letter-spacing: 0.05em;
  white-space: nowrap;
}

/* ============================================================
   BUTTONS
   ============================================================ */
.btn {
  font-family: 'Cinzel', serif;
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  border: none;
  border-radius: 4px;
  padding: 7px 16px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-ghost {
  background: transparent;
  color: var(--text-muted);
  border: 1px solid var(--border);
}
.btn-ghost:hover { color: var(--text-light); border-color: var(--text-muted); }

.btn-print {
  background: linear-gradient(135deg, #c9a84c, #8a6a2c);
  color: #1a1a2e;
  font-weight: 700;
  box-shadow: 0 2px 12px rgba(201,168,76,0.3);
}
.btn-print:hover { transform: translateY(-1px); box-shadow: 0 4px 16px rgba(201,168,76,0.5); }
.btn-print:disabled { opacity: 0.4; cursor: not-allowed; transform: none !important; box-shadow: none; }

/* ============================================================
   FILTER BAR
   ============================================================ */
.filter-bar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 24px 12px;
  flex-wrap: wrap;
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 6px;
}

.filter-label {
  font-family: 'Cinzel', serif;
  font-size: 0.68rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--text-dim);
  white-space: nowrap;
}

select, input[type="text"] {
  font-family: 'EB Garamond', serif;
  font-size: 0.95rem;
  background: #0d1a30;
  color: #e8e8e8;
  border: 1px solid #3a3a5a;
  border-radius: 4px;
  padding: 5px 10px;
  outline: none;
  transition: border-color 0.15s, background 0.15s;
}

select {
  padding-right: 28px;
  appearance: none;
  -webkit-appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23c9a84c'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-color: #0d1a30;
  cursor: pointer;
}

/* Style the dropdown options list */
select option {
  background: #0d1a30;
  color: #e8e8e8;
  font-family: 'EB Garamond', serif;
  padding: 4px 8px;
}

select option:checked,
select option:hover {
  background: #1e3a5f;
  color: #c9a84c;
}

select:focus, input[type="text"]:focus {
  border-color: var(--gold-dim);
  background: #111f38;
  outline: none;
  box-shadow: 0 0 0 2px rgba(201,168,76,0.15);
}

select:hover:not(:disabled), input[type="text"]:hover {
  border-color: #5a5a7a;
  background: #111f38;
}

select:disabled { opacity: 0.4; cursor: not-allowed; }

input[type="text"]::placeholder { color: #6a6a80; }

.search-input { min-width: 180px; }

.filter-divider {
  width: 1px;
  height: 24px;
  background: var(--border);
  flex-shrink: 0;
}

/* ============================================================
   PILLS
   ============================================================ */
.pill-filters {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
  align-items: center;
}

.pill {
  font-family: 'Cinzel', serif;
  font-size: 0.62rem;
  letter-spacing: 0.06em;
  font-weight: 600;
  border-radius: 3px;
  padding: 3px 7px;
  cursor: pointer;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  color: var(--text-muted);
  transition: all 0.15s;
  user-select: none;
}

.pill:hover { border-color: var(--text-dim); color: var(--text-light); }

.pill.active {
  background: rgba(201,168,76,0.18);
  border-color: var(--gold-dim);
  color: var(--gold);
}

.school-pill.active {
  color: #fff;
  border-color: transparent;
}

/* ============================================================
   RESULTS BAR
   ============================================================ */
#results-bar {
  padding: 7px 24px;
  font-size: 0.85rem;
  color: var(--text-dim);
  border-bottom: 1px solid var(--border);
  font-style: italic;
  background: rgba(15,52,96,0.2);
}

/* ============================================================
   EMPTY STATE
   ============================================================ */
#empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 100px 24px;
  text-align: center;
  color: var(--text-dim);
}

#empty-state .rune {
  font-size: 4rem;
  opacity: 0.25;
  margin-bottom: 20px;
  display: block;
}

#empty-state h2 {
  font-family: 'Cinzel', serif;
  font-size: 1.3rem;
  color: var(--text-muted);
  margin-bottom: 10px;
  letter-spacing: 0.05em;
}

#empty-state p {
  font-size: 1rem;
  opacity: 0.7;
}

/* ============================================================
   CARD GRID
   ============================================================ */
#card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
  gap: 18px;
  padding: 24px;
}

/* ============================================================
   PRINT PREVIEW OVERLAY
   ============================================================ */
#print-preview-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.88);
  z-index: 1000;
  overflow-y: auto;
  backdrop-filter: blur(4px);
}

#print-preview-overlay.active { display: block; }

.preview-header {
  position: sticky;
  top: 0;
  background: #1a1a2e;
  border-bottom: 1px solid var(--border);
  padding: 14px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 10;
}

.preview-header h2 {
  font-family: 'Cinzel', serif;
  font-size: 1rem;
  color: var(--gold);
  letter-spacing: 0.1em;
}

.preview-note {
  font-size: 0.85rem;
  color: var(--text-muted);
  margin-left: 16px;
}

.preview-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.preview-warning {
  background: rgba(201,168,76,0.1);
  border: 1px solid rgba(201,168,76,0.25);
  border-radius: 6px;
  padding: 10px 24px;
  margin: 16px 24px 0;
  font-size: 0.9rem;
  color: var(--gold);
  display: flex;
  align-items: center;
  gap: 10px;
}

.preview-warning::before { content: '⚠'; font-size: 1.1rem; }

#print-pages-container {
  padding: 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.print-page-preview {
  background: #fff;
  width: 100%;
  max-width: 900px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
  padding: 16px;
  box-shadow: 0 4px 32px rgba(0,0,0,0.6);
  border-radius: 3px;
}

.page-label {
  font-family: 'Cinzel', serif;
  font-size: 0.75rem;
  color: var(--text-dim);
  text-align: center;
  letter-spacing: 0.1em;
  width: 100%;
  max-width: 900px;
}


/* ===== card.css ===== */
/* ============================================================
   SPELL CARD — SCREEN
   ============================================================ */
.spell-card {
  background: #fff;
  border-radius: 7px;
  overflow: hidden;
  cursor: pointer;
  position: relative;
  box-shadow: 0 3px 16px rgba(0,0,0,0.45);
  transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s;
  color: #222;
  font-family: 'EB Garamond', Georgia, serif;
  font-size: 0.83rem;
  line-height: 1.4;
  border: 2.5px solid transparent;
  user-select: none;
}

.spell-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 36px rgba(0,0,0,0.6);
}

.spell-card.selected {
  border-color: var(--school-color);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--school-color) 35%, transparent),
              0 8px 28px rgba(0,0,0,0.5);
}

/* ============================================================
   SELECTION INDICATOR (circle/tick, top right of header)
   ============================================================ */
.select-indicator {
  position: absolute;
  top: 7px;
  right: 7px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 2px solid rgba(255,255,255,0.8);
  background: rgba(0,0,0,0.25);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  transition: all 0.12s ease;
  font-size: 0.65rem;
  color: #fff;
  font-weight: 700;
  line-height: 1;
}

.spell-card.selected .select-indicator {
  background: var(--school-color);
  border-color: #fff;
}

/* ============================================================
   CARD HEADER BAND
   ============================================================ */
.card-header {
  display: flex;
  align-items: center;
  gap: 7px;
  padding: 8px 10px;
  min-height: 50px;
  position: relative;
}

.card-school-icon {
  width: 34px;
  height: 34px;
  flex-shrink: 0;
  color: rgba(255,255,255,0.9);
}

.card-school-icon svg {
  width: 100%;
  height: 100%;
  display: block;
}

.card-title {
  font-family: 'Cinzel', serif;
  font-weight: 700;
  font-size: 0.88rem;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  color: #fff;
  flex: 1;
  line-height: 1.2;
  text-shadow: 0 1px 3px rgba(0,0,0,0.35);
}

.card-level {
  font-family: 'Cinzel', serif;
  font-weight: 700;
  font-size: 0.82rem;
  color: rgba(255,255,255,0.95);
  text-shadow: 0 1px 3px rgba(0,0,0,0.35);
  white-space: nowrap;
  flex-shrink: 0;
  padding-right: 26px; /* room for select indicator */
}

/* ============================================================
   STATS BLOCK
   ============================================================ */
.card-stats {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 0 8px;
  padding: 7px 10px 4px;
  background: #fff;
}

.stats-left {
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.stat-row {
  display: flex;
  align-items: baseline;
  gap: 5px;
}

.stat-label {
  font-size: 0.75rem;
  color: #666;
  min-width: 70px;
  flex-shrink: 0;
}

.stat-value {
  font-weight: 600;
  font-size: 0.82rem;
  color: #111;
}

/* Class list (right column of stats) */
.class-list {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0;
  padding-top: 1px;
}

.class-item {
  font-size: 0.68rem;
  color: #bbb;
  line-height: 1.35;
}

.class-item.has-access {
  color: var(--school-color);
  font-weight: 600;
}

.class-item.is-current {
  font-weight: 700;
}

/* ============================================================
   COMPONENT ICONS ROW
   ============================================================ */
.card-components {
  display: flex;
  align-items: center;
  gap: 7px;
  padding: 4px 10px 3px;
  background: #fff;
}

.component-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #444;
}

.component-icon svg {
  width: 20px;
  height: 20px;
  fill: currentColor;
}

.badge {
  font-family: 'Cinzel', serif;
  font-size: 0.52rem;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  font-weight: 700;
  border-radius: 2px;
  padding: 1px 5px;
  color: #fff;
  background: var(--school-color);
}

/* ============================================================
   FLAVOUR TEXT BAND
   ============================================================ */
.card-flavor {
  padding: 5px 10px;
  font-style: italic;
  font-size: 0.76rem;
  color: #fff;
  line-height: 1.3;
  text-shadow: 0 1px 2px rgba(0,0,0,0.25);
}

/* ============================================================
   DESCRIPTION
   ============================================================ */
.card-description {
  padding: 6px 10px 3px;
  background: #fff;
  font-size: 0.76rem;
  color: #333;
  line-height: 1.45;
}

.higher-levels {
  margin-top: 5px;
  padding-top: 4px;
  border-top: 1px solid #eee;
  font-size: 0.72rem;
  color: #444;
}

.higher-levels strong { color: #111; }

/* ============================================================
   SOURCE / FOOTER
   ============================================================ */
.card-source {
  padding: 4px 10px 8px;
  background: #fff;
  text-align: right;
  font-style: italic;
  font-size: 0.7rem;
  color: #aaa;
}

/* ============================================================
   SMALL CARD VARIANTS (inside print preview)
   ============================================================ */
.print-page-preview .spell-card {
  border-radius: 4px;
  cursor: default;
  border-width: 1px;
  font-size: 0.6rem;
}

.print-page-preview .spell-card:hover { transform: none; }
.print-page-preview .select-indicator { display: none !important; }
.print-page-preview .card-header { padding: 5px 7px; min-height: 30px; gap: 5px; }
.print-page-preview .card-school-icon { width: 22px; height: 22px; }
.print-page-preview .card-title { font-size: 0.6rem; }
.print-page-preview .card-level { font-size: 0.58rem; padding-right: 4px; }
.print-page-preview .stat-label { min-width: 38px; font-size: 0.55rem; }
.print-page-preview .stat-value { font-size: 0.58rem; }
.print-page-preview .class-item { font-size: 0.5rem; }
.print-page-preview .card-stats { padding: 4px 7px 2px; gap: 0 5px; }
.print-page-preview .card-components { padding: 2px 7px; gap: 4px; }
.print-page-preview .component-icon { width: 14px; height: 14px; }
.print-page-preview .component-icon svg { width: 12px; height: 12px; }
.print-page-preview .badge { font-size: 0.45rem; padding: 1px 3px; }
.print-page-preview .card-flavor { font-size: 0.55rem; padding: 3px 7px; }
.print-page-preview .card-description { font-size: 0.55rem; padding: 3px 7px 2px; line-height: 1.3; }
.print-page-preview .higher-levels { font-size: 0.5rem; }
.print-page-preview .card-source { font-size: 0.48rem; padding: 2px 7px 4px; }


/* ===== print.css ===== */
/* ============================================================
   PRINT STYLES — A4 LANDSCAPE, 4x2 GRID
   ============================================================ */
@media print {
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* Hide everything except print output */
  body > *:not(#print-output) {
    display: none !important;
  }

  #print-output {
    display: block !important;
  }

  @page {
    size: A4 landscape;
    margin: 0;
  }

  .print-page {
    page-break-after: always;
    display: grid !important;
    grid-template-columns: repeat(4, 1fr) !important;
    grid-template-rows: repeat(2, 1fr) !important;
    gap: 3mm !important;
    padding: 8mm !important;
    width: 297mm !important;
    height: 210mm !important;
    overflow: hidden !important;
    background: #fff !important;
  }

  .print-page:last-child {
    page-break-after: avoid;
  }

  /* Cards in print */
  .print-page .spell-card {
    page-break-inside: avoid !important;
    border-radius: 4px !important;
    font-size: 0.58rem !important;
    border: 1px solid #ddd !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
  }

  .print-page .spell-card .select-indicator { display: none !important; }
  .print-page .spell-card .card-header { padding: 4px 6px !important; min-height: 28px !important; gap: 4px !important; }
  .print-page .spell-card .card-school-icon { width: 20px !important; height: 20px !important; }
  .print-page .spell-card .card-title { font-size: 0.58rem !important; }
  .print-page .spell-card .card-level { font-size: 0.55rem !important; padding-right: 3px !important; }
  .print-page .spell-card .stat-label { min-width: 36px !important; font-size: 0.52rem !important; }
  .print-page .spell-card .stat-value { font-size: 0.56rem !important; }
  .print-page .spell-card .class-item { font-size: 0.48rem !important; }
  .print-page .spell-card .card-stats { padding: 3px 6px 2px !important; }
  .print-page .spell-card .card-components { padding: 2px 6px !important; gap: 3px !important; }
  .print-page .spell-card .component-icon { width: 13px !important; height: 13px !important; }
  .print-page .spell-card .component-icon svg { width: 11px !important; height: 11px !important; }
  .print-page .spell-card .badge { font-size: 0.42rem !important; padding: 1px 3px !important; }
  .print-page .spell-card .card-flavor { font-size: 0.52rem !important; padding: 2px 6px !important; }
  .print-page .spell-card .card-description { font-size: 0.52rem !important; padding: 2px 6px !important; line-height: 1.3 !important; flex: 1 !important; overflow: hidden !important; }
  .print-page .spell-card .higher-levels { font-size: 0.48rem !important; }
  .print-page .spell-card .card-source { font-size: 0.46rem !important; padding: 2px 6px 4px !important; }
}

/* Filter toggle — desktop: always hidden */
#btn-filter-toggle { display: none; }

/* ============================================================
   MOBILE & TABLET RESPONSIVE
   ============================================================ */

/* Tablet (768px – 1024px) */
@media (max-width: 1024px) {
  #card-grid {
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 14px;
    padding: 16px;
  }
  .filter-bar {
    gap: 10px;
    padding: 10px 16px;
  }
  .filter-group { gap: 4px; }
  .pill { padding: 3px 8px; font-size: 0.72rem; }
}

/* Mobile (up to 768px) */
@media (max-width: 768px) {

  /* ---- Hide print + selection UI entirely on mobile ---- */
  #btn-print,
  #btn-select-all,
  #btn-clear,
  .selection-badge,
  .select-indicator { display: none !important; }

  /* ---- Slim sticky bar (always visible) ---- */
  #app-header {
    position: sticky;
    top: 0;
    transition: none;
  }

  .header-top {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    padding: 8px 14px;
    gap: 8px;
    min-height: 44px;
  }

  /* Title: force single line, scale to fit */
  .app-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: clip;
    font-size: clamp(0.7rem, 3.5vw, 1rem);
    flex-shrink: 1;
    min-width: 0;
  }
  .app-title span {
    font-size: clamp(0.55rem, 2.5vw, 0.68rem);
    white-space: nowrap;
  }

  /* Slim bar right side: just the filter toggle */
  .header-actions {
    display: flex;
    flex-wrap: nowrap;
    gap: 6px;
    align-items: center;
    flex-shrink: 0;
  }

  /* Filter toggle button — mobile only */
  #btn-filter-toggle {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.7rem;
    padding: 4px 10px;
    background: rgba(201,168,76,0.15);
    border: 1px solid rgba(201,168,76,0.4);
    color: var(--gold);
    border-radius: 6px;
    cursor: pointer;
    white-space: nowrap;
    transition: background 0.15s;
  }
  #btn-filter-toggle:active { background: rgba(201,168,76,0.3); }
  #btn-filter-toggle .toggle-arrow {
    display: inline-block;
    transition: transform 0.2s;
    font-size: 0.6rem;
  }
  #btn-filter-toggle.open .toggle-arrow { transform: rotate(180deg); }

  /* ---- Collapsible filter panel ---- */
  .filter-bar {
    flex-direction: column;
    gap: 8px;
    padding: 0 14px;
    overflow: hidden;
    max-height: 0;
    transition: max-height 0.28s ease, padding 0.28s ease;
    border-top: none;
  }

  .filter-bar.expanded {
    max-height: 700px;
    padding: 10px 14px 14px;
    border-top: 1px solid var(--border);
  }

  /* Class + Level side by side */
  .filter-group-row {
    display: flex;
    flex-direction: row;
    gap: 10px;
    width: 100%;
  }
  .filter-group-row .filter-group {
    flex: 1;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }
  .filter-group-row .filter-group select {
    width: 100%;
  }

  /* Pill groups (Spell Level, School, Source) — label above, pills left-aligned below */
  .filter-group-pills {
    flex-direction: column;
    align-items: flex-start;
    gap: 5px;
    width: 100%;
  }
  .filter-group-pills .filter-label {
    min-width: unset;
  }
  .filter-group-pills .pill-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    justify-content: flex-start;
  }

  .filter-label {
    min-width: 72px;
    font-size: 0.68rem;
  }

  .pill {
    padding: 3px 8px;
    font-size: 0.68rem;
    border-radius: 12px;
  }

  select, .search-input {
    font-size: 0.8rem;
    padding: 5px 8px;
  }

  .filter-divider { display: none; }

  /* Card grid: 2 columns on mobile */
  #card-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 10px;
    padding: 12px;
  }

  /* Compact card sizing on mobile */
  .spell-card {
    min-width: 0;
    font-size: 0.8rem;
  }

  .card-header {
    padding: 6px 8px;
    min-height: 40px;
    gap: 5px;
  }

  .card-school-icon {
    width: 26px !important;
    height: 26px !important;
    min-width: 26px !important;
  }

  .card-spell-name { font-size: 0.75rem; }
  .card-level-badge { font-size: 0.62rem; }

  .card-stats {
    padding: 4px 8px;
    font-size: 0.68rem;
    gap: 2px;
  }

  .card-flavor {
    padding: 3px 8px;
    font-size: 0.7rem;
  }

  .card-description {
    padding: 4px 8px;
    font-size: 0.72rem;
    line-height: 1.45;
  }

  .card-source {
    padding: 2px 8px 5px;
    font-size: 0.62rem;
  }

  .component-icon {
    width: 18px !important;
    height: 18px !important;
  }
  .component-icon svg {
    width: 14px !important;
    height: 14px !important;
  }

  /* Results bar */
  #results-bar {
    font-size: 0.75rem;
    padding: 6px 14px;
  }

  /* Empty state */
  #empty-state { padding: 40px 20px; }
  #empty-state h2 { font-size: 1.2rem; }
  #empty-state p { font-size: 0.85rem; }
  .rune { font-size: 2.5rem; }

  /* Print preview modal: full screen on mobile */
  #print-preview-overlay .preview-inner {
    width: 100vw;
    height: 100vh;
    max-width: 100vw;
    border-radius: 0;
    padding: 12px;
  }

  .preview-header {
    flex-direction: column;
    gap: 8px;
    align-items: flex-start;
  }

  .preview-actions {
    display: flex;
    gap: 8px;
    width: 100%;
  }

  .preview-actions .btn { flex: 1; text-align: center; }
}
}

/* Very small phones (under 420px): single column */
@media (max-width: 420px) {
  #card-grid {
    grid-template-columns: 1fr !important;
    padding: 10px;
  }
}

</style>
</head>
<body>
<header id="app-header">
  <div class="header-top">
    <div class="app-title">Spell Tome <span>D&amp;D 5e &middot; 2014</span></div>
    <div class="header-actions">
      <span class="selection-badge" id="selection-count">0 selected</span>
      <button class="btn btn-ghost" id="btn-select-all" onclick="selectAllVisible()" disabled>Select All</button>
      <button class="btn btn-ghost" id="btn-clear" onclick="clearSelection()" disabled>Clear</button>
      <button class="btn btn-print" id="btn-print" disabled onclick="openPrintPreview()">&#128424; Print to PDF</button>
      <button id="btn-filter-toggle" onclick="toggleMobileFilters()" aria-expanded="true" class="open">
        Filters <span class="toggle-arrow">&#9660;</span>
      </button>
    </div>
  </div>
  <div class="filter-bar expanded">
    <div class="filter-group-row">
      <div class="filter-group">
        <span class="filter-label">Class</span>
        <select id="class-select" onchange="onClassChange()">
          <option value="">Select class...</option>
          <option>Bard</option><option>Cleric</option><option>Druid</option>
          <option>Paladin</option><option>Ranger</option><option>Sorcerer</option>
          <option>Warlock</option><option>Wizard</option>
        </select>
      </div>
      <div class="filter-group">
        <span class="filter-label">Level</span>
        <select id="level-select" disabled onchange="onLevelChange()">
          <option value="">Select level...</option>
          <option>1</option><option>2</option><option>3</option><option>4</option>
          <option>5</option><option>6</option><option>7</option><option>8</option>
          <option>9</option><option>10</option><option>11</option><option>12</option>
          <option>13</option><option>14</option><option>15</option><option>16</option>
          <option>17</option><option>18</option><option>19</option><option>20</option>
        </select>
      </div>
    </div>
    <div class="filter-divider"></div>
    <div class="filter-group filter-group-pills">
      <span class="filter-label">Spell Level</span>
      <div class="pill-filters" id="spell-level-pills"></div>
    </div>
    <div class="filter-divider"></div>
    <div class="filter-group filter-group-pills">
      <span class="filter-label">School</span>
      <div class="pill-filters" id="school-pills"></div>
    </div>
    <div class="filter-divider"></div>
    <div class="filter-group filter-group-pills">
      <span class="filter-label">Source</span>
      <div class="pill-filters" id="book-pills"></div>
    </div>
    <div class="filter-divider"></div>
    <input type="text" class="search-input" id="search-input" placeholder="Search spells..." oninput="renderGrid()">
  </div>
</header>

<div id="results-bar" style="display:none"></div>

<main>
  <div id="empty-state">
    <div class="rune">&#10022;</div>
    <h2>Choose Your Class &amp; Level</h2>
    <p>Select a class and character level to reveal your available spells.</p>
  </div>
  <div id="card-grid" style="display:none"></div>
</main>

<div id="print-preview-overlay">
  <div class="preview-header">
    <div style="display:flex;align-items:center;gap:8px;">
      <h2>Print Preview</h2>
      <span class="preview-note" id="preview-page-count"></span>
    </div>
    <div class="preview-actions">
      <button class="btn btn-ghost" onclick="closePrintPreview()">Cancel</button>
      <button class="btn btn-print" onclick="executePrint()">&#128424; Open Print Dialog</button>
    </div>
  </div>
  <div class="preview-warning">
    In Chrome's print dialog, enable <strong>Background graphics</strong> to preserve school colours in your PDF.
  </div>
  <div id="print-pages-container"></div>
</div>

<div id="print-output"></div>

<script>
/* ===== spells.js ===== */
const SPELLS = [
  // CANTRIPS (Level 0)
  { id:"acid-splash", name:"Acid Splash", level:0, school:"Conjuration", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Wizard","Sorcerer"], description:"You hurl a bubble of acid. Choose one creature within range, or choose two creatures within range that are within 5 feet of each other. A target must succeed on a Dexterity saving throw or take 1d6 acid damage. This spell's damage increases by 1d6 when you reach 5th level (2d6), 11th level (3d6), and 17th level (4d6).", source:"PHB 211" },
  { id:"blade-ward", name:"Blade Ward", level:0, school:"Abjuration", range:"Self", duration:"1 round", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You extend your hand and trace a sigil of warding in the air. Until the end of your next turn, you have resistance against bludgeoning, piercing, and slashing damage dealt by weapon attacks.", source:"PHB 218" },
  { id:"chill-touch", name:"Chill Touch", level:0, school:"Necromancy", range:"120 ft", duration:"1 round", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You create a ghostly, skeletal hand in the space of a creature within range. Make a ranged spell attack against the creature to assail it with the chill of the grave. On a hit, the target takes 1d8 necrotic damage, and it can't regain hit points until the start of your next turn. Until then, the hand clings to the target.", source:"PHB 221" },
  { id:"dancing-lights", name:"Dancing Lights", level:0, school:"Evocation", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"You create up to four torch-sized lights within range, making them appear as torches, lanterns, or glowing orbs that hover in the air for the duration. You can also combine the four lights into one glowing vaguely humanoid form of Medium size. Whichever form you choose, each light sheds dim light in a 10-foot radius.", source:"PHB 230" },
  { id:"druidcraft", name:"Druidcraft", level:0, school:"Transmutation", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Druid"], description:"Whispering to the spirits of nature, you create one of the following effects within range: a tiny, harmless sensory effect that predicts what the weather will be at your location for the next 24 hours; you instantly make a flower blossom, a seed pod open, or a leaf bud bloom; you create an instantaneous, harmless sensory effect, such as falling leaves, a puff of wind, the sound of a small animal, or the faint odor of skunk.", source:"PHB 236" },
  { id:"eldritch-blast", name:"Eldritch Blast", level:0, school:"Evocation", range:"120 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Warlock"], description:"A beam of crackling energy streaks toward a creature within range. Make a ranged spell attack against the target. On a hit, the target takes 1d10 force damage. The spell creates more than one beam when you reach higher levels: two beams at 5th level, three beams at 11th level, and four beams at 17th level.", source:"PHB 237" },
  { id:"fire-bolt", name:"Fire Bolt", level:0, school:"Evocation", range:"120 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You hurl a mote of fire at a creature or object within range. Make a ranged spell attack against the target. On a hit, the target takes 1d10 fire damage. A flammable object hit by this spell ignites if it isn't being worn or carried. This spell's damage increases by 1d10 when you reach 5th level (2d10), 11th level (3d10), and 17th level (4d10).", source:"PHB 242" },
  { id:"friends", name:"Friends", level:0, school:"Enchantment", range:"Self", duration:"1 minute", casting_time:"1 action", components:["S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"For the duration, you have advantage on all Charisma checks directed at one creature of your choice that isn't hostile toward you. When the spell ends, the creature realizes that you used magic to influence its mood and becomes hostile toward you.", source:"PHB 244" },
  { id:"guidance", name:"Guidance", level:0, school:"Divination", range:"Touch", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Cleric","Druid"], description:"You touch one willing creature. Once before the spell ends, the target can roll a d4 and add the number rolled to one ability check of its choice. It can roll the die before or after making the ability check. The spell then ends.", source:"PHB 248" },
  { id:"gust", name:"Gust", level:0, school:"Transmutation", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Wizard"], description:"You seize the air and compel it to create one of the following effects at a point you can see within range: One Medium or smaller creature that you choose must succeed on a Strength saving throw or be pushed up to 5 feet away from you. A Medium or smaller object not being worn or carried is pushed up to 5 feet away from you.", source:"XGE 157" },
  { id:"infestation", name:"Infestation", level:0, school:"Conjuration", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"You cause a cloud of mites, fleas, and other parasites to appear momentarily on one creature you can see within range. The target must succeed on a Constitution saving throw, or it takes 1d6 poison damage and moves 5 feet in a random direction if it can move.", source:"XGE 158" },
  { id:"light", name:"Light", level:0, school:"Evocation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Sorcerer","Wizard"], description:"You touch one object that is no larger than 10 feet in any dimension. Until the spell ends, the object sheds bright light in a 20-foot radius and dim light for an additional 20 feet. The light can be colored as you like. Completely covering the object with something opaque blocks the light.", source:"PHB 255" },
  { id:"mage-hand", name:"Mage Hand", level:0, school:"Conjuration", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"A spectral, floating hand appears at a point you choose within range. The hand lasts for the duration or until you dismiss it as an action. The hand vanishes if it is ever more than 30 feet away from you or if you cast this spell again. You can use the hand to manipulate an object, open an unlocked door or container, stow or retrieve an item from an open container, or pour the contents out of a vial.", source:"PHB 256" },
  { id:"magic-stone", name:"Magic Stone", level:0, school:"Transmutation", range:"Touch", duration:"1 minute", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:false, classes:["Druid","Warlock"], description:"You touch one to three pebbles and imbue them with magic. You or someone else can make a ranged spell attack with one of the pebbles by throwing it or hurling it with a sling. If thrown, it has a range of 60 feet. On a hit, the target takes bludgeoning damage equal to 1d6 + your spellcasting ability modifier.", source:"XGE 160" },
  { id:"mending", name:"Mending", level:0, school:"Transmutation", range:"Touch", duration:"Instantaneous", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid","Sorcerer","Wizard"], description:"This spell repairs a single break or tear in an object you touch, such as a broken chain link, two halves of a broken key, a torn cloak, or a leaking wineskin. As long as the break or tear is no larger than 1 foot in any dimension, you mend it, leaving no trace of the former damage.", source:"PHB 259" },
  { id:"message", name:"Message", level:0, school:"Transmutation", range:"120 ft", duration:"1 round", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"You point your finger toward a creature within range and whisper a message. The target (and only the target) hears the message and can reply in a whisper that only you can hear. You can cast this spell through solid objects if you are familiar with the target and know it is beyond the barrier.", source:"PHB 259" },
  { id:"minor-illusion", name:"Minor Illusion", level:0, school:"Illusion", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["S","M"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You create a sound or an image of an object within range that lasts for the duration. The illusion also ends if you dismiss it as an action or cast this spell again. If you create a sound, its volume can range from a whisper to a scream.", source:"PHB 260" },
  { id:"poison-spray", name:"Poison Spray", level:0, school:"Conjuration", range:"10 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"You extend your hand toward a creature you can see within range and project a puff of noxious gas from your palm. The creature must succeed on a Constitution saving throw or take 1d12 poison damage.", source:"PHB 266" },
  { id:"prestidigitation", name:"Prestidigitation", level:0, school:"Transmutation", range:"10 ft", duration:"Up to 1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"This spell is a minor magical trick that novice spellcasters use for practice. You create one of the following magical effects within range: a harmless sensory effect; you instantaneously light or snuff out a candle, a torch, or a small campfire; you instantaneously clean or soil an object no larger than 1 cubic foot; you chill, warm, or flavor up to 1 cubic foot of nonliving material for 1 hour.", source:"PHB 267" },
  { id:"produce-flame", name:"Produce Flame", level:0, school:"Conjuration", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Druid"], description:"A flickering flame appears in your hand. The flame remains there for the duration and harms neither you nor your equipment. The flame sheds bright light in a 10-foot radius and dim light for an additional 10 feet. The spell ends if you dismiss it as an action or if you cast it again. You can also attack with the flame, although doing so ends the spell.", source:"PHB 269" },
  { id:"ray-of-frost", name:"Ray of Frost", level:0, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A frigid beam of blue-white light streaks toward a creature within range. Make a ranged spell attack against the target. On a hit, it takes 1d8 cold damage, and its speed is reduced by 10 feet until the start of your next turn. The spell's damage increases by 1d8 when you reach 5th level (2d8), 11th level (3d8), and 17th level (4d8).", source:"PHB 271" },
  { id:"resistance", name:"Resistance", level:0, school:"Abjuration", range:"Touch", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Druid"], description:"You touch one willing creature. Once before the spell ends, the target can roll a d4 and add the number rolled to one saving throw of its choice. It can roll the die before or after making the saving throw. The spell then ends.", source:"PHB 272" },
  { id:"sacred-flame", name:"Sacred Flame", level:0, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric"], description:"Flame-like radiance descends on a creature that you can see within range. The target must succeed on a Dexterity saving throw or take 1d8 radiant damage. The target gains no benefit from cover for this saving throw. The spell's damage increases by 1d8 when you reach 5th level (2d8), 11th level (3d8), and 17th level (4d8).", source:"PHB 272" },
  { id:"shillelagh", name:"Shillelagh", level:0, school:"Transmutation", range:"Touch", duration:"1 minute", casting_time:"1 bonus action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid"], description:"The wood of a club or quarterstaff you are holding is imbued with nature's power. For the duration, you can use your spellcasting ability instead of Strength for the attack and damage rolls of melee attacks using that weapon, and the weapon's damage die becomes a d8. The weapon also becomes magical, if it isn't already. The spell ends if you cast it again or if you let go of the weapon.", source:"PHB 275" },
  { id:"shocking-grasp", name:"Shocking Grasp", level:0, school:"Evocation", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"Lightning springs from your hand to deliver a shock to a creature you try to touch. Make a melee spell attack against the target. You have advantage on the attack roll if the target is wearing armor made of metal. On a hit, the target takes 1d8 lightning damage, and it can't take reactions until the start of its next turn.", source:"PHB 275" },
  { id:"spare-the-dying", name:"Spare the Dying", level:0, school:"Necromancy", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric"], description:"You touch a living creature that has 0 hit points. The creature becomes stable. This spell has no effect on undead or constructs.", source:"PHB 277" },
  { id:"thaumaturgy", name:"Thaumaturgy", level:0, school:"Transmutation", range:"30 ft", duration:"Up to 1 minute", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Cleric"], description:"You manifest a minor wonder, a sign of supernatural power, within range. You create one of the following magical effects within range: your voice booms up to three times as loud as normal for 1 minute; you cause flames to flicker, brighten, dim, or change color for 1 minute; you cause harmless tremors in the ground for 1 minute; you create an instantaneous sound that originates from a point of your choice within range.", source:"PHB 282" },
  { id:"thorn-whip", name:"Thorn Whip", level:0, school:"Transmutation", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid"], description:"You create a long, vine-like whip covered in thorns that lashes out at your command toward a creature in range. Make a melee spell attack against the target. If the attack hits, the creature takes 1d6 piercing damage, and if the creature is Large or smaller, you pull the creature up to 10 feet closer to you.", source:"PHB 282" },
  { id:"thunderclap", name:"Thunderclap", level:0, school:"Evocation", range:"5 ft", duration:"Instantaneous", casting_time:"1 action", components:["S"], ritual:false, concentration:false, classes:["Bard","Druid","Sorcerer","Warlock","Wizard"], description:"You create a burst of thunderous sound, which can be heard 100 feet away. Each creature other than you within 5 feet of you must make a Constitution saving throw. On a failed save, the creature takes 1d6 thunder damage.", source:"XGE 168" },
  { id:"toll-the-dead", name:"Toll the Dead", level:0, school:"Necromancy", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Warlock","Wizard"], description:"You point at one creature you can see within range, and the sound of a dolorous bell fills the air around it for a moment. The target must succeed on a Wisdom saving throw or take 1d8 necrotic damage. If the target is missing any of its hit points, it instead takes 1d12 necrotic damage.", source:"XGE 169" },
  { id:"true-strike", name:"True Strike", level:0, school:"Divination", range:"30 ft", duration:"1 round", casting_time:"1 action", components:["S"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You extend your hand and point a finger at a target in range. Your magic grants you a brief insight into the target's defenses. On your next turn, you gain advantage on your first attack roll against the target, provided that this spell hasn't ended.", source:"PHB 284" },
  { id:"vicious-mockery", name:"Vicious Mockery", level:0, school:"Enchantment", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard"], description:"You unleash a string of insults laced with subtle enchantments at a creature you can see within range. If the target can hear you (though it need not understand you), it must succeed on a Wisdom saving throw or take 1d4 psychic damage and have disadvantage on the next attack roll it makes before the end of its next turn.", source:"PHB 285" },
  { id:"word-of-radiance", name:"Word of Radiance", level:0, school:"Evocation", range:"5 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","M"], ritual:false, concentration:false, classes:["Cleric"], description:"You utter a divine word, and burning radiance erupts from you. Each creature of your choice that you can see within range must succeed on a Constitution saving throw or take 1d6 radiant damage.", source:"XGE 171" },

  // LEVEL 1
  { id:"absorb-elements", name:"Absorb Elements", level:1, school:"Abjuration", range:"Self", duration:"1 round", casting_time:"1 reaction", components:["S"], ritual:false, concentration:false, classes:["Druid","Ranger","Sorcerer","Wizard"], description:"The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you hit with a melee attack on your next turn, the target takes an extra 1d6 damage of the triggering type, and the spell ends.", source:"XGE 150" },
  { id:"alarm", name:"Alarm", level:1, school:"Abjuration", range:"30 ft", duration:"8 hours", casting_time:"1 minute", components:["V","S","M"], ritual:true, concentration:false, classes:["Ranger","Wizard"], description:"You set an alarm against unwanted intrusion. Choose a door, a window, or an area within range that is no larger than a 20-foot cube. Until the spell ends, an alarm alerts you whenever a Tiny or larger creature touches or enters the warded area.", source:"PHB 211" },
  { id:"animal-friendship", name:"Animal Friendship", level:1, school:"Enchantment", range:"30 ft", duration:"24 hours", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Druid","Ranger"], description:"This spell lets you convince a beast that you mean it no harm. Choose a beast that you can see within range. It must see and hear you. If the beast's Intelligence is 4 or higher, the spell fails. Otherwise, the beast must succeed on a Wisdom saving throw or be charmed by you for the spell's duration.", source:"PHB 212" },
  { id:"armor-of-agathys", name:"Armor of Agathys", level:1, school:"Abjuration", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Warlock"], description:"A protective magical force surrounds you, manifesting as a spectral frost that covers you and your gear. You gain 5 temporary hit points for the duration. If a creature hits you with a melee attack while you have these hit points, the creature takes 5 cold damage.", source:"PHB 215" },
  { id:"arms-of-hadar", name:"Arms of Hadar", level:1, school:"Conjuration", range:"Self (10-foot radius)", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Warlock"], description:"You invoke the power of Hadar, the Dark Hunger. Tendrils of dark energy erupt from you and batter all creatures within 10 feet of you. Each creature in that area must make a Strength saving throw. On a failed save, a target takes 2d6 necrotic damage and can't take reactions until its next turn.", source:"PHB 215" },
  { id:"bane", name:"Bane", level:1, school:"Enchantment", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Cleric"], description:"Up to three creatures of your choice that you can see within range must make Charisma saving throws. Whenever a target that fails this saving throw makes an attack roll or a saving throw before the spell ends, the target must roll a d4 and subtract the number rolled from the attack roll or saving throw.", source:"PHB 216" },
  { id:"bless", name:"Bless", level:1, school:"Enchantment", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Paladin"], description:"You bless up to three creatures of your choice within range. Whenever a target makes an attack roll or a saving throw before the spell ends, the target can roll a d4 and add the number rolled to the attack roll or saving throw.", source:"PHB 219" },
  { id:"burning-hands", name:"Burning Hands", level:1, school:"Evocation", range:"Self (15-foot cone)", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"As you hold your hands with thumbs touching and fingers spread, a thin sheet of flames shoots forth from your outstretched fingertips. Each creature in a 15-foot cone must make a Dexterity saving throw. A creature takes 3d6 fire damage on a failed save, or half as much damage on a successful one.", source:"PHB 220" },
  { id:"catapult", name:"Catapult", level:1, school:"Transmutation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"Choose one object weighing 1 to 5 pounds within range that isn't being worn or carried. The object flies in a straight line up to 90 feet in a direction you choose before falling to the ground, stopping early if it impacts against a solid surface. If the object would strike a creature, that creature must make a Dexterity saving throw. On a failed save, the object strikes the target and stops moving. When the object strikes something, the object and what it strikes each take 3d8 bludgeoning damage.", source:"XGE 150" },
  { id:"cause-fear", name:"Cause Fear", level:1, school:"Necromancy", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"You awaken the sense of mortality in one creature you can see within range. A construct or an undead is immune to this effect. The target must succeed on a Wisdom saving throw or become frightened of you until the spell ends.", source:"XGE 151" },
  { id:"charm-person", name:"Charm Person", level:1, school:"Enchantment", range:"30 ft", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Druid","Sorcerer","Warlock","Wizard"], description:"You attempt to charm a humanoid you can see within range. It must make a Wisdom saving throw, and does so with advantage if you or your companions are fighting it. If it fails the saving throw, it is charmed by you until the spell ends or until you or your companions do anything harmful to it.", source:"PHB 221" },
  { id:"chromatic-orb", name:"Chromatic Orb", level:1, school:"Evocation", range:"90 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You hurl a 4-inch-diameter sphere of energy at a creature that you can see within range. You choose acid, cold, fire, lightning, poison, or thunder for the type of orb you create, and then make a ranged spell attack against the target. If the attack hits, the creature takes 3d8 damage of the type you chose.", source:"PHB 221" },
  { id:"color-spray", name:"Color Spray", level:1, school:"Illusion", range:"Self (15-foot cone)", duration:"1 round", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A dazzling array of flashing, colored light springs from your hand. Roll 6d10; the total is how many hit points of creatures this spell can affect. Creatures in a 15-foot cone originating from you are affected in ascending order of their current hit points. Each creature affected by this spell is blinded until the spell ends.", source:"PHB 222" },
  { id:"command", name:"Command", level:1, school:"Enchantment", range:"60 ft", duration:"1 round", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Cleric","Paladin"], description:"You speak a one-word command to a creature you can see within range. The target must succeed on a Wisdom saving throw or follow the command on its next turn. The spell has no effect if the target is undead, if it doesn't understand your language, or if your command is directly harmful to it.", source:"PHB 223" },
  { id:"compelled-duel", name:"Compelled Duel", level:1, school:"Enchantment", range:"30 ft", duration:"1 minute", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:true, classes:["Paladin"], description:"You attempt to compel a creature into a duel. One creature that you can see within range must make a Wisdom saving throw. On a failed save, the creature is drawn to you, compelled by your divine demand. For the duration, it has disadvantage on attack rolls against creatures other than you, and must make a Wisdom saving throw each time it attempts to move to a space that is more than 30 feet away from you.", source:"PHB 224" },
  { id:"comprehend-languages", name:"Comprehend Languages", level:1, school:"Divination", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"For the duration, you understand the literal meaning of any spoken language that you hear. You also understand any written language that you see, but you must be touching the surface on which the words are written. It takes about 1 minute to read one page of text.", source:"PHB 224" },
  { id:"cure-wounds", name:"Cure Wounds", level:1, school:"Evocation", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid","Paladin","Ranger"], description:"A creature you touch regains a number of hit points equal to 1d8 + your spellcasting ability modifier. This spell has no effect on undead or constructs.", source:"PHB 230", higher_levels:"When you cast this spell using a spell slot of 2nd level or higher, the healing increases by 1d8 for each slot level above 1st." },
  { id:"detect-evil-and-good", name:"Detect Evil and Good", level:1, school:"Divination", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Cleric","Paladin"], description:"For the duration, you know if there is an aberration, celestial, elemental, fey, fiend, or undead within 30 feet of you, as well as where the creature is located. Similarly, you know if there is a place or object within 30 feet of you that has been magically consecrated or desecrated.", source:"PHB 231" },
  { id:"detect-magic", name:"Detect Magic", level:1, school:"Divination", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:true, concentration:true, classes:["Bard","Cleric","Druid","Paladin","Ranger","Sorcerer","Wizard"], description:"For the duration, you sense the presence of magic within 30 feet of you. If you sense magic in this way, you can use your action to see a faint aura around any visible creature or object in the area that bears magic, and you learn its school of magic, if any.", source:"PHB 231" },
  { id:"detect-poison-and-disease", name:"Detect Poison and Disease", level:1, school:"Divination", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:true, classes:["Cleric","Druid","Paladin","Ranger"], description:"For the duration, you can sense the presence and location of poisons, poisonous creatures, and diseases within 30 feet of you. You also identify the kind of poison, poisonous creature, or disease in each case.", source:"PHB 231" },
  { id:"disguise-self", name:"Disguise Self", level:1, school:"Illusion", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"You make yourself—including your clothing, armor, weapons, and other belongings on your person—look different until the spell ends or until you use your action to dismiss it. You can seem 1 foot shorter or taller and can appear thin, fat, or in between. You can't change your body type, so you must adopt a form that has the same basic arrangement of limbs.", source:"PHB 233" },
  { id:"dissonant-whispers", name:"Dissonant Whispers", level:1, school:"Enchantment", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard"], description:"You whisper a discordant melody that only one creature of your choice within range can hear, wracking it with terrible pain. The target must make a Wisdom saving throw. On a failed save, it takes 3d6 psychic damage and must immediately use its reaction, if available, to move as far as its speed allows away from you.", source:"PHB 234" },
  { id:"divine-favor", name:"Divine Favor", level:1, school:"Evocation", range:"Self", duration:"1 minute", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:true, classes:["Paladin"], description:"Your prayer empowers you with divine radiance. Until the spell ends, your weapon attacks deal an extra 1d4 radiant damage on a hit.", source:"PHB 234" },
  { id:"earthbind", name:"Earthbind", level:2, school:"Transmutation", range:"300 ft", duration:"1 minute", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"Choose one creature you can see within range. Yellow strips of magical energy loop around the creature. The target must succeed on a Strength saving throw or its flying speed (if any) is reduced to 0 feet for the spell's duration. An airborne creature affected by this spell descends at 60 feet per round until it reaches the ground or the spell ends.", source:"XGE 154" },
  { id:"entangle", name:"Entangle", level:1, school:"Conjuration", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid"], description:"Grasping weeds and vines sprout from the ground in a 20-foot square starting from a point within range. For the duration, these plants turn the ground in the area into difficult terrain. A creature in the area when you cast the spell must succeed on a Strength saving throw or be restrained by the entangling plants until the spell ends.", source:"PHB 238" },
  { id:"expeditious-retreat", name:"Expeditious Retreat", level:1, school:"Transmutation", range:"Self", duration:"10 minutes", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"This spell allows you to move at an incredible pace. When you cast this spell, and then as a bonus action on each of your turns until the spell ends, you can take the Dash action.", source:"PHB 238" },
  { id:"faerie-fire", name:"Faerie Fire", level:1, school:"Evocation", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Bard","Druid"], description:"Each object in a 20-foot cube within range is outlined in blue, green, or violet light (your choice). Any creature in the area when the spell is cast is also outlined in light if it fails a Dexterity saving throw. For the duration, objects and affected creatures shed dim light in a 10-foot radius. Any attack roll against an affected creature or object has advantage if the attacker can see it.", source:"PHB 239" },
  { id:"false-life", name:"False Life", level:1, school:"Necromancy", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"Bolstering yourself with a necromantic facsimile of life, you gain 1d4 + 4 temporary hit points for the duration.", source:"PHB 239" },
  { id:"feather-fall", name:"Feather Fall", level:1, school:"Transmutation", range:"60 ft", duration:"1 minute", casting_time:"1 reaction", components:["V","M"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"Choose up to five falling creatures within range. A falling creature's rate of descent slows to 60 feet per round until the spell ends. If the creature lands before the spell ends, it takes no falling damage and can land on its feet, and the spell ends for that creature.", source:"PHB 239" },
  { id:"find-familiar", name:"Find Familiar", level:1, school:"Conjuration", range:"10 ft", duration:"Instantaneous", casting_time:"1 hour", components:["V","S","M"], ritual:true, concentration:false, classes:["Wizard"], description:"You gain the service of a familiar, a spirit that takes an animal form you choose: bat, cat, crab, frog (toad), hawk, lizard, octopus, owl, poisonous snake, fish (quipper), rat, raven, sea horse, spider, or weasel. Appearing in an unoccupied space within range, the familiar has the statistics of the chosen form.", source:"PHB 240" },
  { id:"fog-cloud", name:"Fog Cloud", level:1, school:"Conjuration", range:"120 ft", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Ranger","Sorcerer","Wizard"], description:"You create a 20-foot-radius sphere of fog centered on a point within range. The sphere spreads around corners, and its area is heavily obscured. It lasts for the duration or until a wind of moderate or greater speed (at least 10 miles per hour) disperses it.", source:"PHB 243" },
  { id:"goodberry", name:"Goodberry", level:1, school:"Transmutation", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Ranger"], description:"Up to ten berries appear in your hand and are infused with magic for the duration. A creature can use its action to eat one berry. Eating a berry restores 1 hit point, and the berry provides enough nourishment to sustain a creature for one day.", source:"PHB 246" },
  { id:"grease", name:"Grease", level:1, school:"Conjuration", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"Slick grease covers the ground in a 10-foot square centered on a point within range and turns it into difficult terrain for the duration. When the grease appears, each creature standing in its area must succeed on a Dexterity saving throw or fall prone. A creature that enters the area or ends its turn there must also succeed on a Dexterity saving throw or fall prone.", source:"PHB 246" },
  { id:"guiding-bolt", name:"Guiding Bolt", level:1, school:"Evocation", range:"120 ft", duration:"1 round", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric"], description:"A flash of light streaks toward a creature of your choice within range. Make a ranged spell attack against the target. On a hit, the target takes 4d6 radiant damage, and the next attack roll made against this target before the end of your next turn has advantage, thanks to the mystical dim light glittering on the target until then.", source:"PHB 248" },
  { id:"healing-word", name:"Healing Word", level:1, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid"], description:"A creature of your choice that you can see within range regains hit points equal to 1d4 + your spellcasting ability modifier. This spell has no effect on undead or constructs.", source:"PHB 250", higher_levels:"When you cast this spell using a spell slot of 2nd level or higher, the healing increases by 1d4 for each slot level above 1st." },
  { id:"hellish-rebuke", name:"Hellish Rebuke", level:1, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 reaction", components:["V","S"], ritual:false, concentration:false, classes:["Warlock"], description:"You point your finger, and the creature that damaged you is momentarily surrounded by hellish flames. The creature must make a Dexterity saving throw. It takes 2d10 fire damage on a failed save, or half as much damage on a successful one.", source:"PHB 250" },
  { id:"heroism", name:"Heroism", level:1, school:"Enchantment", range:"Touch", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Paladin"], description:"A willing creature you touch is imbued with bravery. Until the spell ends, the creature is immune to being frightened and gains temporary hit points equal to your spellcasting ability modifier at the start of each of its turns.", source:"PHB 250" },
  { id:"hex", name:"Hex", level:1, school:"Enchantment", range:"90 ft", duration:"1 hour", casting_time:"1 bonus action", components:["V","S","M"], ritual:false, concentration:true, classes:["Warlock"], description:"You place a curse on a creature that you can see within range. Until the spell ends, you deal an extra 1d6 necrotic damage to the target whenever you hit it with an attack. Also, choose one ability when you cast the spell. The target has disadvantage on ability checks made with the chosen ability.", source:"PHB 251" },
  { id:"hunters-mark", name:"Hunter's Mark", level:1, school:"Divination", range:"90 ft", duration:"1 hour", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:true, classes:["Ranger"], description:"You choose a creature you can see within range and mystically mark it as your quarry. Until the spell ends, you deal an extra 1d6 damage to the target whenever you hit it with a weapon attack, and you have advantage on any Wisdom (Perception) or Wisdom (Survival) check you make to find it.", source:"PHB 251" },
  { id:"ice-knife", name:"Ice Knife", level:1, school:"Conjuration", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["S","M"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Wizard"], description:"You create a shard of ice and fling it at one creature within range. Make a ranged spell attack against the target. On a hit, the target takes 1d10 piercing damage. Hit or miss, the shard then explodes. The target and each creature within 5 feet of it must succeed on a Dexterity saving throw or take 2d6 cold damage.", source:"XGE 157" },
  { id:"identify", name:"Identify", level:1, school:"Divination", range:"Touch", duration:"Instantaneous", casting_time:"1 minute", components:["V","S","M"], ritual:true, concentration:false, classes:["Bard","Wizard"], description:"You choose one object that you must touch throughout the casting of the spell. If it is a magic item or some other magic-imbued object, you learn its properties and how to use them, whether it requires attunement to use, and how many charges it has, if any.", source:"PHB 252" },
  { id:"illusory-script", name:"Illusory Script", level:1, school:"Illusion", range:"Touch", duration:"10 days", casting_time:"1 minute", components:["S","M"], ritual:true, concentration:false, classes:["Bard","Warlock","Wizard"], description:"You write on parchment, paper, or some other suitable writing material and imbue it with a potent illusion that lasts for the duration. To you and any creatures you designate when you cast the spell, the writing appears normal, written in your hand, and conveys whatever meaning you intended when you wrote the text.", source:"PHB 252" },
  { id:"inflict-wounds", name:"Inflict Wounds", level:1, school:"Necromancy", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric"], description:"Make a melee spell attack against a creature you can reach. On a hit, the target takes 3d10 necrotic damage.", source:"PHB 253", higher_levels:"When you cast this spell using a spell slot of 2nd level or higher, the damage increases by 1d10 for each slot level above 1st." },
  { id:"jump", name:"Jump", level:1, school:"Transmutation", range:"Touch", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Ranger","Sorcerer","Wizard"], description:"You touch a creature. The creature's jump distance is tripled until the spell ends.", source:"PHB 254" },
  { id:"longstrider", name:"Longstrider", level:1, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Druid","Ranger","Wizard"], description:"You touch a creature. The target's speed increases by 10 feet until the spell ends.", source:"PHB 256", higher_levels:"When you cast this spell using a spell slot of 2nd level or higher, you can target one additional creature for each slot level above 1st." },
  { id:"mage-armor", name:"Mage Armor", level:1, school:"Abjuration", range:"Touch", duration:"8 hours", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You touch a willing creature who isn't wearing armor, and a protective magical force surrounds it until the spell ends. The target's base AC becomes 13 + its Dexterity modifier. The spell ends if the target dons armor or if you dismiss the spell as an action.", source:"PHB 256" },
  { id:"magic-missile", name:"Magic Missile", level:1, school:"Evocation", range:"120 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You create three glowing darts of magical force. Each dart hits a creature of your choice that you can see within range. A dart deals 1d4 + 1 force damage to its target. The darts all strike simultaneously, and you can direct them to hit one creature or several.", source:"PHB 257", higher_levels:"When you cast this spell using a spell slot of 2nd level or higher, the spell creates one more dart for each slot level above 1st." },
  { id:"protection-from-evil-and-good", name:"Protection from Evil and Good", level:1, school:"Abjuration", range:"Touch", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Paladin","Warlock","Wizard"], description:"Until the spell ends, one willing creature you touch is protected against certain types of creatures: aberrations, celestials, elementals, fey, fiends, and undead. The protection grants several benefits. Creatures of those types have disadvantage on attack rolls against the target.", source:"PHB 270" },
  { id:"ray-of-sickness", name:"Ray of Sickness", level:1, school:"Necromancy", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A ray of sickening greenish energy lashes out toward a creature within range. Make a ranged spell attack against the target. On a hit, the target takes 2d8 poison damage and must make a Constitution saving throw. On a failed save, it is also poisoned until the end of your next turn.", source:"PHB 271" },
  { id:"sanctuary", name:"Sanctuary", level:1, school:"Abjuration", range:"30 ft", duration:"1 minute", casting_time:"1 bonus action", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric"], description:"You ward a creature within range against attack. Until the spell ends, any creature who targets the warded creature with an attack or a harmful spell must first make a Wisdom saving throw. On a failed save, the creature must choose a new target or lose the attack or spell.", source:"PHB 272" },
  { id:"shield", name:"Shield", level:1, school:"Abjuration", range:"Self", duration:"1 round", casting_time:"1 reaction", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"An invisible barrier of magical force appears and protects you. Until the start of your next turn, you have a +5 bonus to AC, including against the triggering attack, and you take no damage from magic missile.", source:"PHB 275" },
  { id:"shield-of-faith", name:"Shield of Faith", level:1, school:"Abjuration", range:"60 ft", duration:"10 minutes", casting_time:"1 bonus action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Paladin"], description:"A shimmering field appears and surrounds a creature of your choice within range, granting it a +2 bonus to AC for the duration.", source:"PHB 275" },
  { id:"silent-image", name:"Silent Image", level:1, school:"Illusion", range:"60 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"You create the image of an object, a creature, or some other visible phenomenon that is no larger than a 15-foot cube. The image appears at a spot within range and lasts for the duration. The image is purely visual; it isn't accompanied by sound, smell, or other sensory effects.", source:"PHB 276" },
  { id:"sleep", name:"Sleep", level:1, school:"Enchantment", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"This spell sends creatures into a magical slumber. Roll 5d8; the total is how many hit points of creatures this spell can affect. Creatures within 20 feet of a point you choose within range are affected in ascending order of their current hit points (ignoring unconscious creatures).", source:"PHB 276" },
  { id:"snare", name:"Snare", level:1, school:"Abjuration", range:"Touch", duration:"8 hours", casting_time:"1 minute", components:["S","M"], ritual:false, concentration:false, classes:["Druid","Ranger","Wizard"], description:"As you cast this spell, you use the rope to create a circle with a 5-foot radius on the ground or the floor. When you finish casting, the rope disappears and the circle becomes a magic trap. This trap is nearly invisible, requiring a successful Intelligence (Investigation) check against your spell save DC to be discerned.", source:"XGE 165" },
  { id:"speak-with-animals", name:"Speak with Animals", level:1, school:"Divination", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:true, concentration:false, classes:["Bard","Druid","Ranger"], description:"You gain the ability to comprehend and verbally communicate with beasts for the duration. The knowledge and awareness of many beasts is limited by their intelligence, but at minimum, beasts can give you information about nearby locations and monsters, including whatever they can perceive or have perceived within the past day.", source:"PHB 277" },
  { id:"tashas-hideous-laughter", name:"Tasha's Hideous Laughter", level:1, school:"Enchantment", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Wizard"], description:"A creature of your choice that you can see within range perceives everything as hilariously funny and falls into fits of laughter if this spell affects it. The target must succeed on a Wisdom saving throw or fall prone, becoming incapacitated and unable to stand up for the duration.", source:"PHB 280" },
  { id:"tenser-s-floating-disk", name:"Tenser's Floating Disk", level:1, school:"Conjuration", range:"30 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Wizard"], description:"This spell creates a circular, horizontal plane of force, 3 feet in diameter and 1 inch thick, that floats 3 feet above the ground in an unoccupied space of your choice that you can see within range. The disk remains for the duration, and can hold up to 500 pounds.", source:"PHB 282" },
  { id:"thunderwave", name:"Thunderwave", level:1, school:"Evocation", range:"Self (15-foot cube)", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid","Sorcerer","Wizard"], description:"A wave of thunderous force sweeps out from you. Each creature in a 15-foot cube originating from you must make a Constitution saving throw. On a failed save, a creature takes 2d8 thunder damage and is pushed 10 feet away from you. On a successful save, the creature takes half as much damage and isn't pushed.", source:"PHB 282" },
  { id:"unseen-servant", name:"Unseen Servant", level:1, school:"Conjuration", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Bard","Warlock","Wizard"], description:"This spell creates an invisible, mindless, shapeless, Medium force that performs simple tasks at your command until the spell ends. The servant springs into existence in an unoccupied space on the ground within range. It has AC 10, 1 hit point, and a Strength of 2, and it can't attack.", source:"PHB 284" },
  { id:"witch-bolt", name:"Witch Bolt", level:1, school:"Evocation", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"A beam of crackling, blue energy lances out toward a creature within range, forming a sustained arc of lightning between you and the target. Make a ranged spell attack against that creature. On a hit, the target takes 1d12 lightning damage, and on each of your turns for the duration, you can use your action to deal 1d12 lightning damage to the target automatically.", source:"PHB 289" },
  { id:"wrathful-smite", name:"Wrathful Smite", level:1, school:"Evocation", range:"Self", duration:"1 minute", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:true, classes:["Paladin"], description:"The next time you hit with a melee weapon attack during this spell's duration, your attack deals an extra 1d6 psychic damage. Additionally, if the target is a creature, it must make a Wisdom saving throw or be frightened of you until the spell ends.", source:"PHB 289" },

  // LEVEL 2
  { id:"aid", name:"Aid", level:2, school:"Abjuration", range:"30 ft", duration:"8 hours", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Paladin"], description:"Your spell bolsters your allies with toughness and resolve. Choose up to three creatures within range. Each target's hit point maximum and current hit points increase by 5 for the duration.", source:"PHB 211", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, a target's hit points increase by an additional 5 for each slot level above 2nd." },
  { id:"alter-self", name:"Alter Self", level:2, school:"Transmutation", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"You assume a different form. When you cast the spell, choose one of the following options, the effects of which last for the duration of the spell. Aquatic Adaptation, Change Appearance, or Natural Weapons.", source:"PHB 211" },
  { id:"arcane-lock", name:"Arcane Lock", level:2, school:"Abjuration", range:"Touch", duration:"Until dispelled", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"You touch a closed door, window, gate, chest, or other entryway, and it becomes locked for the duration. You and the creatures you designate when you cast this spell can open the object normally. You can also set a password that, when spoken within 5 feet of the object, suppresses this spell for 1 minute.", source:"PHB 215" },
  { id:"augury", name:"Augury", level:2, school:"Divination", range:"Self", duration:"Instantaneous", casting_time:"1 minute", components:["V","S","M"], ritual:true, concentration:false, classes:["Cleric"], description:"By casting gem-inlaid sticks, rolling dragon bones, laying out ornate cards, or employing some other divining tool, you receive an omen from an otherworldly entity about the results of a specific course of action that you plan to take within the next 30 minutes. The DM chooses from the following possible omens: Weal, Woe, Weal and woe, or Nothing.", source:"PHB 215" },
  { id:"barkskin", name:"Barkskin", level:2, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Ranger"], description:"You touch a willing creature. Until the spell ends, the target's skin has a rough, bark-like appearance, and the target's AC can't be less than 16, regardless of what kind of armor it is wearing.", source:"PHB 217" },
  { id:"blindness-deafness", name:"Blindness/Deafness", level:2, school:"Necromancy", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard","Cleric","Sorcerer","Wizard"], description:"You can blind or deafen a foe. Choose one creature that you can see within range to make a Constitution saving throw. If it fails, the target is either blinded or deafened (your choice) for the duration. At the end of each of its turns, the target can make a Constitution saving throw. On a success, the spell ends.", source:"PHB 219" },
  { id:"blur", name:"Blur", level:2, school:"Illusion", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"Your body becomes blurred, shifting and wavering to all who can see you. For the duration, any creature has disadvantage on attack rolls against you. An attacker is immune to this effect if it doesn't rely on sight, as with blindsight, or can see through illusions, as with truesight.", source:"PHB 219" },
  { id:"branding-smite", name:"Branding Smite", level:2, school:"Evocation", range:"Self", duration:"1 minute", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:true, classes:["Paladin"], description:"The next time you hit a creature with a weapon attack before this spell ends, the weapon gleams with astral radiance as you strike. The attack deals an extra 2d6 radiant damage to the target, which becomes visible if it's invisible, and the target sheds dim light in a 5-foot radius and can't become invisible until the spell ends.", source:"PHB 219" },
  { id:"calm-emotions", name:"Calm Emotions", level:2, school:"Enchantment", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Cleric"], description:"You attempt to suppress strong emotions in a group of people. Each humanoid in a 20-foot-radius sphere centered on a point you choose within range must make a Charisma saving throw; a creature can choose to fail this saving throw if it wishes. If a creature fails its saving throw, choose one of the following two effects.", source:"PHB 221" },
  { id:"cloud-of-daggers", name:"Cloud of Daggers", level:2, school:"Conjuration", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You fill the air with spinning daggers in a cube 5 feet on each side, centered on a point you choose within range. A creature takes 4d4 slashing damage when it enters the spell's area for the first time on a turn or starts its turn there.", source:"PHB 222" },
  { id:"continual-flame", name:"Continual Flame", level:2, school:"Evocation", range:"Touch", duration:"Until dispelled", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Wizard"], description:"A flame, equivalent in brightness to a torch, springs forth from an object that you touch. The effect looks like a regular flame, but it creates no heat and doesn't use oxygen. A continual flame can be covered or hidden but not smothered or quenched.", source:"PHB 227" },
  { id:"crown-of-madness", name:"Crown of Madness", level:2, school:"Enchantment", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"One humanoid of your choice that you can see within range must succeed on a Wisdom saving throw or become charmed by you for the duration. While the target is charmed in this way, a twisted crown of jagged iron appears on its head, and a madness glows in its eyes.", source:"PHB 229" },
  { id:"darkness", name:"Darkness", level:2, school:"Evocation", range:"60 ft", duration:"10 minutes", casting_time:"1 action", components:["V","M"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"Magical darkness spreads from a point you choose within range to fill a 15-foot-radius sphere for the duration. The darkness spreads around corners. A creature with darkvision can't see through this magical darkness, and nonmagical light can't illuminate it.", source:"PHB 230" },
  { id:"darkvision", name:"Darkvision", level:2, school:"Transmutation", range:"Touch", duration:"8 hours", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Ranger","Sorcerer","Wizard"], description:"You touch a willing creature to grant it the ability to see in the dark. For the duration, that creature has darkvision out to a range of 60 feet.", source:"PHB 230" },
  { id:"detect-thoughts", name:"Detect Thoughts", level:2, school:"Divination", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"For the duration, you can read the thoughts of certain creatures. When you cast the spell and as your action on each turn until the spell ends, you can focus your mind on any one creature that you can see within 30 feet of you.", source:"PHB 231" },
  { id:"dragon-s-breath", name:"Dragon's Breath", level:2, school:"Transmutation", range:"Touch", duration:"1 minute", casting_time:"1 bonus action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"You touch one willing creature and imbue it with the power to spew magical energy from its mouth, provided it has one. Choose acid, cold, fire, lightning, or poison. Until the spell ends, the creature can use an action to exhale energy of the chosen type in a 15-foot cone.", source:"XGE 154" },
  { id:"dust-devil", name:"Dust Devil", level:2, school:"Conjuration", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"Choose an unoccupied 5-foot cube of air that you can see within range. An elemental force that resembles a dust devil appears in the cube and lasts for the spell's duration. Any creature that ends its turn within 5 feet of the dust devil must make a Strength saving throw. On a failed save, the creature takes 1d8 bludgeoning damage and is pushed 10 feet away from the dust devil in a direction the DM determines.", source:"XGE 154" },
  { id:"enhance-ability", name:"Enhance Ability", level:2, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Cleric","Druid","Sorcerer","Wizard"], description:"You touch a creature and bestow upon it a magical enhancement. Choose one of the following effects; the target gains that effect until the spell ends. Bear's Endurance, Bull's Strength, Cat's Grace, Eagle's Splendor, Fox's Cunning, or Owl's Wisdom.", source:"PHB 237" },
  { id:"enlarge-reduce", name:"Enlarge/Reduce", level:2, school:"Transmutation", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"You cause a creature or an object you can see within range to grow larger or smaller for the duration. Choose either a creature or an object that is neither worn nor carried. If the target is unwilling, it can make a Constitution saving throw. On a success, the spell has no effect.", source:"PHB 237" },
  { id:"enthrall", name:"Enthrall", level:2, school:"Enchantment", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Warlock"], description:"You weave a distracting string of words, causing creatures of your choice that you can see within range and that can hear you to make a Wisdom saving throw. Any creature that fails its saving throw has disadvantage on Wisdom (Perception) checks made to perceive any creature other than you until the spell ends.", source:"PHB 238" },
  { id:"find-steed", name:"Find Steed", level:2, school:"Conjuration", range:"30 ft", duration:"Instantaneous", casting_time:"10 minutes", components:["V","S"], ritual:false, concentration:false, classes:["Paladin"], description:"You summon a spirit that assumes the form of an unusually intelligent, strong, and loyal steed, creating a long-lasting bond with it. Appearing in an unoccupied space within range, the steed takes on a form that you choose: a warhorse, a pony, a camel, an elk, or a mastiff.", source:"PHB 240" },
  { id:"flame-blade", name:"Flame Blade", level:2, school:"Evocation", range:"Self", duration:"10 minutes", casting_time:"1 bonus action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid"], description:"You evoke a fiery blade in your free hand. The blade is similar in size and shape to a scimitar, and it lasts for the duration. If you let go of the blade, it disappears, but you can evoke the blade again as a bonus action. You can use your action to make a melee spell attack with the fiery blade.", source:"PHB 242" },
  { id:"flaming-sphere", name:"Flaming Sphere", level:2, school:"Conjuration", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Wizard"], description:"A 5-foot-diameter sphere of fire appears in an unoccupied space of your choice within range and lasts for the duration. Any creature that ends its turn within 5 feet of the sphere must make a Dexterity saving throw. The creature takes 2d6 fire damage on a failed save, or half as much damage on a successful one.", source:"PHB 242" },
  { id:"gentle-repose", name:"Gentle Repose", level:2, school:"Necromancy", range:"Touch", duration:"10 days", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Cleric","Wizard"], description:"You touch a corpse or other remains. For the duration, the target is protected from decay and can't become undead. The spell also effectively extends the time limit on raising the target from the dead, since days spent under the influence of this spell don't count against the time limit of spells such as raise dead.", source:"PHB 245" },
  { id:"gust-of-wind", name:"Gust of Wind", level:2, school:"Evocation", range:"Self (60-foot line)", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"A line of strong wind 60 feet long and 10 feet wide blasts from you in a direction you choose for the spell's duration. Each creature that starts its turn in the line must succeed on a Strength saving throw or be pushed 15 feet away from you in a direction following the line.", source:"PHB 248" },
  { id:"heat-metal", name:"Heat Metal", level:2, school:"Transmutation", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Druid"], description:"Choose a manufactured metal object, such as a metal weapon or a suit of heavy or medium metal armor, that you can see within range. You cause the object to glow red-hot. Any creature in physical contact with the object takes 2d8 fire damage when you cast the spell. Until the spell ends, you can use a bonus action on each of your subsequent turns to cause this damage again.", source:"PHB 250" },
  { id:"hold-person", name:"Hold Person", level:2, school:"Enchantment", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Cleric","Druid","Sorcerer","Warlock","Wizard"], description:"Choose a humanoid that you can see within range. The target must succeed on a Wisdom saving throw or be paralyzed for the duration. At the end of each of its turns, the target can make another Wisdom saving throw. On a success, the spell ends on the target.", source:"PHB 251" },
  { id:"invisibility", name:"Invisibility", level:2, school:"Illusion", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"A creature you touch becomes invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.", source:"PHB 254", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd." },
  { id:"knock", name:"Knock", level:2, school:"Transmutation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"Choose an object that you can see within range. The object can be a door, a box, a chest, a set of manacles, a padlock, or another object that contains a mundane or magical means that prevents access. A target that is held shut by a mundane lock or that is stuck or barred becomes unlocked, unstuck, or unbarred.", source:"PHB 254" },
  { id:"lesser-restoration", name:"Lesser Restoration", level:2, school:"Abjuration", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid","Paladin","Ranger"], description:"You touch a creature and can end either one disease or one condition afflicting it. The condition can be blinded, deafened, paralyzed, or poisoned.", source:"PHB 255" },
  { id:"levitate", name:"Levitate", level:2, school:"Transmutation", range:"60 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"One creature or loose object of your choice that you can see within range rises vertically, up to 20 feet, and remains suspended there for the duration. The spell can levitate a target that weighs up to 500 pounds.", source:"PHB 255" },
  { id:"locate-animals-or-plants", name:"Locate Animals or Plants", level:2, school:"Divination", range:"Self", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Bard","Druid","Ranger"], description:"Describe or name a specific kind of beast or plant. Concentrating on the voice of nature in your surroundings, you learn the direction and distance to the closest creature or plant of that kind within 5 miles, if any are present.", source:"PHB 255" },
  { id:"locate-object", name:"Locate Object", level:2, school:"Divination", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Cleric","Druid","Paladin","Ranger","Wizard"], description:"Describe or name an object that is familiar to you. You sense the direction to the object's location, as long as that object is within 1,000 feet of you. If the object is in motion, you know the direction of its movement.", source:"PHB 256" },
  { id:"magic-mouth", name:"Magic Mouth", level:2, school:"Illusion", range:"30 ft", duration:"Until dispelled", casting_time:"1 minute", components:["V","S","M"], ritual:true, concentration:false, classes:["Bard","Wizard"], description:"You implant a message within an object in range, a message that is uttered when a trigger condition is met. Choose an object that you can see and that isn't being worn or carried by another creature. Then speak the message, which must be 25 words or less, though it can be delivered over as long as 10 minutes.", source:"PHB 257" },
  { id:"magic-weapon", name:"Magic Weapon", level:2, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:true, classes:["Paladin","Wizard"], description:"You touch a nonmagical weapon. Until the spell ends, that weapon becomes a magic weapon with a +1 bonus to attack rolls and damage rolls.", source:"PHB 257", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, the bonus increases to +2. When you use a spell slot of 6th level or higher, the bonus increases to +3." },
  { id:"mirror-image", name:"Mirror Image", level:2, school:"Illusion", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"Three illusory duplicates of yourself appear in your space. Until the spell ends, the duplicates move with you and mimic your actions, shifting position so it's impossible to track which image is real. You can use your action to dismiss the illusory duplicates.", source:"PHB 260" },
  { id:"misty-step", name:"Misty Step", level:2, school:"Conjuration", range:"Self", duration:"Instantaneous", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"Briefly surrounded by silvery mist, you teleport up to 30 feet to an unoccupied space that you can see.", source:"PHB 260" },
  { id:"moonbeam", name:"Moonbeam", level:2, school:"Evocation", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid"], description:"A silvery beam of pale light shines down in a 5-foot-radius, 40-foot-high cylinder centered on a point within range. Until the spell ends, dim light fills the cylinder. When a creature enters the spell's area for the first time on a turn or starts its turn there, it is engulfed in ghostly flames that cause searing pain, and it must make a Constitution saving throw.", source:"PHB 261" },
  { id:"nystul-s-magic-aura", name:"Nystul's Magic Aura", level:2, school:"Illusion", range:"Touch", duration:"24 hours", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"You place an illusion on a creature or an object you touch so that divination spells reveal false information about it. The target can be a willing creature or an object that isn't being carried or worn by another creature.", source:"PHB 263" },
  { id:"pass-without-trace", name:"Pass without Trace", level:2, school:"Abjuration", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Ranger"], description:"A veil of shadows and silence radiates from you, masking you and your companions from detection. For the duration, each creature you choose within 30 feet of you (including you) has a +10 bonus to Dexterity (Stealth) checks and can't be tracked except by magical means.", source:"PHB 264" },
  { id:"prayer-of-healing", name:"Prayer of Healing", level:2, school:"Evocation", range:"30 ft", duration:"Instantaneous", casting_time:"10 minutes", components:["V"], ritual:false, concentration:false, classes:["Cleric"], description:"Up to six creatures of your choice that you can see within range each regain hit points equal to 2d8 + your spellcasting ability modifier. This spell has no effect on undead or constructs.", source:"PHB 267", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, the healing increases by 1d8 for each slot level above 2nd." },
  { id:"protection-from-poison", name:"Protection from Poison", level:2, school:"Abjuration", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Druid","Paladin","Ranger"], description:"You touch a creature. If it is poisoned, you neutralize the poison. If more than one poison afflicts the target, you neutralize one poison that you know is present, or you neutralize one at random. For the duration, the target has advantage on saving throws against being poisoned, and it has resistance to poison damage.", source:"PHB 270" },
  { id:"scorching-ray", name:"Scorching Ray", level:2, school:"Evocation", range:"120 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You create three rays of fire and hurl them at targets within range. You can hurl them at one target or several. Make a ranged spell attack for each ray. On a hit, the target takes 2d6 fire damage.", source:"PHB 273", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, you create one additional ray for each slot level above 2nd." },
  { id:"see-invisibility", name:"See Invisibility", level:2, school:"Divination", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"For the duration, you see invisible creatures and objects as if they were visible, and you can see into the Ethereal Plane. Ethereal creatures and objects appear ghostly and translucent.", source:"PHB 274" },
  { id:"shatter", name:"Shatter", level:2, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"A sudden loud ringing noise, painfully intense, erupts from a point of your choice within range. Each creature in a 10-foot-radius sphere centered on that point must make a Constitution saving throw. A creature takes 3d8 thunder damage on a failed save, or half as much damage on a successful one.", source:"PHB 275" },
  { id:"silence", name:"Silence", level:2, school:"Illusion", range:"120 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:true, concentration:true, classes:["Bard","Cleric","Ranger"], description:"For the duration, no sound can be created within or pass through a 20-foot-radius sphere centered on a point you choose within range. Any creature or object entirely inside the sphere is immune to thunder damage, and creatures are deafened while entirely inside it.", source:"PHB 275" },
  { id:"skywrite", name:"Skywrite", level:2, school:"Transmutation", range:"Sight", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:true, concentration:true, classes:["Bard","Druid","Wizard"], description:"You cause up to ten words to form in a part of the sky you can see. The words appear to be made of cloud and remain in place for the spell's duration. The words dissipate when the spell ends. A strong wind can disperse the clouds and end the spell early.", source:"XGE 165" },
  { id:"spider-climb", name:"Spider Climb", level:2, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"Until the spell ends, one willing creature you touch gains the ability to move up, down, and across vertical surfaces and upside down along ceilings, while leaving its hands free. The target also gains a climbing speed equal to its walking speed.", source:"PHB 277" },
  { id:"spike-growth", name:"Spike Growth", level:2, school:"Transmutation", range:"150 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Ranger"], description:"The ground in a 20-foot radius centered on a point within range twists and sprouts hard spikes and thorns. The area becomes difficult terrain for the duration. When a creature moves into or within the area, it takes 2d4 piercing damage for every 5 feet it travels.", source:"PHB 277" },
  { id:"spiritual-weapon", name:"Spiritual Weapon", level:2, school:"Evocation", range:"60 ft", duration:"1 minute", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric"], description:"You create a floating, spectral weapon within range that lasts for the duration or until you cast this spell again. When you cast the spell, you can make a melee spell attack against a creature within 5 feet of the weapon. On a hit, the target takes force damage equal to 1d8 + your spellcasting ability modifier.", source:"PHB 278" },
  { id:"suggestion", name:"Suggestion", level:2, school:"Enchantment", range:"30 ft", duration:"8 hours", casting_time:"1 action", components:["V","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You suggest a course of activity (limited to a sentence or two) and magically influence a creature you can see within range that can hear and understand you. Creatures that can't be charmed are immune to this effect. The suggestion must be worded in such a manner as to make the course of action sound reasonable.", source:"PHB 279" },
  { id:"warding-bond", name:"Warding Bond", level:2, school:"Abjuration", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Paladin"], description:"This spell wards a willing creature you touch and creates a mystic connection between you and the target until the spell ends. While the target is within 60 feet of you, it gains a +1 bonus to AC and saving throws, and it has resistance to all damage. Also, each time it takes damage, you take the same amount of damage.", source:"PHB 287" },
  { id:"web", name:"Web", level:2, school:"Conjuration", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"You conjure a mass of thick, sticky webbing at a point of your choice within range. The webs fill a 20-foot cube from that point for the duration. The webs are difficult terrain and lightly obscure their area. If the webs aren't anchored between two solid masses (such as walls or trees) or layered across a floor, wall, or ceiling, the conjured web collapses on itself, and the spell ends at the start of your next turn.", source:"PHB 287" },

  // LEVEL 3
  { id:"animate-dead", name:"Animate Dead", level:3, school:"Necromancy", range:"10 ft", duration:"Instantaneous", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Wizard"], description:"This spell creates an undead servant. Choose a pile of bones or a corpse of a Medium or Small humanoid within range. Your spell imbues the target with a foul mimicry of life, raising it as an undead creature. The target becomes a skeleton if you chose bones or a zombie if you chose a corpse.", source:"PHB 212" },
  { id:"aura-of-vitality", name:"Aura of Vitality", level:3, school:"Evocation", range:"Self (30-foot radius)", duration:"1 minute", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Paladin"], description:"Healing energy radiates from you in an aura with a 30-foot radius. Until the spell ends, the aura moves with you, centered on you. You can use a bonus action to cause one creature in the aura (including you) to regain 2d6 hit points.", source:"PHB 216" },
  { id:"beacon-of-hope", name:"Beacon of Hope", level:3, school:"Abjuration", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Cleric"], description:"This spell bestows hope and vitality. Choose any number of creatures within range. For the duration, each target has advantage on Wisdom saving throws and death saving throws, and regains the maximum number of hit points possible from any healing.", source:"PHB 217" },
  { id:"bestow-curse", name:"Bestow Curse", level:3, school:"Necromancy", range:"Touch", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Cleric","Wizard"], description:"You touch a creature, and that creature must succeed on a Wisdom saving throw or become cursed for the duration of the spell. When you cast this spell, choose the nature of the curse from the following options: disadvantage on ability checks and saving throws of one ability score; disadvantage on attack rolls against you; must make Wisdom saving throw each turn or waste action; extra necrotic damage on attacks.", source:"PHB 218" },
  { id:"blink", name:"Blink", level:3, school:"Transmutation", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"Roll a d20 at the end of each of your turns for the duration of the spell. On a roll of 11 or higher, you vanish from your current plane of existence and appear in the Ethereal Plane. At the start of your next turn, and when the spell ends if you are on the Ethereal Plane, you return to an unoccupied space of your choice.", source:"PHB 219" },
  { id:"call-lightning", name:"Call Lightning", level:3, school:"Conjuration", range:"120 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid"], description:"A storm cloud appears in the shape of a cylinder that is 10 feet tall with a 60-foot radius, centered on a point you can see above you. The spell fails if you can't see a point in the air where the storm cloud could appear. When you cast the spell, choose a point you can see under the cloud. A bolt of lightning flashes down from the cloud to that point. Each creature within 5 feet of that point must make a Dexterity saving throw, taking 3d10 lightning damage on a failed save.", source:"PHB 220" },
  { id:"clairvoyance", name:"Clairvoyance", level:3, school:"Divination", range:"1 mile", duration:"10 minutes", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Cleric","Sorcerer","Wizard"], description:"You create an invisible sensor within range in a location familiar to you (a place you have visited or seen before) or in an obvious location that is unfamiliar to you (such as behind a door, around a corner, or in a grove of trees). The sensor remains in place for the duration, and it can't be attacked or otherwise interacted with.", source:"PHB 222" },
  { id:"conjure-animals", name:"Conjure Animals", level:3, school:"Conjuration", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Ranger"], description:"You summon fey spirits that take the form of beasts and appear in unoccupied spaces that you can see within range. Choose one of the following options for what appears: one beast of challenge rating 2 or lower; two beasts of challenge rating 1 or lower; four beasts of challenge rating 1/2 or lower; eight beasts of challenge rating 1/4 or lower.", source:"PHB 225" },
  { id:"counterspell", name:"Counterspell", level:3, school:"Abjuration", range:"60 ft", duration:"Instantaneous", casting_time:"1 reaction", components:["S"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You attempt to interrupt a creature in the process of casting a spell. If the creature is casting a spell of 3rd level or lower, its spell fails and has no effect. If it is casting a spell of 4th level or higher, make an ability check using your spellcasting ability. The DC equals 10 + the spell's level. On a success, the creature's spell fails and has no effect.", source:"PHB 228" },
  { id:"create-food-and-water", name:"Create Food and Water", level:3, school:"Conjuration", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Paladin"], description:"You create 45 pounds of food and 30 gallons of water on the ground or in containers within range, enough to sustain up to fifteen humanoids or five steeds for 24 hours. The food is bland but nourishing, and spoils if uneaten after 24 hours. The water is clean and doesn't go bad.", source:"PHB 229" },
  { id:"daylight", name:"Daylight", level:3, school:"Evocation", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Druid","Paladin","Ranger","Sorcerer"], description:"A 60-foot-radius sphere of light spreads out from a point you choose within range. The sphere is bright light and sheds dim light for an additional 60 feet. If you chose a point on an object you are holding or one that isn't being worn or carried, the light shines from the object and moves with it.", source:"PHB 230" },
  { id:"dispel-magic", name:"Dispel Magic", level:3, school:"Abjuration", range:"120 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid","Paladin","Sorcerer","Warlock","Wizard"], description:"Choose any creature, object, or magical effect within range. Any spell of 3rd level or lower on the target ends. For each spell of 4th level or higher on the target, make an ability check using your spellcasting ability. The DC equals 10 + the spell's level. On a successful check, the spell ends.", source:"PHB 234" },
  { id:"elemental-weapon", name:"Elemental Weapon", level:3, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Paladin"], description:"A nonmagical weapon you touch becomes a magic weapon. Choose one of the following damage types: acid, cold, fire, lightning, or thunder. For the duration, the weapon has a +1 bonus to attack rolls and deals an extra 1d4 damage of the chosen type on a hit.", source:"PHB 237" },
  { id:"fear", name:"Fear", level:3, school:"Illusion", range:"Self (30-foot cone)", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You project a phantasmal image of a creature's worst fears. Each creature in a 30-foot cone must succeed on a Wisdom saving throw or drop whatever it is holding and become frightened for the duration. While frightened by this spell, a creature must take the Dash action and move away from you by the safest available route on each of its turns.", source:"PHB 239" },
  { id:"fireball", name:"Fireball", level:3, school:"Evocation", range:"150 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A bright streak flashes from your pointing finger to a point you choose within range and then blossoms with a low roar into an explosion of flame. Each creature in a 20-foot-radius sphere centered on that point must make a Dexterity saving throw. A target takes 8d6 fire damage on a failed save, or half as much damage on a successful one.", source:"PHB 241", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d6 for each slot level above 3rd." },
  { id:"fly", name:"Fly", level:3, school:"Transmutation", range:"Touch", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"You touch a willing creature. The target gains a flying speed of 60 feet for the duration. When the spell ends, the target falls if it is still aloft, unless it can stop the fall.", source:"PHB 243", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, you can target one additional creature for each slot level above 3rd." },
  { id:"gaseous-form", name:"Gaseous Form", level:3, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"You transform a willing creature you touch, along with everything it's wearing and carrying, into a misty cloud for the duration. The spell ends if the creature drops to 0 hit points. An incorporeal creature isn't affected.", source:"PHB 244" },
  { id:"haste", name:"Haste", level:3, school:"Transmutation", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"Choose a willing creature that you can see within range. Until the spell ends, the target's speed is doubled, it gains a +2 bonus to AC, it has advantage on Dexterity saving throws, and it gains an additional action on each of its turns. That action can be used only to take the Attack (one weapon attack only), Dash, Disengage, Hide, or Use an Object action.", source:"PHB 250" },
  { id:"hypnotic-pattern", name:"Hypnotic Pattern", level:3, school:"Illusion", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You create a twisting pattern of colors that weaves through the air inside a 30-foot cube within range. The pattern appears for a moment and vanishes. Each creature in the area who sees the pattern must make a Wisdom saving throw. On a failed save, the creature becomes charmed for the duration.", source:"PHB 252" },
  { id:"lightning-bolt", name:"Lightning Bolt", level:3, school:"Evocation", range:"Self (100-foot line)", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A stroke of lightning forming a line 100 feet long and 5 feet wide blasts out from you in a direction you choose. Each creature in the line must make a Dexterity saving throw. A creature takes 8d6 lightning damage on a failed save, or half as much damage on a successful one.", source:"PHB 255", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d6 for each slot level above 3rd." },
  { id:"magic-circle", name:"Magic Circle", level:3, school:"Abjuration", range:"10 ft", duration:"1 hour", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Paladin","Warlock","Wizard"], description:"You create a 10-foot-radius, 20-foot-tall cylinder of magical energy centered on a point on the ground that you can see within range. Glowing runes appear wherever the cylinder intersects with the floor or another surface. Choose one or more of the following types of creatures: celestials, elementals, fey, fiends, or undead.", source:"PHB 256" },
  { id:"major-image", name:"Major Image", level:3, school:"Illusion", range:"120 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You create the image of an object, a creature, or some other visible phenomenon that is no larger than a 20-foot cube. The image appears at a spot that you can see within range and lasts for the duration. It seems completely real, including sounds, smells, and temperature appropriate to the thing depicted.", source:"PHB 258" },
  { id:"mass-healing-word", name:"Mass Healing Word", level:3, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:false, classes:["Cleric"], description:"As you call out words of restoration, up to six creatures of your choice that you can see within range regain hit points equal to 1d4 + your spellcasting ability modifier. This spell has no effect on undead or constructs.", source:"PHB 258" },
  { id:"meld-into-stone", name:"Meld into Stone", level:3, school:"Transmutation", range:"Touch", duration:"8 hours", casting_time:"1 action", components:["V","S"], ritual:true, concentration:false, classes:["Cleric","Druid"], description:"You step into a stone object or surface large enough to fully contain your body, melding yourself and all the equipment you carry with the stone for the duration. Using your movement, you step into the stone at a point you can touch. Nothing of your presence remains visible or otherwise detectable by nonmagical senses.", source:"PHB 259" },
  { id:"nondetection", name:"Nondetection", level:3, school:"Abjuration", range:"Touch", duration:"8 hours", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Ranger","Wizard"], description:"For the duration, you hide a target that you touch from divination magic. The target can be a willing creature or a place or an object no larger than 10 feet in any dimension. The target can't be targeted by any divination magic or perceived through magical scrying sensors.", source:"PHB 263" },
  { id:"plant-growth", name:"Plant Growth", level:3, school:"Transmutation", range:"150 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Druid","Ranger"], description:"This spell channels vitality into plants within a specific area. There are two possible uses for the spell, granting either immediate or long-term benefits. If you cast this spell using 1 action, choose a point within range. All normal plants in a 100-foot radius centered on that point become thick and overgrown.", source:"PHB 266" },
  { id:"protection-from-energy", name:"Protection from Energy", level:3, school:"Abjuration", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Cleric","Druid","Ranger","Sorcerer","Wizard"], description:"For the duration, the willing creature you touch has resistance to one damage type of your choice: acid, cold, fire, lightning, or thunder.", source:"PHB 270" },
  { id:"remove-curse", name:"Remove Curse", level:3, school:"Abjuration", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Paladin","Warlock","Wizard"], description:"At your touch, all curses affecting one creature or object end. If the object is a cursed magic item, its curse remains, but the spell breaks its owner's attunement to the object so it can be removed or discarded.", source:"PHB 271" },
  { id:"revivify", name:"Revivify", level:3, school:"Conjuration", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Druid","Paladin"], description:"You touch a creature that has died within the last minute. That creature returns to life with 1 hit point. This spell can't return to life a creature that has died of old age, nor can it restore any missing body parts.", source:"PHB 272" },
  { id:"sending", name:"Sending", level:3, school:"Evocation", range:"Unlimited", duration:"1 round", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Wizard"], description:"You send a short message of twenty-five words or less to a creature with which you are familiar. The creature hears the message in its mind, recognizes you as the sender if it knows you, and can answer in a like manner immediately. The spell enables creatures with Intelligence scores of at least 1 to understand the meaning of your message.", source:"PHB 274" },
  { id:"slow", name:"Slow", level:3, school:"Transmutation", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"You alter time around up to six creatures of your choice in a 40-foot cube within range. Each target must succeed on a Wisdom saving throw or be affected by this spell for the duration. An affected target's speed is halved, it takes a -2 penalty to AC and Dexterity saving throws, and it can't use reactions.", source:"PHB 277" },
  { id:"speak-with-dead", name:"Speak with Dead", level:3, school:"Necromancy", range:"10 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric"], description:"You grant the semblance of life and intelligence to a corpse of your choice within range, allowing it to answer the questions you pose. The corpse must still have a mouth and can't be undead. The spell fails if the corpse was the target of this spell within the last 10 days.", source:"PHB 277" },
  { id:"spirit-guardians", name:"Spirit Guardians", level:3, school:"Conjuration", range:"Self (15-foot radius)", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric"], description:"You call forth spirits to protect you. They flit around you to a distance of 15 feet for the duration. If you are good or neutral, their spectral form appears angelic or fey (your choice). If you are evil, they appear fiendish. When you cast this spell, you can designate any number of creatures you can see to be unaffected by it.", source:"PHB 278" },
  { id:"stinking-cloud", name:"Stinking Cloud", level:3, school:"Conjuration", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"You create a 20-foot-radius sphere of yellow, nauseating gas centered on a point within range. The cloud spreads around corners, and its area is heavily obscured. The cloud lingers in the air for the duration. Each creature that is completely within the cloud at the start of its turn must make a Constitution saving throw against poison.", source:"PHB 278" },
  { id:"thunder-step", name:"Thunder Step", level:3, school:"Conjuration", range:"90 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You teleport yourself to an unoccupied space you can see within range. Immediately after you disappear, a thunderous boom sounds, and each creature within 10 feet of the space you left must make a Constitution saving throw, taking 3d10 thunder damage on a failed save, or half as much damage on a successful one.", source:"XGE 168" },
  { id:"tidal-wave", name:"Tidal Wave", level:3, school:"Conjuration", range:"120 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Wizard"], description:"You conjure up a wave of water that crashes down on an area within range. The area can be up to 30 feet long, up to 10 feet wide, and up to 10 feet tall. Each creature in that area must make a Dexterity saving throw. On a failed save, a creature takes 4d8 bludgeoning damage and is knocked prone. On a successful save, a creature takes half as much damage and isn't knocked prone.", source:"XGE 168" },
  { id:"tongues", name:"Tongues", level:3, school:"Divination", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Sorcerer","Warlock","Wizard"], description:"This spell grants the creature you touch the ability to understand any spoken language it hears. Moreover, when the target speaks, any creature that knows at least one language and can hear the target understands what it says.", source:"PHB 283" },
  { id:"vampiric-touch", name:"Vampiric Touch", level:3, school:"Necromancy", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"The touch of your shadow-wreathed hand can siphon life force from others to heal your wounds. Make a melee spell attack against a creature within your reach. On a hit, the target takes 3d6 necrotic damage, and you regain hit points equal to half the amount of necrotic damage dealt.", source:"PHB 285" },
  { id:"water-breathing", name:"Water Breathing", level:3, school:"Transmutation", range:"30 ft", duration:"24 hours", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Druid","Ranger","Sorcerer","Wizard"], description:"This spell grants up to ten willing creatures you can see within range the ability to breathe underwater until the spell ends. Affected creatures also retain their normal mode of respiration.", source:"PHB 287" },
  { id:"water-walk", name:"Water Walk", level:3, school:"Transmutation", range:"30 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Cleric","Druid","Ranger","Sorcerer"], description:"This spell grants the ability to move across any liquid surface—such as water, acid, mud, snow, quicksand, or lava—as if it were harmless solid ground (creatures crossing molten lava can still take damage from the heat). Up to ten willing creatures you can see within range gain this ability for the duration. If you target a creature submerged in a liquid, the spell carries the target to the surface of the liquid at a rate of 60 feet per round.", source:"PHB 287", flavor_text:"The liquid surface beneath your feet ripples but holds firm" },
  { id:"wind-wall", name:"Wind Wall", level:3, school:"Evocation", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Ranger"], description:"A wall of strong wind rises from the ground at a point you choose within range. You can make the wall up to 50 feet long, 15 feet high, and 1 foot thick. You can shape the wall in any way you choose so long as it makes one continuous path along the ground.", source:"PHB 288" },

  // LEVEL 4
  { id:"arcane-eye", name:"Arcane Eye", level:4, school:"Divination", range:"30 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"You create an invisible, magical eye within range that hovers in the air for the duration. You mentally receive visual information from the eye, which has normal vision and darkvision out to 30 feet. The eye can look in every direction.", source:"PHB 214" },
  { id:"aura-of-life", name:"Aura of Life", level:4, school:"Abjuration", range:"Self (30-foot radius)", duration:"10 minutes", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Paladin"], description:"Life-preserving energy radiates from you in an aura with a 30-foot radius. Until the spell ends, the aura moves with you, centered on you. Each nonhostile creature in the aura (including you) has resistance to necrotic damage, and its hit point maximum can't be reduced. In addition, a nonhostile, living creature regains 1 hit point when it starts its turn in the aura with 0 hit points.", source:"PHB 216" },
  { id:"aura-of-purity", name:"Aura of Purity", level:4, school:"Abjuration", range:"Self (30-foot radius)", duration:"10 minutes", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Paladin"], description:"Purifying energy radiates from you in an aura with a 30-foot radius. Until the spell ends, the aura moves with you, centered on you. Each nonhostile creature in the aura (including you) can't become diseased, has resistance to poison damage, and has advantage on saving throws against effects that cause any of the following conditions: blinded, charmed, deafened, frightened, paralyzed, poisoned, and stunned.", source:"PHB 216" },
  { id:"banishment", name:"Banishment", level:4, school:"Abjuration", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Paladin","Sorcerer","Warlock","Wizard"], description:"You attempt to send one creature that you can see within range to another place of existence. The target must succeed on a Charisma saving throw or be banished. If the target is native to the plane of existence you're on, you banish the target to a harmless demiplane.", source:"PHB 217" },
  { id:"blight", name:"Blight", level:4, school:"Necromancy", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"Necromantic energy washes over a creature of your choice that you can see within range, draining moisture and vitality from it. The target must make a Constitution saving throw. The target takes 8d8 necrotic damage on a failed save, or half as much damage on a successful one.", source:"PHB 219" },
  { id:"compulsion", name:"Compulsion", level:4, school:"Enchantment", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard"], description:"Creatures of your choice that you can see within range and that can hear you must make a Wisdom saving throw. A target automatically succeeds on this saving throw if it can't be charmed. On a failed save, a target is affected by this spell. Until the spell ends, you can use a bonus action on each of your turns to designate a direction that is horizontal to you.", source:"PHB 224" },
  { id:"confusion", name:"Confusion", level:4, school:"Enchantment", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Druid","Sorcerer","Wizard"], description:"This spell assaults and twists creatures' minds, spawning delusions and provoking uncontrolled action. Each creature in a 10-foot-radius sphere centered on a point you choose within range must succeed on a Wisdom saving throw when you cast this spell or be affected by it.", source:"PHB 224" },
  { id:"death-ward", name:"Death Ward", level:4, school:"Abjuration", range:"Touch", duration:"8 hours", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Paladin"], description:"You touch a creature and grant it a measure of protection from death. The first time the target would drop to 0 hit points as a result of taking damage, the target instead drops to 1 hit point, and the spell ends. If the spell is still in effect when the target is subjected to an effect that would kill it instantaneously without dealing damage, that effect is instead negated against the target, and the spell ends.", source:"PHB 230" },
  { id:"dimension-door", name:"Dimension Door", level:4, school:"Conjuration", range:"500 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You teleport yourself from your current location to any other spot within range. You arrive at exactly the spot desired. It can be a place you can see, one you can visualize, or one you can describe by stating distance and direction, such as '200 feet straight downward' or 'upward to the northwest at a 45-degree angle, 300 feet'.", source:"PHB 233" },
  { id:"divination", name:"Divination", level:4, school:"Divination", range:"Self", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Cleric"], description:"Your magic and an offering put you in contact with a god or a god's servants. You ask a single question concerning a specific goal, event, or activity to occur within 7 days. The DM offers a truthful reply. The reply might be a short phrase, a cryptic rhyme, or an omen.", source:"PHB 234" },
  { id:"dominate-beast", name:"Dominate Beast", level:4, school:"Enchantment", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Sorcerer"], description:"You attempt to beguile a beast that you can see within range. It must succeed on a Wisdom saving throw or be charmed by you for the duration. If you or creatures that are friendly to you are fighting it, it has advantage on the saving throw.", source:"PHB 234" },
  { id:"elemental-bane", name:"Elemental Bane", level:4, school:"Transmutation", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Warlock","Wizard"], description:"Choose one creature you can see within range, and choose one of the following damage types: acid, cold, fire, lightning, or thunder. The target must succeed on a Constitution saving throw or be affected by the spell for its duration. The first time each turn the affected target takes damage of the chosen type, the target takes an extra 2d6 damage of that type.", source:"XGE 155" },
  { id:"evard-s-black-tentacles", name:"Evard's Black Tentacles", level:4, school:"Conjuration", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"Squirming, ebony tentacles fill a 20-foot square on ground that you can see within range. For the duration, these tentacles turn the ground in the area into difficult terrain. When a creature enters the affected area for the first time on a turn or starts its turn there, the creature must succeed on a Dexterity saving throw or take 3d6 bludgeoning damage and be restrained by the tentacles until the spell ends.", source:"PHB 238" },
  { id:"fabricate", name:"Fabricate", level:4, school:"Transmutation", range:"120 ft", duration:"Instantaneous", casting_time:"10 minutes", components:["V","S"], ritual:false, concentration:false, classes:["Wizard"], description:"You convert raw materials into products of the same material. For example, you can fabricate a wooden bridge from a clump of trees, a rope from a patch of hemp, and clothes from flax or wool. Choose raw materials that you can see within range. You can fabricate a Large or smaller object (contained within a 10-foot cube, or eight connected 5-foot cubes), given a sufficient quantity of raw material.", source:"PHB 239" },
  { id:"fire-shield", name:"Fire Shield", level:4, school:"Evocation", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"Thin and wispy flames wreathe your body for the duration, shedding bright light in a 10-foot radius and dim light for an additional 10 feet. The flames provide you with a warm shield or a chill shield, as you choose. The warm shield grants you resistance to cold damage, and the chill shield grants you resistance to fire damage.", source:"PHB 242" },
  { id:"freedom-of-movement", name:"Freedom of Movement", level:4, school:"Abjuration", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid","Ranger"], description:"You touch a willing creature. For the duration, the target's movement is unaffected by difficult terrain, and spells and other magical effects can neither reduce the target's speed nor cause the target to be paralyzed or restrained.", source:"PHB 244" },
  { id:"giant-insect", name:"Giant Insect", level:4, school:"Transmutation", range:"30 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid"], description:"You transform up to ten centipedes, three wasps, five flies, or one scorpion within range into giant versions of their natural forms for the duration. A centipede becomes a giant centipede, a wasp becomes a giant wasp, a fly becomes a giant fly, and a scorpion becomes a giant scorpion.", source:"PHB 245" },
  { id:"greater-invisibility", name:"Greater Invisibility", level:4, school:"Illusion", range:"Touch", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"You or a creature you touch becomes invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person.", source:"PHB 246" },
  { id:"guardian-of-faith", name:"Guardian of Faith", level:4, school:"Conjuration", range:"30 ft", duration:"8 hours", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Cleric"], description:"A Large spectral guardian appears and hovers for the duration in an unoccupied space of your choice that you can see within range. The guardian occupies that space and is indistinct except for a gleaming sword and shield emblazoned with the symbol of your deity.", source:"PHB 246" },
  { id:"hallucinatory-terrain", name:"Hallucinatory Terrain", level:4, school:"Illusion", range:"300 ft", duration:"24 hours", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Druid","Warlock","Wizard"], description:"You make natural terrain in a 150-foot cube in range look, sound, and smell like some other sort of natural terrain. Thus, open fields or a road can be made to resemble a swamp, hill, crevasse, or some other difficult or impassable terrain.", source:"PHB 249" },
  { id:"ice-storm", name:"Ice Storm", level:4, school:"Evocation", range:"300 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Wizard"], description:"A hail of rock-hard ice pounds to the ground in a 20-foot-radius, 40-foot-high cylinder centered on a point within range. Each creature in the cylinder must make a Dexterity saving throw. A creature takes 2d8 bludgeoning damage and 4d6 cold damage on a failed save, or half as much damage on a successful one.", source:"PHB 252" },
  { id:"locate-creature", name:"Locate Creature", level:4, school:"Divination", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Cleric","Druid","Paladin","Ranger","Wizard"], description:"Describe or name a creature that is familiar to you. You sense the direction to the creature's location, as long as that creature is within 1,000 feet of you. If the creature is moving, you know the direction of its movement.", source:"PHB 256" },
  { id:"phantasmal-killer", name:"Phantasmal Killer", level:4, school:"Illusion", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Wizard"], description:"You tap into the nightmares of a creature you can see within range and create an illusory manifestation of its deepest fears, visible only to that creature. The target must make a Wisdom saving throw. On a failed save, the target becomes frightened for the duration.", source:"PHB 265" },
  { id:"polymorph", name:"Polymorph", level:4, school:"Transmutation", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Druid","Sorcerer","Wizard"], description:"This spell transforms a creature that you can see within range into a new form. An unwilling creature must make a Wisdom saving throw to avoid the effect. The spell has no effect on a shapechanger or a creature with 0 hit points. The transformation lasts for the duration, or until the target drops to 0 hit points or dies.", source:"PHB 266" },
  { id:"stone-shape", name:"Stone Shape", level:4, school:"Transmutation", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Druid","Wizard"], description:"You touch a stone object of Medium size or smaller or a section of stone no more than 5 feet in any dimension and form it into any shape that suits your purpose. So, for example, you could shape a large rock into a weapon, idol, or coffer, or make a small passage through a wall, as long as the wall is less than 5 feet thick.", source:"PHB 278" },
  { id:"stoneskin", name:"Stoneskin", level:4, school:"Abjuration", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Ranger","Sorcerer","Wizard"], description:"This spell turns the flesh of a willing creature you touch as hard as stone. Until the spell ends, the target has resistance to nonmagical bludgeoning, piercing, and slashing damage.", source:"PHB 278" },
  { id:"wall-of-fire", name:"Wall of Fire", level:4, school:"Evocation", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"You create a wall of fire on a solid surface within range. The wall can be up to 60 feet long, 20 feet high, and 1 foot thick, or a ringed wall up to 20 feet in diameter, 20 feet high, and 1 foot thick. The wall is opaque and lasts for the duration.", source:"PHB 285" },

  // LEVEL 5
  { id:"animate-objects", name:"Animate Objects", level:5, school:"Transmutation", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"Objects come to life at your command. Choose up to ten nonmagical objects within range that are not being worn or carried. Medium targets count as two objects, Large targets count as four objects, Huge targets count as eight objects. You can't animate any object larger than Huge. Each target animates and becomes a creature under your control until the spell ends or until reduced to 0 hit points.", source:"PHB 213" },
  { id:"antilife-shell", name:"Antilife Shell", level:5, school:"Abjuration", range:"Self (10-foot radius)", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid"], description:"A shimmering barrier extends out from you in a 10-foot radius and moves with you, remaining centered on you and hedging out creatures other than undead and constructs. The barrier lasts for the duration.", source:"PHB 213" },
  { id:"arcane-hand", name:"Arcane Hand", level:5, school:"Evocation", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"You create a Large hand of shimmering, translucent force in an unoccupied space that you can see within range. The hand lasts for the spell's duration, and it moves at your command, mimicking the movements of your own hand. The hand is an object that has AC 20 and hit points equal to your hit point maximum.", source:"PHB 218" },
  { id:"awaken", name:"Awaken", level:5, school:"Transmutation", range:"Touch", duration:"Instantaneous", casting_time:"8 hours", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Druid"], description:"After spending the casting time tracing magical pathways within a precious gemstone, you touch a Huge or smaller beast or plant. The target must have either no Intelligence score or an Intelligence of 3 or less. The target gains an Intelligence of 10. The target also gains the ability to speak one language you know.", source:"PHB 216" },
  { id:"banishing-smite", name:"Banishing Smite", level:5, school:"Abjuration", range:"Self", duration:"1 minute", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:true, classes:["Paladin"], description:"The next time you hit a creature with a weapon attack before this spell ends, your weapon crackles with force, and the attack deals an extra 5d10 force damage to the target. Additionally, if this attack reduces the target to 50 hit points or fewer, you banish it.", source:"PHB 216" },
  { id:"bigby-s-hand", name:"Bigby's Hand", level:5, school:"Evocation", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"You create a Large hand of shimmering, translucent force in an unoccupied space that you can see within range. The hand lasts for the spell's duration, and it moves at your command, mimicking the movements of your own hand.", source:"PHB 218" },
  { id:"circle-of-power", name:"Circle of Power", level:5, school:"Abjuration", range:"Self (30-foot radius)", duration:"10 minutes", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Paladin"], description:"Divine energy radiates from you, distorting and diffusing magical energy within 30 feet of you. Until the spell ends, the sphere moves with you, centered on you. For the duration, each friendly creature in the area (including you) has advantage on saving throws against spells and other magical effects.", source:"PHB 221" },
  { id:"cloudkill", name:"Cloudkill", level:5, school:"Conjuration", range:"120 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"You create a 20-foot-radius sphere of poisonous, yellow-green fog centered on a point you choose within range. The fog spreads around corners. It lasts for the duration or until strong wind disperses the fog, ending the spell. Its area is heavily obscured. When a creature enters the spell's area for the first time on a turn or starts its turn there, that creature must make a Constitution saving throw.", source:"PHB 222" },
  { id:"commune", name:"Commune", level:5, school:"Divination", range:"Self", duration:"1 minute", casting_time:"1 minute", components:["V","S","M"], ritual:true, concentration:false, classes:["Cleric"], description:"You contact your deity or a divine proxy and ask up to three questions that can be answered with a yes or no. You must ask your questions before the spell ends. You receive a correct answer for each question.", source:"PHB 223" },
  { id:"commune-with-nature", name:"Commune with Nature", level:5, school:"Divination", range:"Self", duration:"Instantaneous", casting_time:"1 minute", components:["V","S"], ritual:true, concentration:false, classes:["Druid","Ranger"], description:"You briefly become one with nature and gain knowledge of the surrounding territory. In the outdoors, the spell gives you knowledge of the land within 3 miles of you. In caves and other natural underground settings, the radius is limited to 300 feet.", source:"PHB 224" },
  { id:"cone-of-cold", name:"Cone of Cold", level:5, school:"Evocation", range:"Self (60-foot cone)", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A blast of cold air erupts from your hands. Each creature in a 60-foot cone must make a Constitution saving throw. A creature takes 8d8 cold damage on a failed save, or half as much damage on a successful one. A creature killed by this spell becomes a frozen statue until it thaws.", source:"PHB 224" },
  { id:"conjure-elemental", name:"Conjure Elemental", level:5, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Wizard"], description:"You call forth an elemental servant. Choose an area of air, earth, fire, or water that fills a 10-foot cube within range. An elemental of challenge rating 5 or lower appropriate to the area you chose appears in an unoccupied space within 10 feet of it.", source:"PHB 225" },
  { id:"contact-other-plane", name:"Contact Other Plane", level:5, school:"Divination", range:"Self", duration:"1 minute", casting_time:"1 minute", components:["V"], ritual:true, concentration:false, classes:["Warlock","Wizard"], description:"You mentally contact a demigod, the spirit of a long-dead sage, or some other mysterious entity from another plane. Contacting this extraplanar intelligence can strain or even break your mind. When you cast this spell, make a DC 15 Intelligence saving throw.", source:"PHB 226" },
  { id:"contagion", name:"Contagion", level:5, school:"Necromancy", range:"Touch", duration:"7 days", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Druid"], description:"Your touch inflicts disease. Make a melee spell attack against a creature within your reach. On a hit, the target is poisoned. At the end of each of the poisoned target's turns, the target must make a Constitution saving throw. If the target succeeds on three of these saves, it is no longer poisoned, and the spell ends.", source:"PHB 227" },
  { id:"control-winds", name:"Control Winds", level:5, school:"Transmutation", range:"300 ft", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"You take control of the air in a 100-foot cube that you can see within range. Choose one of the following effects when you cast the spell. The effect lasts for the spell's duration, unless you use your action on a later turn to switch to a different effect. You can also use your action to temporarily halt the effect or to restart one you've halted.", source:"XGE 152" },
  { id:"creation", name:"Creation", level:5, school:"Illusion", range:"30 ft", duration:"Special", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You pull wisps of shadow material from the Shadowfell to create a nonliving object of vegetable matter within range: soft goods, rope, wood, or something similar. You can also use this spell to create mineral objects such as stone, crystal, or metal. The object created must be no larger than a 5-foot cube, and the object must be of a form and material that you have seen before.", source:"PHB 229" },
  { id:"dawn", name:"Dawn", level:5, school:"Evocation", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Wizard"], description:"The light of dawn shines down on a location you specify within range. Until the spell ends, a 30-foot-radius, 40-foot-high cylinder of bright light glimmers there. This light is sunlight. When the cylinder appears, each creature in it must make a Constitution saving throw, taking 4d10 radiant damage on a failed save, or half as much damage on a successful one.", source:"XGE 153" },
  { id:"destructive-wave", name:"Destructive Wave", level:5, school:"Evocation", range:"Self (30-foot radius)", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Paladin"], description:"You strike the ground, creating a burst of divine energy that ripples outward from you. Each creature you choose within 30 feet of you must succeed on a Constitution saving throw or take 5d6 thunder damage, as well as 5d6 radiant or necrotic damage (your choice), and be knocked prone.", source:"PHB 231" },
  { id:"dispel-evil-and-good", name:"Dispel Evil and Good", level:5, school:"Abjuration", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Paladin"], description:"Shimmering energy surrounds and protects you from fey, undead, and creatures originating from beyond the Material Plane. For the duration, celestials, elementals, fey, fiends, and undead have disadvantage on attack rolls against you.", source:"PHB 233" },
  { id:"dominate-person", name:"Dominate Person", level:5, school:"Enchantment", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"You attempt to beguile a humanoid that you can see within range. It must succeed on a Wisdom saving throw or be charmed by you for the duration. If you or creatures that are friendly to you are fighting it, it has advantage on the saving throw.", source:"PHB 235" },
  { id:"flame-strike", name:"Flame Strike", level:5, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric"], description:"A vertical column of divine fire roars down from the heavens in a location you specify. Each creature in a 10-foot-radius, 40-foot-high cylinder centered on a point within range must make a Dexterity saving throw. A creature takes 4d6 fire damage and 4d6 radiant damage on a failed save, or half as much damage on a successful one.", source:"PHB 242" },
  { id:"geas", name:"Geas", level:5, school:"Enchantment", range:"60 ft", duration:"30 days", casting_time:"1 minute", components:["V"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid","Paladin","Wizard"], description:"You place a magical command on a creature that you can see within range, forcing it to carry out some service or refrain from some action or course of activity as you decide. If the creature can understand you, it must succeed on a Wisdom saving throw or become charmed by you for the duration.", source:"PHB 244" },
  { id:"greater-restoration", name:"Greater Restoration", level:5, school:"Abjuration", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid"], description:"You imbue a creature you touch with positive energy to undo a debilitating effect. You can reduce the target's exhaustion level by one, or end one of the following effects on the target: one effect that charmed or petrified the target, one curse including the target's attunement to a cursed magic item, any reduction to one of the target's ability scores, one effect reducing the target's hit point maximum.", source:"PHB 246" },
  { id:"hold-monster", name:"Hold Monster", level:5, school:"Enchantment", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"Choose a creature that you can see within range. The target must succeed on a Wisdom saving throw or be paralyzed for the duration. This spell has no effect on undead. At the end of each of its turns, the target can make another Wisdom saving throw. On a success, the spell ends on the target.", source:"PHB 251" },
  { id:"immolation", name:"Immolation", level:5, school:"Evocation", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"Flames wreathe one creature you can see within range. The target must make a Dexterity saving throw. It takes 8d6 fire damage on a failed save, or half as much damage on a successful one. On a failed save, the target also burns for the spell's duration. The burning target sheds bright light in a 30-foot radius and dim light for an additional 30 feet.", source:"XGE 158" },
  { id:"legend-lore", name:"Legend Lore", level:5, school:"Divination", range:"Self", duration:"Instantaneous", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Wizard"], description:"Name or describe a person, place, or object. The spell brings to your mind a brief summary of the significant lore about the thing you named. The lore might consist of current tales, forgotten stories, or even secret lore that has never been widely known.", source:"PHB 255" },
  { id:"mass-cure-wounds", name:"Mass Cure Wounds", level:5, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid"], description:"A wave of healing energy washes out from a point of your choice within range. Choose up to six creatures in a 30-foot-radius sphere centered on that point. Each target regains hit points equal to 3d8 + your spellcasting ability modifier. This spell has no effect on undead or constructs.", source:"PHB 258" },
  { id:"mislead", name:"Mislead", level:5, school:"Illusion", range:"Self", duration:"1 hour", casting_time:"1 action", components:["S"], ritual:false, concentration:true, classes:["Bard","Warlock","Wizard"], description:"You become invisible at the same time that an illusory double of you appears where you are standing. The double lasts for the duration, but the invisibility ends if you attack or cast a spell. You can use your action to move your illusory double up to twice your speed and make it gesture, speak, and behave in whatever way you choose.", source:"PHB 260" },
  { id:"modify-memory", name:"Modify Memory", level:5, school:"Enchantment", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Wizard"], description:"You attempt to reshape another creature's memories. One creature that you can see must make a Wisdom saving throw. If you are fighting the creature, it has advantage on the saving throw. On a failed save, the target becomes charmed by you for the duration.", source:"PHB 261" },
  { id:"passwall", name:"Passwall", level:5, school:"Transmutation", range:"30 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"A passage appears at a point of your choice that you can see on a wooden, plaster, or stone surface (such as a wall, a ceiling, or a floor) within range, and lasts for the duration. You choose the opening's dimensions: up to 5 feet wide, 8 feet tall, and 20 feet deep. The passage creates no instability in a structure surrounding it.", source:"PHB 264" },
  { id:"planar-binding", name:"Planar Binding", level:5, school:"Abjuration", range:"60 ft", duration:"24 hours", casting_time:"1 hour", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid","Wizard"], description:"With this spell, you attempt to bind a celestial, an elemental, a fey, or a fiend to your service. The creature must be within range for the entire casting of the spell. (Typically, the creature is first summoned into the center of an inverted magic circle in order to keep it trapped while this spell is cast.)", source:"PHB 265" },
  { id:"raise-dead", name:"Raise Dead", level:5, school:"Necromancy", range:"Touch", duration:"Instantaneous", casting_time:"1 hour", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Paladin"], description:"You return a dead creature you touch to life, provided that it has been dead no longer than 10 days. If the creature's soul is both willing and at liberty to rejoin the body, the creature returns to life with 1 hit point. This spell also neutralizes any poisons and cures nonmagical diseases that affected the creature at the time it died.", source:"PHB 270" },
  { id:"reincarnate", name:"Reincarnate", level:5, school:"Transmutation", range:"Touch", duration:"Instantaneous", casting_time:"1 hour", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid"], description:"You touch a dead humanoid or a piece of a dead humanoid. Provided that the creature has been dead no longer than 10 days, the spell forms a new adult body for it and then calls the soul to enter that body. If the target's soul isn't free or willing to do so, the spell fails.", source:"PHB 271" },
  { id:"scrying", name:"Scrying", level:5, school:"Divination", range:"Self", duration:"10 minutes", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Cleric","Druid","Warlock","Wizard"], description:"You can see and hear a particular creature you choose that is on the same plane of existence as you. The target must make a Wisdom saving throw, which is modified by how well you know the target and the sort of physical connection you have to it.", source:"PHB 273" },
  { id:"seeming", name:"Seeming", level:5, school:"Illusion", range:"30 ft", duration:"8 hours", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"This spell allows you to change the appearance of any number of creatures that you can see within range. You give each target you choose a new, illusory appearance. An unwilling target can make a Charisma saving throw, and if it succeeds, it is unaffected by this spell.", source:"PHB 274" },
  { id:"skill-empowerment", name:"Skill Empowerment", level:5, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"Your magic deepens a creature's understanding of its own talent. You touch one willing creature and give it expertise in one skill of your choice; the skill must already be one that the creature is proficient in and that isn't already benefiting from an effect, such as Expertise, that doubles its proficiency bonus.", source:"XGE 165" },
  { id:"swift-quiver", name:"Swift Quiver", level:5, school:"Transmutation", range:"Touch", duration:"1 minute", casting_time:"1 bonus action", components:["V","S","M"], ritual:false, concentration:true, classes:["Ranger"], description:"You transmute your quiver so it produces an endless supply of nonmagical ammunition, which seems to leap into your hand when you reach for it. On each of your turns until the spell ends, you can use a bonus action to make two attacks with a weapon that uses ammunition from the quiver.", source:"PHB 279" },
  { id:"telepathic-bond", name:"Telepathic Bond", level:5, school:"Divination", range:"30 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:true, concentration:false, classes:["Wizard"], description:"You forge a telepathic link among up to eight willing creatures of your choice within range, psychically linking each creature to all the others for the duration. Creatures with Intelligence scores of 2 or less aren't affected by this spell.", source:"PHB 281" },
  { id:"tree-stride", name:"Tree Stride", level:5, school:"Conjuration", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Ranger"], description:"You gain the ability to enter a tree and move from inside it to inside another tree of the same kind within 500 feet. Both trees must be living and at least the same size as you. You must use 5 feet of movement to enter a tree.", source:"PHB 283" },
  { id:"wall-of-force", name:"Wall of Force", level:5, school:"Evocation", range:"120 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"An invisible wall of force springs into existence at a point you choose within range. The wall appears in any orientation you choose, as a horizontal or vertical barrier or at an angle. It can be free floating or resting on a solid surface. You can form it into a hemispherical dome or a sphere with a radius of up to 10 feet, or you can shape a flat surface made up of ten 10-foot-by-10-foot panels.", source:"PHB 285" },
  { id:"wall-of-stone", name:"Wall of Stone", level:5, school:"Evocation", range:"120 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"A nonmagical wall of solid stone springs into existence at a point you choose within range. The wall is 6 inches thick and is composed of ten 10-foot-by-10-foot panels. Each panel must be contiguous with at least one other panel. Alternatively, you can create 10-foot-by-20-foot panels that are only 3 inches thick.", source:"PHB 287" },

  // LEVEL 6
  { id:"arcane-gate", name:"Arcane Gate", level:6, school:"Conjuration", range:"500 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"You create linked teleportation portals that remain open for the duration. Choose two points on the ground that you can see, one point within 10 feet of you and one point within 500 feet of you. A circular portal, 10 feet in diameter, opens over each point. Any creature or object entering one portal exits from the other portal as if the two were adjacent to each other.", source:"PHB 214" },
  { id:"blade-barrier", name:"Blade Barrier", level:6, school:"Evocation", range:"90 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Cleric"], description:"You create a vertical wall of whirling, razor-sharp blades made of magical energy. The wall appears within range and lasts for the duration. You can make a straight wall up to 100 feet long, 20 feet high, and 5 feet thick, or a ringed wall up to 60 feet in diameter, 20 feet high, and 5 feet thick. The wall provides three-quarters cover to creatures behind it, and its space is difficult terrain.", source:"PHB 218" },
  { id:"chain-lightning", name:"Chain Lightning", level:6, school:"Evocation", range:"150 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You create a bolt of lightning that arcs toward a target of your choice that you can see within range. Three bolts then leap from that target to as many as three other targets, each of which must be within 30 feet of the first target. A target can be a creature or an object and can be targeted by only one of the bolts.", source:"PHB 221" },
  { id:"circle-of-death", name:"Circle of Death", level:6, school:"Necromancy", range:"150 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"A sphere of negative energy ripples out in a 60-foot-radius sphere from a point within range. Each creature in that area must make a Constitution saving throw. A target takes 8d6 necrotic damage on a failed save, or half as much damage on a successful one.", source:"PHB 221" },
  { id:"contingency", name:"Contingency", level:6, school:"Evocation", range:"Self", duration:"10 days", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"Choose a spell of 5th level or lower that you can cast, that has a casting time of 1 action, and that can target you. You cast that spell—called the contingent spell—as part of casting contingency, expending spell slots for both, but the contingent spell doesn't come into effect.", source:"PHB 227" },
  { id:"create-undead", name:"Create Undead", level:6, school:"Necromancy", range:"10 ft", duration:"Instantaneous", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Warlock","Wizard"], description:"You can cast this spell only at night. Choose up to three corpses of Medium or Small humanoids within range. Each corpse becomes a ghoul under your control. (The DM has game statistics for these creatures.)", source:"PHB 229" },
  { id:"disintegrate", name:"Disintegrate", level:6, school:"Transmutation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A thin green ray springs from your pointing finger to a target that you can see within range. The target can be a creature, an object, or a creation of magical force, such as the wall created by wall of force. A creature targeted by this spell must make a Dexterity saving throw.", source:"PHB 233" },
  { id:"eyebite", name:"Eyebite", level:6, school:"Necromancy", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"For the spell's duration, your eyes become an inky void imbued with dread power. One creature of your choice within 60 feet of you that you can see must succeed on a Wisdom saving throw or be affected until the spell ends. You can use your action on each of your turns to target another creature but can't target a creature again if it has succeeded on a saving throw against this casting of eyebite.", source:"PHB 238" },
  { id:"find-the-path", name:"Find the Path", level:6, school:"Divination", range:"Self", duration:"1 day", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Cleric","Druid"], description:"This spell allows you to find the shortest, most direct physical route to a specific fixed location that you are familiar with on the same plane of existence. If you name a destination on another plane of existence, a destination that moves (such as a mobile fortress), or a destination that isn't specific (such as 'a green dragon's lair'), the spell fails.", source:"PHB 240" },
  { id:"flesh-to-stone", name:"Flesh to Stone", level:6, school:"Transmutation", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"You attempt to turn one creature that you can see within range into stone. If the target's body is made of flesh, the creature must make a Constitution saving throw. On a failed save, it is restrained as its flesh begins to harden. On a successful save, the creature isn't affected.", source:"PHB 243" },
  { id:"globe-of-invulnerability", name:"Globe of Invulnerability", level:6, school:"Abjuration", range:"Self (10-foot radius)", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"An immobile, faintly shimmering barrier springs into existence in a 10-foot radius around you and remains for the duration. Any spell of 5th level or lower cast from outside the barrier can't affect creatures or objects within it, even if the spell is cast using a higher level spell slot. Such a spell can target creatures and objects within the barrier, but the spell has no effect on them.", source:"PHB 245" },
  { id:"guards-and-wards", name:"Guards and Wards", level:6, school:"Abjuration", range:"Touch", duration:"24 hours", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Wizard"], description:"You create a ward that protects up to 2,500 square feet of floor space (an area 50 feet square, or one hundred 5-foot squares or twenty-five 10-foot squares). The warded area can be up to 20 feet tall, and shaped as you desire. You can ward several stories of a stronghold by dividing the area among them, as long as you can walk into each contiguous area while you are casting the spell.", source:"PHB 248" },
  { id:"harm", name:"Harm", level:6, school:"Necromancy", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric"], description:"You unleash a virulent disease on a creature that you can see within range. The target must make a Constitution saving throw. On a failed save, it takes 14d6 necrotic damage, or half as much damage on a successful save. The damage can't reduce the target's hit points below 1. If the target fails the saving throw, its hit point maximum is reduced for 1 hour by an amount equal to the necrotic damage it took.", source:"PHB 249" },
  { id:"heal", name:"Heal", level:6, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Druid"], description:"Choose a creature that you can see within range. A surge of positive energy washes through the creature, causing it to regain 70 hit points. This spell also ends blindness, deafness, and any diseases affecting the target. This spell has no effect on constructs or undead.", source:"PHB 249" },
  { id:"heroes-feast", name:"Heroes' Feast", level:6, school:"Conjuration", range:"30 ft", duration:"Instantaneous", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Druid"], description:"You bring forth a great feast, including magnificent food and drink. The feast takes 1 hour to consume and disappears at the end of that time, and the beneficial effects don't set in until this hour is over. Up to twelve other creatures can partake of the feast.", source:"PHB 250" },
  { id:"magic-jar", name:"Magic Jar", level:6, school:"Necromancy", range:"Self", duration:"Until dispelled", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"Your body falls into a catatonic state as your soul leaves it and enters the container you used for the spell's material component. While your soul inhabits the container, you are aware of your surroundings as if you were in the container's space. You can't move or use reactions. The only action you can take is to project your soul up to 100 feet out of the container, either returning to your living body (and ending the spell) or attempting to possess a humanoid's body.", source:"PHB 257" },
  { id:"mass-suggestion", name:"Mass Suggestion", level:6, school:"Enchantment", range:"60 ft", duration:"24 hours", casting_time:"1 action", components:["V","M"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You suggest a course of activity (limited to a sentence or two) and magically influence up to twelve creatures of your choice that you can see within range and that can hear and understand you. Creatures that can't be charmed are immune to this effect. The suggestion must be worded in such a manner as to make the course of action sound reasonable.", source:"PHB 258" },
  { id:"move-earth", name:"Move Earth", level:6, school:"Transmutation", range:"120 ft", duration:"2 hours", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"Choose an area of terrain no larger than 40 feet on a side within range. You can reshape dirt, sand, or clay in the area in any manner you choose for the duration. You can raise or lower the area's elevation, create or fill in a trench, erect or flatten a wall, or form a pillar.", source:"PHB 263" },
  { id:"otiluke-s-freezing-sphere", name:"Otiluke's Freezing Sphere", level:6, school:"Evocation", range:"300 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"A frigid globe of cold energy streaks from your fingertips to a point of your choice within range, where it explodes in a 60-foot-radius sphere. Each creature within the area must make a Constitution saving throw. On a failed save, a creature takes 10d6 cold damage. On a successful save, it takes half as much damage.", source:"PHB 263" },
  { id:"programmed-illusion", name:"Programmed Illusion", level:6, school:"Illusion", range:"120 ft", duration:"Until dispelled", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Wizard"], description:"You create an illusion of an object, a creature, or some other visible phenomenon within range that activates when a specific condition occurs. The illusion is imperceptible until then. It must be no larger than a 30-foot cube, and you decide when you cast the spell how the illusion behaves and what sounds it makes.", source:"PHB 269" },
  { id:"sunbeam", name:"Sunbeam", level:6, school:"Evocation", range:"Self (60-foot line)", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"A beam of brilliant light flashes out from your hand in a 5-foot-wide, 60-foot-long line. Each creature in the line must make a Constitution saving throw. On a failed save, a creature takes 6d8 radiant damage and is blinded until your next turn. On a successful save, it takes half as much damage and isn't blinded by this spell.", source:"PHB 279" },
  { id:"true-seeing", name:"True Seeing", level:6, school:"Divination", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Sorcerer","Warlock","Wizard"], description:"You give the willing creature you touch the ability to see things as they actually are. For the duration, the creature has truesight, notices secret doors hidden by magic, and can see into the Ethereal Plane, all out to a range of 120 feet.", source:"PHB 284" },
  { id:"wall-of-ice", name:"Wall of Ice", level:6, school:"Evocation", range:"120 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"You create a wall of ice on a solid surface within range. The wall is 1 foot thick and up to 30 feet long and 10 feet high, or it's a hemispherical dome up to 20 feet in diameter. The wall remains in place for the duration. If the wall cuts through a creature's space when it appears, the creature within its area is pushed to one side of the wall and must make a Dexterity saving throw.", source:"PHB 285" },
  { id:"wind-walk", name:"Wind Walk", level:6, school:"Transmutation", range:"30 ft", duration:"8 hours", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid"], description:"You and up to ten willing creatures you can see within range assume a gaseous form for the duration, appearing as wisps of cloud. While in this cloud form, a creature has a flying speed of 300 feet and has resistance to damage from nonmagical weapons. The only actions a creature can take in this form are the Dash action or to revert to its normal form.", source:"PHB 288" },
  { id:"word-of-recall", name:"Word of Recall", level:6, school:"Conjuration", range:"5 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Cleric"], description:"You and up to five willing creatures within 5 feet of you instantly teleport to a previously designated sanctuary. You and any creatures that teleport with you appear in the nearest unoccupied space to the spot you designated when you prepared your sanctuary (see below). If you cast this spell without first preparing a sanctuary, the spell has no effect.", source:"PHB 289" },

  // LEVEL 7
  { id:"conjure-celestial", name:"Conjure Celestial", level:7, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 minute", components:["V","S"], ritual:false, concentration:true, classes:["Cleric"], description:"You summon a celestial of challenge rating 4 or lower, which appears in an unoccupied space that you can see within range. The celestial disappears when it drops to 0 hit points or when the spell ends. The celestial is friendly to you and your companions for the duration.", source:"PHB 225" },
  { id:"delayed-blast-fireball", name:"Delayed Blast Fireball", level:7, school:"Evocation", range:"150 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"A beam of yellow light flashes from your pointing finger, then condenses to linger at a chosen point within range as a glowing bead for the duration. When the spell ends, either because your concentration is broken or because you decide to end it, the bead blossoms with a low roar into an explosion of flame that spreads around corners.", source:"PHB 230" },
  { id:"divine-word", name:"Divine Word", level:7, school:"Evocation", range:"30 ft", duration:"Instantaneous", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:false, classes:["Cleric"], description:"You utter a divine word, imbued with the power that shaped the world at the dawn of creation. Choose any number of creatures you can see within range. Each creature that can hear you must make a Charisma saving throw. On a failed save, a creature suffers an effect based on its current hit points.", source:"PHB 234" },
  { id:"etherealness", name:"Etherealness", level:7, school:"Transmutation", range:"Self", duration:"8 hours", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Cleric","Sorcerer","Warlock","Wizard"], description:"You step into the border regions of the Ethereal Plane, in the area where it overlaps with your current plane. You remain in the Border Ethereal for the duration or until you use your action to dismiss the spell. During this time, you can move in any direction. If you move up or down, every foot of movement costs an extra foot.", source:"PHB 238" },
  { id:"finger-of-death", name:"Finger of Death", level:7, school:"Necromancy", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You send negative energy coursing through a creature that you can see within range, causing it searing pain. The target must make a Constitution saving throw. It takes 7d8 + 30 necrotic damage on a failed save, or half as much damage on a successful one. A humanoid killed by this spell rises at the start of your next turn as a zombie that is permanently under your command.", source:"PHB 241" },
  { id:"fire-storm", name:"Fire Storm", level:7, school:"Evocation", range:"150 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric","Druid","Sorcerer"], description:"A storm made up of sheets of roaring flame appears in a location you choose within range. The area of the storm consists of up to ten 10-foot cubes, which you can arrange as you wish. Each cube must have at least one face adjacent to the face of another cube. Each creature in the area must make a Dexterity saving throw. It takes 7d10 fire damage on a failed save, or half as much damage on a successful one.", source:"PHB 242" },
  { id:"forcecage", name:"Forcecage", level:7, school:"Evocation", range:"100 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Warlock","Wizard"], description:"An immobile, invisible, cube-shaped prison composed of magical force springs into existence around an area you choose within range. The prison can be a cage or a solid box as you choose. A prison in the shape of a cage can be up to 20 feet on a side and is made from 1/2-inch diameter bars spaced 1/2 inch apart. A prison in the shape of a box can be up to 10 feet on a side, creating a solid barrier that prevents any matter from passing through it and blocking any spells cast into or out from the area.", source:"PHB 243" },
  { id:"magnificent-mansion", name:"Magnificent Mansion", level:7, school:"Conjuration", range:"300 ft", duration:"24 hours", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Wizard"], description:"You conjure an extradimensional dwelling in range that lasts for the duration. You choose where its one entrance is located. The entrance shimmers faintly and is 5 feet wide and 10 feet tall. You and any creature you designate when you cast the spell can enter the extradimensional dwelling as long as the portal remains open.", source:"PHB 261" },
  { id:"mirage-arcane", name:"Mirage Arcane", level:7, school:"Illusion", range:"Sight", duration:"10 days", casting_time:"10 minutes", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Druid","Wizard"], description:"You make terrain in an area up to 1 mile square look, sound, smell, and even feel like some other sort of terrain. The terrain's general shape remains the same, however. Open fields or a road could be made to resemble a swamp, hill, crevasse, or some other difficult or impassable terrain. A pond can be made to seem like a grassy meadow, a precipice like a gentle slope, or a rock-strewn gully like a wide and smooth road.", source:"PHB 260" },
  { id:"mordenkainen-s-magnificent-mansion", name:"Mordenkainen's Magnificent Mansion", level:7, school:"Conjuration", range:"300 ft", duration:"24 hours", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Wizard"], description:"You conjure an extradimensional dwelling in range that lasts for the duration. You choose where its one entrance is located. The entrance shimmers faintly and is 5 feet wide and 10 feet tall.", source:"PHB 261" },
  { id:"plane-shift", name:"Plane Shift", level:7, school:"Conjuration", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Druid","Sorcerer","Warlock","Wizard"], description:"You and up to eight willing creatures who link hands in a circle are transported to a different plane of existence. You can specify a target destination in general terms, such as the City of Brass on the Elemental Plane of Fire or the palace of Dispater on the second layer of the Nine Hells, and you appear in or near that destination.", source:"PHB 265" },
  { id:"power-word-pain", name:"Power Word Pain", level:7, school:"Enchantment", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You speak a word of power that causes waves of intense pain to assail one creature you can see within range. If the target has 100 hit points or fewer, it is subject to crippling pain. Otherwise, the spell has no effect on it. A target is also unaffected if it is immune to being charmed.", source:"XGE 163" },
  { id:"prismatic-spray", name:"Prismatic Spray", level:7, school:"Evocation", range:"Self (60-foot cone)", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"Eight rays of light flash from your hand. Each ray has a different color and power and strikes one random target in range. Roll a d8 for each creature and object in range. On a hit with a red ray, the target takes 10d6 fire damage on a failed save. Orange ray deals 10d6 acid damage. Yellow ray deals 10d6 lightning damage. Green ray deals 10d6 poison damage.", source:"PHB 267" },
  { id:"project-image", name:"Project Image", level:7, school:"Illusion", range:"500 miles", duration:"1 day", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Wizard"], description:"You create an illusory copy of yourself that lasts for the duration. The copy can appear at any location within range that you have seen before, regardless of intervening obstacles. The illusion looks and sounds like you but is intangible.", source:"PHB 270" },
  { id:"regenerate", name:"Regenerate", level:7, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Druid"], description:"You touch a creature and stimulate its natural healing ability. The target regains 4d8 + 15 hit points. For the duration of the spell, the target regains 1 hit point at the start of each of its turns (10 hit points each minute). The target's severed body members (fingers, legs, tails, and so on) are restored after 2 minutes.", source:"PHB 271" },
  { id:"resurrection", name:"Resurrection", level:7, school:"Necromancy", range:"Touch", duration:"Instantaneous", casting_time:"1 hour", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric"], description:"You touch a dead creature that has been dead for no more than a century, that didn't die of old age, and that isn't undead. If its soul is free and willing, the target returns to life with all its hit points. This spell neutralizes any poisons and cures normal diseases afflicting the creature when it died.", source:"PHB 272" },
  { id:"reverse-gravity", name:"Reverse Gravity", level:7, school:"Transmutation", range:"100 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"This spell reverses gravity in a 50-foot-radius, 100-foot high cylinder centered on a point within range. All creatures and objects that aren't somehow anchored to the ground in the area fall upward and reach the top of the area.", source:"PHB 272" },
  { id:"sequester", name:"Sequester", level:7, school:"Transmutation", range:"Touch", duration:"Until dispelled", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"By means of this spell, a willing creature or an object can be hidden away, safe from detection for the duration. When you cast the spell and touch the target, it becomes invisible and can't be targeted by divination spells or perceived through scrying sensors created by divination spells.", source:"PHB 274" },
  { id:"simulacrum", name:"Simulacrum", level:7, school:"Illusion", range:"Touch", duration:"Until dispelled", casting_time:"12 hours", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"You shape an illusory duplicate of one beast or humanoid that is within range for the entire casting time of the spell. The duplicate is a creature, partially real and formed from ice or snow, and it can take actions and otherwise be affected as a normal creature.", source:"PHB 276" },
  { id:"symbol", name:"Symbol", level:7, school:"Abjuration", range:"Touch", duration:"Until dispelled or triggered", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Cleric","Wizard"], description:"When you cast this spell, you inscribe a harmful glyph either on a surface (such as a section of floor, a wall, or a table) or within an object that can be closed to conceal the glyph (such as a book, a scroll, or a treasure chest). If you choose a surface, the glyph can cover an area of the surface no larger than 10 feet in diameter.", source:"PHB 280" },
  { id:"teleport", name:"Teleport", level:7, school:"Conjuration", range:"10 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"This spell instantly transports you and up to eight willing creatures of your choice that you can see within range, or a single object that you can see within range, to a destination you select. If you target an object, it must be able to fit entirely inside a 10-foot cube, and it can't be held or carried by an unwilling creature.", source:"PHB 281" },

  // LEVEL 8
  { id:"abi-dalzim-s-horrid-wilting", name:"Abi-Dalzim's Horrid Wilting", level:8, school:"Necromancy", range:"150 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You draw the moisture from every creature in a 30-foot cube centered on a point you choose within range. Each creature in that area must make a Constitution saving throw. Constructs and undead aren't affected, and plants and water elementals make this saving throw with disadvantage. A creature takes 12d8 necrotic damage on a failed save, or half as much damage on a successful one.", source:"XGE 150" },
  { id:"antimagic-field", name:"Antimagic Field", level:8, school:"Abjuration", range:"Self (10-foot sphere)", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Wizard"], description:"A 10-foot-radius invisible sphere of antimagic surrounds you. This area is divorced from the magical energy that suffuses the multiverse. Within the sphere, spells can't be cast, summoned creatures disappear, and even magic items become mundane.", source:"PHB 213" },
  { id:"antipathy-sympathy", name:"Antipathy/Sympathy", level:8, school:"Enchantment", range:"60 ft", duration:"10 days", casting_time:"1 hour", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Wizard"], description:"This spell attracts or repels creatures of your choice. You target something within range, either a Huge or smaller object or creature or an area that is no larger than a 200-foot cube. Then specify a kind of intelligent creature, such as red dragons, goblins, or vampires. You invest the target with an aura that either attracts or repels the specified creatures for the duration.", source:"PHB 214" },
  { id:"clone", name:"Clone", level:8, school:"Necromancy", range:"Touch", duration:"Instantaneous", casting_time:"1 hour", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"This spell grows an inert duplicate of a living creature as a safeguard against death. This clone forms inside a sealed vessel and grows to full size and maturity after 120 days; you can also choose to have the clone be a younger version of the same creature. It remains inert and endures indefinitely, as long as its vessel remains undisturbed.", source:"PHB 222" },
  { id:"control-weather", name:"Control Weather", level:8, school:"Transmutation", range:"Self (5-mile radius)", duration:"8 hours", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Druid","Wizard"], description:"You take control of the weather within 5 miles of you for the duration. You must be outdoors to cast this spell. Moving to a place where you don't have a clear path to the sky ends the spell early. When you cast the spell, you change the current weather conditions, which are determined by the DM based on the climate and season.", source:"PHB 228" },
  { id:"demiplane", name:"Demiplane", level:8, school:"Conjuration", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["S"], ritual:false, concentration:false, classes:["Warlock","Wizard"], description:"You create a shadowy door on a flat solid surface that you can see within range. The door is large enough to allow Medium creatures to pass through unhindered. When opened, the door leads to a demiplane that appears to be an empty room 30 feet in each dimension, made of wood or stone.", source:"PHB 231" },
  { id:"dominate-monster", name:"Dominate Monster", level:8, school:"Enchantment", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You attempt to beguile a creature that you can see within range. It must succeed on a Wisdom saving throw or be charmed by you for the duration. If you or creatures that are friendly to you are fighting it, it has advantage on the saving throw.", source:"PHB 235" },
  { id:"earthquake", name:"Earthquake", level:8, school:"Evocation", range:"500 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Druid","Sorcerer"], description:"You create a seismic disturbance at a point on the ground you can see within range. For the duration, an intense tremor rips through the ground in a 100-foot-radius circle centered on that point. Each creature on the ground in that area must make a Dexterity saving throw. On a failed save, the creature is knocked prone.", source:"PHB 236" },
  { id:"feeblemind", name:"Feeblemind", level:8, school:"Enchantment", range:"150 ft", duration:"30 days", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Druid","Warlock","Wizard"], description:"You blast the mind of a creature you can see within range, attempting to shatter its intellect and personality. The target takes 4d6 psychic damage and must make an Intelligence saving throw. On a failed save, the creature's Intelligence and Charisma scores become 1.", source:"PHB 239" },
  { id:"glibness", name:"Glibness", level:8, school:"Transmutation", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard","Warlock"], description:"Until the spell ends, when you make a Charisma check, you can replace the number you roll with a 15. Additionally, no matter what you say, magic that would determine if you are telling the truth indicates that you are being truthful.", source:"PHB 245" },
  { id:"holy-aura", name:"Holy Aura", level:8, school:"Abjuration", range:"Self (30-foot radius)", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric"], description:"Divine light washes out from you and coalesces in a soft radiance in a 30-foot radius around you. Creatures of your choice in that radius when you cast this spell shed dim light in a 5-foot radius and have advantage on all saving throws, and other creatures have disadvantage on attack rolls against them until the spell ends.", source:"PHB 251" },
  { id:"incendiary-cloud", name:"Incendiary Cloud", level:8, school:"Conjuration", range:"150 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"A swirling cloud of smoke shot through with white-hot embers appears in a 20-foot-radius sphere centered on a point within range. The cloud spreads around corners and is heavily obscured. It lasts for the duration or until a wind of moderate or greater speed (at least 10 miles per hour) disperses it.", source:"PHB 253" },
  { id:"maze", name:"Maze", level:8, school:"Conjuration", range:"60 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Wizard"], description:"You banish a creature that you can see within range into a labyrinthine demiplane. The target remains there for the duration or until it escapes the maze. The target can use its action to attempt to escape. When it does so, it makes a DC 20 Intelligence check. If it succeeds, it escapes, and the spell ends (a minotaur or goristro demon automatically succeeds).", source:"PHB 258" },
  { id:"mind-blank", name:"Mind Blank", level:8, school:"Abjuration", range:"Touch", duration:"24 hours", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Wizard"], description:"Until the spell ends, one willing creature you touch is immune to psychic damage, any effect that would sense its emotions or read its thoughts, divination spells, and the charmed condition. The spell even foils wish spells and spells or effects of similar power used to affect the target's mind or to gain information about the target.", source:"PHB 259" },
  { id:"power-word-stun", name:"Power Word Stun", level:8, school:"Enchantment", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You speak a word of power that overwhelms the mind of one creature you can see within range, leaving it dumbfounded. If the target has 150 hit points or fewer, it is stunned. Otherwise, the spell has no effect. The stunned target must make a Constitution saving throw at the end of each of its turns.", source:"PHB 267" },
  { id:"sunburst", name:"Sunburst", level:8, school:"Evocation", range:"150 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Wizard"], description:"Brilliant sunlight flashes in a 60-foot radius centered on a point you choose within range. Each creature in that light must make a Constitution saving throw. On a failed save, a creature takes 12d6 radiant damage and is blinded for 1 minute. On a successful save, it takes half as much damage and isn't blinded by this spell.", source:"PHB 279" },
  { id:"telepathy", name:"Telepathy", level:8, school:"Evocation", range:"Unlimited", duration:"24 hours", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Wizard"], description:"You create a telepathic link between yourself and a willing creature with which you are familiar. The creature can be anywhere on the same plane of existence as you. The spell ends if you or the target are no longer on the same plane. Until the spell ends, you and the target can instantaneously share words, images, sounds, and other sensory messages with one another through the link, and the target recognizes you as the creature it is communicating with.", source:"PHB 281" },

  // LEVEL 9
  { id:"astral-projection", name:"Astral Projection", level:9, school:"Necromancy", range:"10 ft", duration:"Special", casting_time:"1 hour", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Warlock","Wizard"], description:"You and up to eight willing creatures within range project your astral bodies into the Astral Plane (the spell fails and the casting is wasted if you are already on that plane). The material body you leave behind is unconscious and in a state of suspended animation; it doesn't need food or air and doesn't age.", source:"PHB 215" },
  { id:"foresight", name:"Foresight", level:9, school:"Divination", range:"Touch", duration:"8 hours", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Druid","Warlock","Wizard"], description:"You touch a willing creature and bestow a limited ability to see into the immediate future. For the duration, the target can't be surprised and has advantage on attack rolls, ability checks, and saving throws. Additionally, other creatures have disadvantage on attack rolls against the target for the duration.", source:"PHB 244" },
  { id:"gate", name:"Gate", level:9, school:"Conjuration", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Sorcerer","Wizard"], description:"You conjure a portal linking an unoccupied space you can see within range to a precise location on a different plane of existence. The portal is a circular opening, which you can make 5 to 20 feet in diameter. You can orient the portal in any direction you choose. The portal lasts for the duration.", source:"PHB 244" },
  { id:"imprisonment", name:"Imprisonment", level:9, school:"Abjuration", range:"30 ft", duration:"Until dispelled", casting_time:"1 minute", components:["V","S","M"], ritual:false, concentration:false, classes:["Warlock","Wizard"], description:"You create a magical restraint to hold a creature that you can see within range. The target must succeed on a Wisdom saving throw or be bound by the spell; if it succeeds, it is immune to this spell if you cast it again. While affected by this spell, the creature doesn't need to breathe, eat, or drink, and it doesn't age.", source:"PHB 252" },
  { id:"mass-heal", name:"Mass Heal", level:9, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Cleric"], description:"A flood of healing energy flows from you into injured creatures around you. You restore up to 700 hit points, divided as you choose among any number of creatures that you can see within range. Creatures healed by this spell are also cured of all diseases and any effect making them blinded or deafened. This spell has no effect on undead or constructs.", source:"PHB 258" },
  { id:"meteor-swarm", name:"Meteor Swarm", level:9, school:"Evocation", range:"1 mile", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"Blazing orbs of fire plummet to the ground at four different points you can see within range. Each creature in a 40-foot-radius sphere centered on each point you choose must make a Dexterity saving throw. The sphere spreads around corners. A creature takes 20d6 fire damage and 20d6 bludgeoning damage on a failed save, or half as much damage on a successful one.", source:"PHB 259" },
  { id:"power-word-heal", name:"Power Word Heal", level:9, school:"Evocation", range:"Touch", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard"], description:"A wave of healing energy washes over the creature you touch. The target regains all its hit points. If the creature is charmed, frightened, paralyzed, or stunned, the condition ends. If the creature is prone, it can use its reaction to stand up. This spell has no effect on undead or constructs.", source:"PHB 266" },
  { id:"power-word-kill", name:"Power Word Kill", level:9, school:"Enchantment", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You utter a word of power that can compel one creature you can see within range to die instantly. If the creature you choose has 100 hit points or fewer, it dies. Otherwise, the spell has no effect.", source:"PHB 266" },
  { id:"prismatic-wall", name:"Prismatic Wall", level:9, school:"Abjuration", range:"60 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Wizard"], description:"A shimmering, multicolored plane of light forms a vertical opaque wall—up to 90 feet long, 30 feet high, and 1 inch thick—centered on a point you can see within range. Alternatively, you can shape the wall into a sphere up to 30 feet in diameter centered on a point you choose within range.", source:"PHB 267" },
  { id:"shapechange", name:"Shapechange", level:9, school:"Transmutation", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Wizard"], description:"You assume the form of a different creature for the duration. The new form can be of any creature with a challenge rating equal to your level or lower. The creature can't be a construct or an undead, and you must have seen the sort of creature at least once. You transform into an average example of that creature.", source:"PHB 274" },
  { id:"storm-of-vengeance", name:"Storm of Vengeance", level:9, school:"Conjuration", range:"Sight", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid"], description:"A churning storm cloud forms, centered on a point you can see and spreading to a radius of 360 feet. Lightning flashes in the area, thunder booms, and strong winds roar. Each creature under the cloud (no more than 5,000 feet beneath the cloud) when it appears must make a Constitution saving throw. On a failed save, a creature takes 2d6 thunder damage and becomes deafened for 5 minutes.", source:"PHB 279" },
  { id:"time-stop", name:"Time Stop", level:9, school:"Transmutation", range:"Self", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You briefly stop the flow of time for everyone but yourself. No time passes for other creatures, while you take 1d4 + 1 turns in a row, during which you can use actions and move as normal. This effect ends if one of the actions you use during this period, or any effects that you create during this period, affects a creature other than you or an object being worn or carried by someone other than you.", source:"PHB 283" },
  { id:"true-polymorph", name:"True Polymorph", level:9, school:"Transmutation", range:"30 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Warlock","Wizard"], description:"Choose one creature or nonmagical object that you can see within range. You transform the creature into a different creature, the creature into a nonmagical object, or the object into a creature (the object must be neither worn nor carried by another creature). The transformation lasts for the duration, or until the target drops to 0 hit points or dies.", source:"PHB 283" },
  { id:"true-resurrection", name:"True Resurrection", level:9, school:"Necromancy", range:"Touch", duration:"Instantaneous", casting_time:"1 hour", components:["V","S","M"], ritual:false, concentration:false, classes:["Cleric","Druid"], description:"You touch a creature that has been dead for no longer than 200 years and that died for any reason except old age. If the creature's soul is free and willing, the creature is restored to life with all its hit points.", source:"PHB 284" },
  { id:"weird", name:"Weird", level:9, school:"Illusion", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Wizard"], description:"Drawing on the deepest fears of a group of creatures, you create illusory creatures in their minds, visible only to them. Each creature in a 30-foot-radius sphere centered on a point of your choice within range must make a Wisdom saving throw. On a failed save, the creature becomes frightened for the duration.", source:"PHB 288" },
  { id:"wish", name:"Wish", level:9, school:"Conjuration", range:"Self", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"Wish is the mightiest spell a mortal creature can cast. By simply speaking aloud, you can alter the very foundations of reality in accord with your desires. The basic use of this spell is to duplicate any other spell of 8th level or lower. You don't need to meet any requirements in that spell, including costly components. The spell simply takes effect.", source:"PHB 288" },

  // ========== XANATHAR'S GUIDE (additional spells) ==========
  { id:"create-bonfire", name:"Create Bonfire", level:0, school:"Conjuration", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"You create a bonfire on ground that you can see within range. Until the spell ends, the magic bonfire fills a 5-foot cube. Any creature in the bonfire's space when you cast the spell must succeed on a Dexterity saving throw or take 1d8 fire damage. A creature must also make the saving throw when it moves into the bonfire's space for the first time on a turn or ends its turn there.", source:"XGE 152" },
  { id:"frostbite", name:"Frostbite", level:0, school:"Evocation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"You cause numbing frost to form on one creature that you can see within range. The target must make a Constitution saving throw. On a failed save, the target takes 1d6 cold damage, and it has disadvantage on the next weapon attack roll it makes before the end of its next turn.", source:"XGE 156" },
  { id:"green-flame-blade", name:"Green-Flame Blade", level:0, school:"Evocation", range:"Self (5-foot radius)", duration:"Instantaneous", casting_time:"1 action", components:["S","M"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You brandish the weapon used in the spell's casting and make a melee attack with it against one creature within 5 feet of you. On a hit, the target suffers the weapon attack's normal effects, and you can cause green fire to leap from the target to a different creature of your choice within 5 feet of it.", source:"XGE 163" },
  { id:"lightning-lure", name:"Lightning Lure", level:0, school:"Evocation", range:"Self (15-foot radius)", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You create a lash of lightning energy that strikes at one creature of your choice that you can see within 15 feet of you. The target must succeed on a Strength saving throw or be pulled up to 10 feet in a straight line toward you and then take 1d8 lightning damage if it is within 5 feet of you.", source:"XGE 164" },
  { id:"sword-burst", name:"Sword Burst", level:0, school:"Conjuration", range:"Self (5-foot radius)", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You create a momentary circle of spectral blades that sweep around you. All other creatures within 5 feet of you must succeed on a Dexterity saving throw or take 1d6 force damage.", source:"XGE 170" },
  { id:"zephyr-strike", name:"Zephyr Strike", level:1, school:"Transmutation", range:"Self", duration:"1 minute", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:true, classes:["Ranger"], description:"You move like the wind. Until the spell ends, your movement doesn't provoke opportunity attacks. Once before the spell ends, you can give yourself advantage on one weapon attack roll on your turn. That attack deals an extra 1d8 force damage on a hit.", source:"XGE 171" },
  { id:"aganazzars-scorcher", name:"Aganazzar's Scorcher", level:2, school:"Evocation", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A line of roaring flame 30 feet long and 5 feet wide emanates from you in a direction you choose. Each creature in the line must make a Dexterity saving throw. A creature takes 3d8 fire damage on a failed save, or half as much damage on a successful one.", source:"XGE 150", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d8 for each slot level above 2nd." },
  { id:"healing-spirit", name:"Healing Spirit", level:2, school:"Conjuration", range:"60 ft", duration:"1 minute", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Ranger"], description:"You call forth a nature spirit to soothe the wounded. The intangible spirit appears in a space that is a 5-foot cube you can see within range. Until the spell ends, whenever you or a creature you can see moves into the spirit's space for the first time on a turn or starts its turn there, you can cause the spirit to restore 1d6 hit points to that creature.", source:"XGE 157", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, the healing increases by 1d6 for each slot level above 2nd." },
  { id:"maximillians-earthen-grasp", name:"Maximilian's Earthen Grasp", level:2, school:"Transmutation", range:"30 ft", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"You choose a 5-foot-square unoccupied space on the ground that you can see within range. A Medium hand made from compacted soil rises there and reaches for one creature you can see within 5 feet of it. The target must make a Strength saving throw. On a failed save, the target takes 2d6 bludgeoning damage and is restrained for the spell's duration.", source:"XGE 161", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d6 for each slot level above 2nd." },
  { id:"pyrotechnics", name:"Pyrotechnics", level:2, school:"Transmutation", range:"60 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Wizard"], description:"Choose an area of nonmagical flame that you can see and that fits within a 5-foot cube within range. You can extinguish the fire in that area, and you create either fireworks or smoke.", source:"XGE 163" },
  { id:"shadow-blade", name:"Shadow Blade", level:2, school:"Illusion", range:"Self", duration:"1 minute", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"You weave together threads of shadow to create a sword of solidified gloom in your hand. This magic sword lasts until the spell ends. It counts as a simple melee weapon with which you are proficient. It deals 2d8 psychic damage on a hit and has the finesse, light, and thrown properties.", source:"XGE 164", higher_levels:"When you cast this spell using a 3rd- or 4th-level spell slot, the damage increases to 3d8. When you cast it using a 5th- or 6th-level slot, the damage increases to 4d8. With a 7th-level slot or higher, it increases to 5d8." },
  { id:"snillocs-snowball-swarm", name:"Snilloc's Snowball Swarm", level:2, school:"Evocation", range:"90 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A flurry of magic snowballs erupts from a point you choose within range. Each creature in a 5-foot-radius sphere centered on that point must make a Dexterity saving throw. A creature takes 3d6 cold damage on a failed save, or half as much damage on a successful one.", source:"XGE 165", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d6 for each slot level above 2nd." },
  { id:"warding-wind", name:"Warding Wind", level:2, school:"Evocation", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Bard","Druid","Sorcerer","Wizard"], description:"A strong wind (20 miles per hour) blows around you in a 10-foot radius and moves with you, remaining centered on you. The wind extinguishes unprotected flames in its area that are torch-sized or smaller. The area is difficult terrain for creatures other than you.", source:"XGE 171" },
  { id:"erupting-earth", name:"Erupting Earth", level:3, school:"Transmutation", range:"120 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Sorcerer","Wizard"], description:"Choose a point you can see on the ground within range. A fountain of churned earth and stone erupts in a 20-foot cube centered on that point. Each creature in that area must make a Dexterity saving throw. A creature takes 3d12 bludgeoning damage on a failed save, or half as much damage on a successful one.", source:"XGE 155", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d12 for each slot level above 3rd." },
  { id:"flame-arrows", name:"Flame Arrows", level:3, school:"Transmutation", range:"Touch", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Ranger","Sorcerer","Wizard"], description:"You touch a quiver containing arrows or bolts. When a target is hit by a ranged weapon attack using a piece of ammunition drawn from the quiver, the target takes an extra 1d6 fire damage. The spell ends when twelve pieces of ammunition have been drawn from the quiver.", source:"XGE 156", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, the number of pieces of ammunition you can affect increases by two for each slot level above 3rd." },
  { id:"melf-s-minute-meteors", name:"Melf's Minute Meteors", level:3, school:"Evocation", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"You create six tiny meteors in your space. They float in the air and orbit you for the spell's duration. When you cast the spell—and as a bonus action on each of your turns thereafter—you can expend one or two of the meteors, sending them streaking toward one or two points within 120 feet of you.", source:"XGE 161", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, the number of meteors created increases by two for each slot level above 3rd." },
  { id:"spirit-shroud", name:"Spirit Shroud", level:3, school:"Necromancy", range:"Self", duration:"1 minute", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:true, classes:["Cleric","Paladin","Warlock","Wizard"], description:"You call forth spirits of the dead, which flit around you for the spell's duration. Until the spell ends, any attack you make deals 1d8 extra damage when you hit a creature within 10 feet of you. This damage is radiant, necrotic, or cold (your choice).", source:"XGE 166", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d8 for every two slot levels above 3rd." },
  { id:"tiny-servant", name:"Tiny Servant", level:3, school:"Transmutation", range:"Touch", duration:"8 hours", casting_time:"1 minute", components:["V","S"], ritual:false, concentration:false, classes:["Wizard"], description:"You touch one Tiny, nonmagical object that isn't attached to another object or a surface and isn't being carried by another creature. The target animates and sprouts little arms and legs, becoming a creature under your control until the spell ends or the creature drops to 0 hit points.", source:"XGE 168", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, you can animate two additional objects for each slot level above 3rd." },
  { id:"wall-of-sand", name:"Wall of Sand", level:3, school:"Evocation", range:"90 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"You conjure up a wall of swirling sand on the ground at a point you can see within range. You can make the wall up to 30 feet long, 10 feet high, and 10 feet thick. It blocks line of sight but not movement. A creature is blinded while in the wall's space and must spend 3 feet of movement for every 1 foot it moves there.", source:"XGE 170" },
  { id:"wall-of-water", name:"Wall of Water", level:3, school:"Evocation", range:"60 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"You conjure up a wall of water on the ground at a point you can see within range. You can make the wall up to 30 feet long, 10 feet high, and 1 foot thick, or a ringed wall up to 20 feet in diameter.", source:"XGE 170" },
  { id:"shadow-of-moil", name:"Shadow of Moil", level:4, school:"Necromancy", range:"Self", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Warlock"], description:"Flame-like shadows wreathe your body until the spell ends, causing you to become heavily obscured to others. The shadows turn dim light within 10 feet of you into darkness. Until the spell ends, you have resistance to radiant damage. Whenever a creature within 10 feet of you hits you with an attack, the shadows lash out at that creature, dealing it 2d8 necrotic damage.", source:"XGE 164" },
  { id:"sickening-radiance", name:"Sickening Radiance", level:4, school:"Evocation", range:"120 ft", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"Dim, greenish light spreads within a 30-foot-radius sphere centered on a point you choose within range. When a creature moves into the spell's area for the first time on a turn or starts its turn there, that creature must succeed on a Constitution saving throw or take 4d10 radiant damage and suffer one level of exhaustion.", source:"XGE 164" },
  { id:"storm-sphere", name:"Storm Sphere", level:4, school:"Evocation", range:"150 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"A 20-foot-radius sphere of whirling air springs into existence centered on a point you choose within range. Each creature in the sphere when it appears or that ends its turn there must succeed on a Strength saving throw or take 2d6 bludgeoning damage.", source:"XGE 166", higher_levels:"When you cast this spell using a spell slot of 5th level or higher, the damage increases by 1d6 for each slot level above 4th." },
  { id:"vitriolic-sphere", name:"Vitriolic Sphere", level:4, school:"Evocation", range:"150 ft", duration:"Instantaneous", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You point at a location within range, and a glowing 1-foot diameter ball of emerald acid streaks there and then detonates in a 20-foot-radius sphere. Each creature in that area must make a Dexterity saving throw. On a failed save, a creature takes 10d4 acid damage and another 5d4 acid damage at the end of its next turn.", source:"XGE 170", higher_levels:"When you cast this spell using a spell slot of 5th level or higher, the initial damage increases by 2d4 for each slot level above 4th." },
  { id:"summon-greater-demon", name:"Summon Greater Demon", level:4, school:"Conjuration", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"You utter foul words, summoning one demon from the chaos of the Abyss. You choose the demon's type, which must be one of challenge rating 5 or lower, such as a shadow demon or a dretch.", source:"XGE 166", higher_levels:"When you cast this spell using a spell slot of 5th level or higher, the challenge rating increases by 1 for each slot level above 4th." },
  { id:"danse-macabre", name:"Danse Macabre", level:5, school:"Necromancy", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"Threads of dark magic leap from your fingers to pierce up to five Small or Medium corpses you can see within range. Each corpse immediately stands up and becomes undead. You decide whether it is a zombie or a skeleton, and it gains a bonus to its attack and damage rolls equal to your spellcasting ability modifier.", source:"XGE 153", higher_levels:"When you cast this spell using a spell slot of 6th level or higher, you animate up to two additional corpses for each slot level above 5th." },
  { id:"enervation", name:"Enervation", level:5, school:"Necromancy", range:"60 ft", duration:"1 minute", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"A tendril of inky darkness reaches out from you, touching a creature you can see within range to drain life from it. The target must make a Dexterity saving throw. On a failed save, the target takes 4d8 necrotic damage, and you regain hit points equal to half the amount of necrotic damage dealt.", source:"XGE 155", higher_levels:"When you cast this spell using a spell slot of 6th level or higher, the damage increases by 1d8 for each slot level above 5th." },
  { id:"far-step", name:"Far Step", level:5, school:"Conjuration", range:"Self", duration:"1 minute", casting_time:"1 bonus action", components:["V"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"You teleport up to 60 feet to an unoccupied space you can see. On each of your turns before the spell ends, you can use a bonus action to teleport in this way again.", source:"XGE 155" },
  { id:"steel-wind-strike", name:"Steel Wind Strike", level:5, school:"Conjuration", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["S","M"], ritual:false, concentration:false, classes:["Ranger","Wizard"], description:"You flourish the weapon used in the casting and then vanish to strike like the wind. Choose up to five creatures you can see within range. Make a melee spell attack against each target. On a hit, a target takes 6d10 force damage. You can then teleport to an unoccupied space within 5 feet of one of the targets you hit or missed.", source:"XGE 166" },
  { id:"transmute-rock", name:"Transmute Rock", level:5, school:"Transmutation", range:"120 ft", duration:"Until dispelled", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:false, classes:["Druid","Wizard"], description:"You choose an area of stone or mud up to 40 feet on a side within range and choose one of the following effects: Transmute Rock to Mud or Transmute Mud to Rock.", source:"XGE 169" },
  { id:"investiture-of-flame", name:"Investiture of Flame", level:6, school:"Transmutation", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"Flames race across your body, shedding bright light in a 30-foot radius and dim light for an additional 30 feet. Until the spell ends, you are immune to fire damage and have resistance to cold damage; any creature that moves within 5 feet of you for the first time on a turn or ends its turn there takes 1d10 fire damage.", source:"XGE 159" },
  { id:"investiture-of-ice", name:"Investiture of Ice", level:6, school:"Transmutation", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"Until the spell ends, ice rimes your body. You are immune to cold damage and have resistance to fire damage; you can move across difficult terrain created by ice or snow without spending extra movement; the ground in a 10-foot radius around you is icy and is difficult terrain for creatures other than you.", source:"XGE 159" },
  { id:"investiture-of-stone", name:"Investiture of Stone", level:6, school:"Transmutation", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"Until the spell ends, bits of rock spread across your body. You have resistance to bludgeoning, piercing, and slashing damage from nonmagical attacks; you can use your action to create a small earthquake on the ground in a 15-foot radius centered on you.", source:"XGE 159" },
  { id:"investiture-of-wind", name:"Investiture of Wind", level:6, school:"Transmutation", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Warlock","Wizard"], description:"Until the spell ends, wind whirls around you. Ranged weapon attacks made by other creatures have disadvantage on attack rolls against you; you gain a flying speed of 60 feet; you can use your action to create a line of strong wind 60 feet long and 10 feet wide.", source:"XGE 160" },
  { id:"scatter", name:"Scatter", level:6, school:"Conjuration", range:"30 ft", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"The air quivers around up to five creatures of your choice that you can see within range. An unwilling creature must succeed on a Wisdom saving throw to resist this spell. You teleport each affected target to an unoccupied space that you can see within 120 feet of you.", source:"XGE 164" },
  { id:"soul-cage", name:"Soul Cage", level:6, school:"Necromancy", range:"60 ft", duration:"8 hours", casting_time:"1 reaction", components:["V","S","M"], ritual:false, concentration:false, classes:["Warlock","Wizard"], description:"This spell snatches the soul of a humanoid as it dies and traps it inside the tiny cage you use for the material component. A stolen soul remains inside the cage until the spell ends or until you destroy the cage, which ends the spell.", source:"XGE 165" },
  { id:"crown-of-stars", name:"Crown of Stars", level:7, school:"Evocation", range:"Self", duration:"1 hour", casting_time:"1 action", components:["V","S"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"Seven star-like motes of light appear and orbit your head until the spell ends. You can use a bonus action to send one of the motes streaking toward one creature or object within 120 feet of you. When you do so, make a ranged spell attack. On a hit, the target takes 4d12 radiant damage.", source:"XGE 153" },
  { id:"whirlwind", name:"Whirlwind", level:7, school:"Evocation", range:"300 ft", duration:"1 minute", casting_time:"1 action", components:["V","M"], ritual:false, concentration:true, classes:["Druid","Sorcerer","Wizard"], description:"A whirlwind howls down to a point that you can see on the ground within range. The whirlwind is a 10-foot-radius, 30-foot-high cylinder centered on that point. Until the spell ends, you can use your action to move the whirlwind up to 30 feet in any direction along the ground.", source:"XGE 171" },
  { id:"illusory-dragon", name:"Illusory Dragon", level:8, school:"Illusion", range:"120 ft", duration:"1 minute", casting_time:"1 action", components:["S"], ritual:false, concentration:true, classes:["Wizard"], description:"By gathering threads of shadow material from the Shadowfell, you create a Huge shadowy dragon in an unoccupied space that you can see within range. The illusion lasts for the spell's duration and occupies its space, as if it were a creature.", source:"XGE 157" },
  { id:"maddening-darkness", name:"Maddening Darkness", level:8, school:"Evocation", range:"150 ft", duration:"10 minutes", casting_time:"1 action", components:["V","M"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"Magical darkness spreads from a point you choose within range to fill a 60-foot-radius sphere until the spell ends. A creature with darkvision cannot see through this darkness, and nonmagical light cannot illuminate the area.", source:"XGE 160" },
  { id:"invulnerability", name:"Invulnerability", level:9, school:"Abjuration", range:"Self", duration:"10 minutes", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"You are immune to all damage until the spell ends.", source:"XGE 160" },
  { id:"mass-polymorph", name:"Mass Polymorph", level:9, school:"Transmutation", range:"120 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Wizard"], description:"You transform up to ten creatures of your choice that you can see within range. An unwilling target must succeed on a Wisdom saving throw to resist the transformation. An unwilling shapechanger automatically succeeds on the save.", source:"XGE 160" },
  { id:"psychic-scream", name:"Psychic Scream", level:9, school:"Enchantment", range:"90 ft", duration:"1 minute", casting_time:"1 action", components:["S"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You unleash the power of your mind to blast the intellect of up to ten creatures of your choice that you can see within range. Each target must succeed on an Intelligence saving throw or take 14d6 psychic damage and be stunned.", source:"XGE 163" },

  // ========== TASHA'S CAULDRON OF EVERYTHING ==========
  { id:"booming-blade", name:"Booming Blade", level:0, school:"Evocation", range:"Self (5-foot radius)", duration:"1 round", casting_time:"1 action", components:["S","M"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"You brandish the weapon used in the spell's casting and make a melee attack with it against one creature within 5 feet of you. On a hit, the target suffers the weapon attack's normal effects and then becomes sheathed in booming energy until the start of your next turn. If the target willingly moves 5 feet or more before then, it takes 1d8 thunder damage.", source:"TCE 106" },
  { id:"tasha-s-caustic-brew", name:"Tasha's Caustic Brew", level:1, school:"Evocation", range:"Self (30-foot line)", duration:"1 minute", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Sorcerer","Wizard"], description:"A stream of acid emanates from you in a line 30 feet long and 5 feet wide in a direction you choose. Each creature in the line must succeed on a Dexterity saving throw or be covered in acid for the spell's duration. A creature covered in the acid takes 2d4 acid damage at the start of each of its turns.", source:"TCE 115", higher_levels:"When you cast this spell using a spell slot of 2nd level or higher, the damage increases by 2d4 for each slot level above 1st." },
  { id:"tasha-s-mind-whip", name:"Tasha's Mind Whip", level:2, school:"Enchantment", range:"90 ft", duration:"1 round", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"You psychically lash out at one creature you can see within range. The target must make an Intelligence saving throw. On a failed save, the target takes 3d6 psychic damage, and it can't take a reaction until the end of its next turn. Moreover, on its next turn, it must choose whether it gets a move, an action, or a bonus action; it gets only one of the three.", source:"TCE 115", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd." },
  { id:"mind-spike", name:"Mind Spike", level:2, school:"Divination", range:"60 ft", duration:"1 hour", casting_time:"1 action", components:["S"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"You reach into the mind of one creature you can see within range. The target must make a Wisdom saving throw, taking 3d8 psychic damage on a failed save, or half as much damage on a successful one. On a failed save, you also always know the target's location until the spell ends.", source:"TCE 114", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d8 for each slot level above 2nd." },
  { id:"rime-s-binding-ice", name:"Rime's Binding Ice", level:2, school:"Evocation", range:"Self (30-foot cone)", duration:"Instantaneous", casting_time:"1 action", components:["S","M"], ritual:false, concentration:false, classes:["Sorcerer","Wizard"], description:"A burst of cold energy emanates from you in a 30-foot cone. Each creature in that area must make a Constitution saving throw. On a failed save, a creature takes 3d8 cold damage and is hindered by ice formations for 1 minute, or until a creature uses its action to break away the ice.", source:"TCE 115", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, increase the cold damage by 1d8 for each slot level above 2nd." },
  { id:"summon-beast", name:"Summon Beast", level:2, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Ranger"], description:"You call forth a bestial spirit. It manifests in an unoccupied space that you can see within range. When you cast the spell, choose an environment: Air, Land, or Water. The creature resembles an animal native to the chosen environment and uses the Bestial Spirit stat block.", source:"TCE 109", higher_levels:"When you cast this spell using a spell slot of 3rd level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"intellect-fortress", name:"Intellect Fortress", level:3, school:"Abjuration", range:"30 ft", duration:"1 hour", casting_time:"1 action", components:["V"], ritual:false, concentration:true, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"For the duration, you or one willing creature you can see within range has resistance to psychic damage, as well as advantage on Intelligence, Wisdom, and Charisma saving throws.", source:"TCE 107", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, you can target one additional creature for each slot level above 3rd." },
  { id:"summon-fey", name:"Summon Fey", level:3, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Ranger","Warlock","Wizard"], description:"You call forth a fey spirit. It manifests in an unoccupied space that you can see within range. When you cast the spell, choose a mood: Fuming, Mirthful, or Tricksy. The creature resembles a fey creature of your choice marked by the chosen mood.", source:"TCE 112", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"summon-shadowspawn", name:"Summon Shadowspawn", level:3, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"You call forth a shadow spirit. It manifests in an unoccupied space that you can see within range. When you cast the spell, choose an emotion: Fury, Despair, or Fear. The creature resembles a misshapen biped marked by the chosen emotion.", source:"TCE 113", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"summon-undead", name:"Summon Undead", level:3, school:"Necromancy", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"You call forth an undead spirit. It manifests in an unoccupied space that you can see within range. When you cast the spell, choose the creature's form: Ghostly, Putrid, or Skeletal.", source:"TCE 114", higher_levels:"When you cast this spell using a spell slot of 4th level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"summon-aberration", name:"Summon Aberration", level:4, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"You call forth an aberrant spirit. It manifests in an unoccupied space that you can see within range. When you cast the spell, choose Beholderkin, Slaad, or Star Spawn. The creature resembles an aberration of the chosen type.", source:"TCE 109", higher_levels:"When you cast this spell using a spell slot of 5th level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"summon-construct", name:"Summon Construct", level:4, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Wizard"], description:"You call forth the spirit of a construct. It manifests in an unoccupied space that you can see within range. When you cast the spell, choose Clay, Metal, or Stone. The construct resembles a golem or modron made of the chosen material.", source:"TCE 111", higher_levels:"When you cast this spell using a spell slot of 5th level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"summon-elemental", name:"Summon Elemental", level:4, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Druid","Ranger","Wizard"], description:"You call forth an elemental spirit. It manifests in an unoccupied space that you can see within range. When you cast the spell, choose an element: Air, Earth, Fire, or Water. The creature resembles a bipedal form wreathed in the chosen element.", source:"TCE 111", higher_levels:"When you cast this spell using a spell slot of 5th level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"summon-celestial", name:"Summon Celestial", level:5, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Cleric","Paladin"], description:"You call forth a celestial spirit. It manifests in an angelic form in an unoccupied space that you can see within range. When you cast the spell, choose Avenger or Defender. Your choice determines certain traits in its stat block.", source:"TCE 110", higher_levels:"When you cast this spell using a spell slot of 6th level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"summon-fiend", name:"Summon Fiend", level:6, school:"Conjuration", range:"90 ft", duration:"1 hour", casting_time:"1 action", components:["V","S","M"], ritual:false, concentration:true, classes:["Warlock","Wizard"], description:"You call forth a fiendish spirit. It manifests in an unoccupied space that you can see within range. When you cast the spell, choose Demon, Devil, or Yugoloth. The creature resembles a fiend of the chosen type.", source:"TCE 112", higher_levels:"When you cast this spell using a spell slot of 7th level or higher, use the higher level wherever the spell's level appears in the stat block." },
  { id:"dream-of-the-blue-veil", name:"Dream of the Blue Veil", level:7, school:"Conjuration", range:"20 ft", duration:"6 hours", casting_time:"10 minutes", components:["V","S","M"], ritual:false, concentration:false, classes:["Bard","Sorcerer","Warlock","Wizard"], description:"You and up to eight willing creatures within range fall unconscious for the spell's duration and experience visions of another world on the Material Plane. Not a dream, these visions are a possibility of travel to another world.", source:"TCE 106" },
  { id:"blade-of-disaster", name:"Blade of Disaster", level:9, school:"Conjuration", range:"60 ft", duration:"1 minute", casting_time:"1 bonus action", components:["V","S"], ritual:false, concentration:true, classes:["Sorcerer","Warlock","Wizard"], description:"You create a blade-shaped planar rift about 3 feet long in an unoccupied space you can see within range. When you cast this spell, you can make up to two melee spell attacks with the blade, each one against a creature, loose object, or structure within 5 feet of the blade. On a hit, the target takes 4d12 force damage.", source:"TCE 106" },

  // ========== SWORD COAST ADVENTURER'S GUIDE ==========
  { id:"scag-booming-blade", name:"Booming Blade (SCAG)", level:0, school:"Evocation", range:"Self (5-foot radius)", duration:"1 round", casting_time:"1 action", components:["S","M"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"(Originally from SCAG, later reprinted in TCE.) You brandish the weapon used in the spell's casting and make a melee attack with it against one creature within 5 feet of you. On a hit, the target suffers the weapon attack's normal effects and then becomes sheathed in booming energy until the start of your next turn.", source:"SCAG 142" },
  { id:"green-flame-blade-scag", name:"Green-Flame Blade (SCAG)", level:0, school:"Evocation", range:"Self (5-foot radius)", duration:"Instantaneous", casting_time:"1 action", components:["S","M"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"(Originally from SCAG.) You brandish the weapon used in the spell's casting and make a melee attack with it against one creature within 5 feet of you. On a hit, the target suffers the weapon attack's normal effects, and you can cause green fire to leap from the target to a different creature within 5 feet of it.", source:"SCAG 143" },
  { id:"lightning-lure-scag", name:"Lightning Lure (SCAG)", level:0, school:"Evocation", range:"Self (15-foot radius)", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"(Originally from SCAG.) You create a lash of lightning energy that strikes at one creature of your choice that you can see within 15 feet of you. The target must succeed on a Strength saving throw or be pulled up to 10 feet in a straight line toward you and then take 1d8 lightning damage.", source:"SCAG 143" },
  { id:"sword-burst-scag", name:"Sword Burst (SCAG)", level:0, school:"Conjuration", range:"Self (5-foot radius)", duration:"Instantaneous", casting_time:"1 action", components:["V"], ritual:false, concentration:false, classes:["Sorcerer","Warlock","Wizard"], description:"(Originally from SCAG.) You create a momentary circle of spectral blades that sweep around you. All other creatures within 5 feet of you must succeed on a Dexterity saving throw or take 1d6 force damage.", source:"SCAG 143" }
];


/* ===== app.js ===== */
/* ============================================================
   SPELL TOME — D&D 5e Spell Card Application
   app.js — Main controller
   ============================================================ */

// ============================================================
// CONSTANTS
// ============================================================
const SCHOOLS = {
  Abjuration:    '#4DC8D0',
  Enchantment:   '#C4306A',
  Conjuration:   '#6A3A8A',
  Illusion:      '#3A4A8A',
  Transmutation: '#6AAA2A',
  Divination:    '#BCAA20',
  Necromancy:    '#7A3A2A',
  Evocation:     '#2A8A6A'
};

const SOURCE_BOOKS = {
  PHB: { label: "Player's Handbook",         abbr: 'PHB', color: '#8B2FC9' },
  XGE: { label: "Xanathar's Guide",          abbr: 'XGE', color: '#1e7a6e' },
  TCE: { label: "Tasha's Cauldron",          abbr: 'TCE', color: '#c97020' },
  SCAG: { label: "Sword Coast Adv. Guide",   abbr: 'SCAG', color: '#2a5f8a' },
  FTD: { label: "Fizban's Treasury",         abbr: 'FTD', color: '#8a2020' },
  SCC: { label: "Strixhaven",                abbr: 'SCC', color: '#3a6e8a' }
};

const ALL_CLASSES = ['Bard','Cleric','Druid','Paladin','Ranger','Sorcerer','Warlock','Wizard'];
const LEVEL_LABELS = ['Cantrip','1st','2nd','3rd','4th','5th','6th','7th','8th','9th'];

const SPELL_SLOT_TABLE = {
  fullCaster:  {1:1,2:1,3:2,4:2,5:3,6:3,7:4,8:4,9:5,10:5,11:6,12:6,13:7,14:7,15:8,16:8,17:9,18:9,19:9,20:9},
  halfCaster:  {1:0,2:1,3:1,4:1,5:2,6:2,7:2,8:2,9:3,10:3,11:3,12:3,13:3,14:3,15:4,16:4,17:4,18:4,19:4,20:5},
  warlock:     {1:1,2:1,3:2,4:2,5:3,6:3,7:4,8:4,9:5,10:5,11:5,12:5,13:5,14:5,15:5,16:5,17:5,18:5,19:5,20:5}
};

const CLASS_TYPE = {
  Bard:'fullCaster', Cleric:'fullCaster', Druid:'fullCaster',
  Sorcerer:'fullCaster', Wizard:'fullCaster',
  Paladin:'halfCaster', Ranger:'halfCaster', Warlock:'warlock'
};

// ============================================================
// STATE
// ============================================================
const state = {
  selectedClass: '',
  selectedLevel: 0,
  activeLevels: new Set(),
  activeSchools: new Set(Object.keys(SCHOOLS)),
  activeBooks: new Set(Object.keys(SOURCE_BOOKS)),
  searchText: '',
  selectedSpells: new Set()
};

// ============================================================
// HELPERS
// ============================================================
function getSpellBook(spell) {
  return spell.source.split(' ')[0];
}

// ============================================================
// SCHOOL ICONS (SVG strings, colour via currentColor)
// ============================================================
const SCHOOL_ICONS = {
  Abjuration: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="17" fill="none" stroke="currentColor" stroke-width="1.8"/>
    <circle cx="20" cy="20" r="11" fill="none" stroke="currentColor" stroke-width="1.1"/>
    <path d="M20 3 L20 37 M3 20 L37 20 M6.5 6.5 L33.5 33.5 M33.5 6.5 L6.5 33.5" stroke="currentColor" stroke-width="0.6" opacity="0.45"/>
    <circle cx="20" cy="9" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/>
    <circle cx="20" cy="31" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/>
    <circle cx="9" cy="20" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/>
    <circle cx="31" cy="20" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/>
  </svg>`,
  Enchantment: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="17" fill="none" stroke="currentColor" stroke-width="1.8"/>
    <circle cx="20" cy="20" r="5" fill="currentColor" opacity="0.6"/>
    <path d="M20 3 A17 17 0 0 1 37 20 A17 17 0 0 1 20 37" fill="none" stroke="currentColor" stroke-width="1.3"/>
    <path d="M20 3 A17 17 0 0 0 3 20 A17 17 0 0 0 20 37" fill="none" stroke="currentColor" stroke-width="0.7" stroke-dasharray="3 2.5"/>
    <circle cx="20" cy="20" r="11" fill="none" stroke="currentColor" stroke-width="0.7" stroke-dasharray="2 3"/>
    <path d="M7 7 L33 33 M33 7 L7 33" stroke="currentColor" stroke-width="0.5" opacity="0.35"/>
  </svg>`,
  Conjuration: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="17" fill="none" stroke="currentColor" stroke-width="1.8"/>
    <polygon points="20,5 34,29 6,29" fill="none" stroke="currentColor" stroke-width="1.4"/>
    <polygon points="20,35 6,11 34,11" fill="none" stroke="currentColor" stroke-width="0.9" opacity="0.55"/>
    <circle cx="20" cy="20" r="4.5" fill="none" stroke="currentColor" stroke-width="1.1"/>
    <circle cx="20" cy="20" r="1.5" fill="currentColor" opacity="0.7"/>
  </svg>`,
  Illusion: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="17" fill="none" stroke="currentColor" stroke-width="1.8"/>
    <path d="M3 20 Q11 6 20 20 Q29 34 37 20" fill="none" stroke="currentColor" stroke-width="1.6"/>
    <path d="M3 20 Q11 34 20 20 Q29 6 37 20" fill="none" stroke="currentColor" stroke-width="0.9" opacity="0.5"/>
    <circle cx="20" cy="20" r="13" fill="none" stroke="currentColor" stroke-width="0.6" stroke-dasharray="1.5 3.5"/>
    <ellipse cx="20" cy="20" rx="7" ry="4" fill="none" stroke="currentColor" stroke-width="1" opacity="0.6"/>
  </svg>`,
  Transmutation: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="17" fill="none" stroke="currentColor" stroke-width="1.8"/>
    <polygon points="20,7 31,27 9,27" fill="none" stroke="currentColor" stroke-width="1.4"/>
    <circle cx="20" cy="20" r="8" fill="none" stroke="currentColor" stroke-width="1.1"/>
    <line x1="20" y1="7" x2="20" y2="27" stroke="currentColor" stroke-width="0.8" opacity="0.55"/>
    <line x1="9" y1="27" x2="31" y2="27" stroke="currentColor" stroke-width="0.8" opacity="0.55"/>
    <circle cx="20" cy="20" r="2" fill="currentColor" opacity="0.65"/>
  </svg>`,
  Divination: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="17" fill="none" stroke="currentColor" stroke-width="1.8"/>
    <circle cx="20" cy="20" r="6" fill="none" stroke="currentColor" stroke-width="1.3"/>
    <path d="M20 3 L20 14 M20 26 L20 37 M3 20 L14 20 M26 20 L37 20" stroke="currentColor" stroke-width="1.2"/>
    <path d="M7 7 L14 14 M26 26 L33 33 M33 7 L26 14 M14 26 L7 33" stroke="currentColor" stroke-width="0.8" opacity="0.5"/>
    <circle cx="20" cy="20" r="2.5" fill="currentColor" opacity="0.75"/>
  </svg>`,
  Necromancy: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="17" fill="none" stroke="currentColor" stroke-width="1.8"/>
    <circle cx="13" cy="14" r="3.5" fill="none" stroke="currentColor" stroke-width="1.2"/>
    <circle cx="27" cy="14" r="3.5" fill="none" stroke="currentColor" stroke-width="1.2"/>
    <path d="M10 28 Q13 22 20 22 Q27 22 30 28" fill="none" stroke="currentColor" stroke-width="1.2"/>
    <line x1="20" y1="22" x2="20" y2="30" stroke="currentColor" stroke-width="1"/>
    <path d="M7 7 L33 33 M33 7 L7 33" stroke="currentColor" stroke-width="0.5" opacity="0.3"/>
    <circle cx="20" cy="20" r="13" fill="none" stroke="currentColor" stroke-width="0.6" stroke-dasharray="2 3"/>
  </svg>`,
  Evocation: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="17" fill="none" stroke="currentColor" stroke-width="1.8"/>
    <polygon points="20,4 24,16 37,16 27,24 31,37 20,30 9,37 13,24 3,16 16,16" fill="none" stroke="currentColor" stroke-width="1.3"/>
    <circle cx="20" cy="20" r="5" fill="none" stroke="currentColor" stroke-width="1"/>
    <circle cx="20" cy="20" r="2" fill="currentColor" opacity="0.7"/>
  </svg>`
};

// ============================================================
// COMPONENT ICONS
// ============================================================
const COMPONENT_ICONS = {
  V: `<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <ellipse cx="10" cy="10" rx="6" ry="8" fill="none" stroke="currentColor" stroke-width="1.5"/>
    <path d="M7 7 Q10 12 13 7" fill="none" stroke="currentColor" stroke-width="1.5"/>
    <path d="M6 10 Q10 16 14 10" fill="none" stroke="currentColor" stroke-width="1.2"/>
  </svg>`,
  S: `<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <path d="M5 15 L8 8 L12 14 L15 4" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <circle cx="5" cy="15" r="1.5" fill="currentColor"/>
    <circle cx="15" cy="4" r="1.5" fill="currentColor"/>
  </svg>`,
  M: `<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <path d="M4 6 Q4 3 7 3 L13 3 Q16 3 16 6 L16 15 Q16 18 13 18 L7 18 Q4 18 4 15 Z" fill="none" stroke="currentColor" stroke-width="1.5"/>
    <path d="M8 3 L8 5 Q10 7 12 5 L12 3" fill="none" stroke="currentColor" stroke-width="1.2"/>
    <line x1="7" y1="9" x2="13" y2="9" stroke="currentColor" stroke-width="1"/>
    <line x1="7" y1="12" x2="11" y2="12" stroke="currentColor" stroke-width="1"/>
  </svg>`
};

// ============================================================
// SPELL SLOT HELPERS
// ============================================================
function getMaxSpellLevel(cls, charLevel) {
  const t = CLASS_TYPE[cls];
  if (!t) return 0;
  return SPELL_SLOT_TABLE[t][charLevel] || 0;
}

function isAvailable(spell, cls, charLevel) {
  if (!spell.classes.includes(cls)) return false;
  if (spell.level === 0) return true;
  return spell.level <= getMaxSpellLevel(cls, charLevel);
}

// Check if spell passes all active filters (book, level, school, search)
function passesFilters(spell, cls, lv) {
  if (!isAvailable(spell, cls, lv)) return false;
  if (!state.activeLevels.has(spell.level)) return false;
  if (!state.activeSchools.has(spell.school)) return false;
  if (!state.activeBooks.has(getSpellBook(spell))) return false;
  const search = state.searchText;
  if (search && !spell.name.toLowerCase().includes(search) && !spell.description.toLowerCase().includes(search)) return false;
  return true;
}

// ============================================================
// UI EVENT HANDLERS
// ============================================================
function onClassChange() {
  const cls = document.getElementById('class-select').value;
  state.selectedClass = cls;
  state.selectedLevel = 0;

  const levelSel = document.getElementById('level-select');
  levelSel.disabled = !cls;
  levelSel.value = '';

  state.activeLevels = new Set();
  document.getElementById('spell-level-pills').innerHTML = '';
  document.getElementById('school-pills').innerHTML = '';
  document.getElementById('book-pills').innerHTML = '';
  document.getElementById('results-bar').style.display = 'none';
  document.getElementById('card-grid').style.display = 'none';
  document.getElementById('empty-state').style.display = cls ? 'flex' : 'flex';

  if (!cls) {
    document.getElementById('empty-state').querySelector('h2').textContent = 'Choose Your Class & Level';
    document.getElementById('empty-state').querySelector('p').textContent = 'Select a class and character level to reveal your available spells.';
  } else {
    document.getElementById('empty-state').querySelector('h2').textContent = `${cls} Selected`;
    document.getElementById('empty-state').querySelector('p').textContent = 'Now choose your character level.';
  }
}

function onLevelChange() {
  const cls = state.selectedClass;
  const lv = parseInt(document.getElementById('level-select').value) || 0;
  if (!lv || !cls) return;

  state.selectedLevel = lv;

  // Determine available spell levels
  const maxSL = getMaxSpellLevel(cls, lv);
  const availableLevels = [];
  if (SPELLS.some(s => s.level === 0 && s.classes.includes(cls))) availableLevels.push(0);
  for (let i = 1; i <= maxSL; i++) {
    if (SPELLS.some(s => s.level === i && s.classes.includes(cls))) availableLevels.push(i);
  }

  // Default: all available levels active
  state.activeLevels = new Set(availableLevels);

  // Build level pills
  const pillsEl = document.getElementById('spell-level-pills');
  pillsEl.innerHTML = '';
  availableLevels.forEach(sl => {
    const p = document.createElement('span');
    p.className = 'pill level-pill active';
    p.textContent = LEVEL_LABELS[sl];
    p.dataset.level = sl;
    p.onclick = () => toggleLevelPill(p, sl);
    pillsEl.appendChild(p);
  });

  // Build school pills — only schools that appear in available spells
  const schoolsUsed = new Set(
    SPELLS.filter(s => isAvailable(s, cls, lv)).map(s => s.school)
  );
  state.activeSchools = new Set(schoolsUsed);

  const schoolEl = document.getElementById('school-pills');
  schoolEl.innerHTML = '';
  Object.keys(SCHOOLS).forEach(sch => {
    if (!schoolsUsed.has(sch)) return;
    const color = SCHOOLS[sch];
    const p = document.createElement('span');
    p.className = 'pill school-pill active';
    p.textContent = sch;
    p.dataset.school = sch;
    p.style.background = color;
    p.style.borderColor = color;
    p.onclick = () => toggleSchoolPill(p, sch, color);
    schoolEl.appendChild(p);
  });

  // Build book pills — only books that appear in available spells
  const booksUsed = new Set(
    SPELLS.filter(s => isAvailable(s, cls, lv)).map(s => getSpellBook(s))
  );
  state.activeBooks = new Set(booksUsed);

  const bookEl = document.getElementById('book-pills');
  bookEl.innerHTML = '';
  Object.entries(SOURCE_BOOKS).forEach(([key, book]) => {
    if (!booksUsed.has(key)) return;
    const p = document.createElement('span');
    p.className = 'pill book-pill active';
    p.textContent = book.abbr;
    p.title = book.label;
    p.dataset.book = key;
    p.style.background = book.color;
    p.style.borderColor = book.color;
    p.onclick = () => toggleBookPill(p, key, book.color);
    bookEl.appendChild(p);
  });

  renderGrid();
}

function toggleLevelPill(el, level) {
  if (state.activeLevels.has(level)) {
    state.activeLevels.delete(level);
    el.classList.remove('active');
  } else {
    state.activeLevels.add(level);
    el.classList.add('active');
  }
  renderGrid();
}

function toggleSchoolPill(el, school, color) {
  if (state.activeSchools.has(school)) {
    state.activeSchools.delete(school);
    el.classList.remove('active');
    el.style.background = 'rgba(255,255,255,0.04)';
    el.style.borderColor = '#2a2a4a';
    el.style.color = '#9a9ab0';
  } else {
    state.activeSchools.add(school);
    el.classList.add('active');
    el.style.background = color;
    el.style.borderColor = color;
    el.style.color = '#fff';
  }
  renderGrid();
}

function toggleBookPill(el, book, color) {
  if (state.activeBooks.has(book)) {
    state.activeBooks.delete(book);
    el.classList.remove('active');
    el.style.background = 'rgba(255,255,255,0.04)';
    el.style.borderColor = '#2a2a4a';
    el.style.color = '#9a9ab0';
  } else {
    state.activeBooks.add(book);
    el.classList.add('active');
    el.style.background = color;
    el.style.borderColor = color;
    el.style.color = '#fff';
  }
  renderGrid();
}

// ============================================================
// RENDER GRID
// ============================================================
function renderGrid() {
  const { selectedClass: cls, selectedLevel: lv } = state;
  const search = document.getElementById('search-input').value.toLowerCase().trim();
  state.searchText = search;

  if (!cls || !lv) return;

  const filtered = SPELLS.filter(s => passesFilters(s, cls, lv));

  // Sort: level asc, then alpha
  filtered.sort((a, b) => a.level !== b.level ? a.level - b.level : a.name.localeCompare(b.name));

  const grid = document.getElementById('card-grid');
  const empty = document.getElementById('empty-state');
  const resultsBar = document.getElementById('results-bar');

  if (filtered.length === 0) {
    grid.style.display = 'none';
    empty.style.display = 'flex';
    empty.querySelector('h2').textContent = 'No Spells Found';
    empty.querySelector('p').textContent = 'Try adjusting your filters or search term.';
    resultsBar.style.display = 'none';
    return;
  }

  grid.style.display = 'grid';
  empty.style.display = 'none';
  resultsBar.style.display = 'block';
  resultsBar.textContent = `${filtered.length} spell${filtered.length !== 1 ? 's' : ''} available${state.selectedSpells.size > 0 ? ` · ${state.selectedSpells.size} selected` : ''}`;

  grid.innerHTML = '';
  filtered.forEach(spell => {
    grid.appendChild(buildCard(spell, cls, true));
  });

  updateSelectionUI();
}

// ============================================================
// BUILD CARD ELEMENT
// ============================================================
function buildCard(spell, currentClass, interactive) {
  const color = SCHOOLS[spell.school] || '#888';
  const isSelected = state.selectedSpells.has(spell.id);

  const card = document.createElement('div');
  card.className = `spell-card${isSelected ? ' selected' : ''}`;
  card.dataset.id = spell.id;
  card.style.setProperty('--school-color', color);

  if (interactive) {
    card.onclick = () => toggleCard(spell.id, card);
  }

  // Level label
  const levelLabel = spell.level === 0 ? 'Cantrip' : `Lv ${spell.level}`;

  // Class list HTML
  const classListHtml = ALL_CLASSES.map(c => {
    const hasAccess = spell.classes.includes(c);
    const isCurrent = c === currentClass;
    let cls2 = 'class-item';
    if (hasAccess) cls2 += ' has-access';
    if (isCurrent) cls2 += ' is-current';
    const tick = hasAccess ? ' &#x2502;' : '';
    return `<span class="${cls2}">${c}${tick}</span>`;
  }).join('');

  // Components
  const compHtml = ['V','S','M'].map(c => {
    if (!spell.components.includes(c)) return '';
    return `<span class="component-icon" title="${c === 'V' ? 'Verbal' : c === 'S' ? 'Somatic' : 'Material'}">${COMPONENT_ICONS[c]}</span>`;
  }).join('');

  const ritualHtml = spell.ritual ? `<span class="badge">Ritual</span>` : '';
  const concHtml = spell.concentration ? `<span class="badge">Concentration</span>` : '';

  const flavorHtml = spell.flavor_text
    ? `<div class="card-flavor" style="background:${color}">${spell.flavor_text}</div>`
    : '';

  const higherHtml = spell.higher_levels
    ? `<div class="higher-levels"><strong>At Higher Levels.</strong> ${spell.higher_levels}</div>`
    : '';

  // Source with book colour indicator
  const bookKey = getSpellBook(spell);
  const bookInfo = SOURCE_BOOKS[bookKey];
  const bookDot = bookInfo ? `<span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:${bookInfo.color};margin-right:4px;vertical-align:middle;"></span>` : '';

  card.innerHTML = `
    <div class="select-indicator">${isSelected ? '&#10003;' : ''}</div>
    <div class="card-header" style="background:${color}">
      <span class="card-school-icon">${SCHOOL_ICONS[spell.school] || ''}</span>
      <span class="card-title">${spell.name}</span>
      <span class="card-level">${levelLabel}</span>
    </div>
    <div class="card-stats">
      <div class="stats-left">
        <div class="stat-row"><span class="stat-label">Range</span><span class="stat-value">${spell.range}</span></div>
        <div class="stat-row"><span class="stat-label">Duration</span><span class="stat-value">${spell.duration}</span></div>
        <div class="stat-row"><span class="stat-label">Casting Time</span><span class="stat-value">${spell.casting_time}</span></div>
      </div>
      <div class="class-list">${classListHtml}</div>
    </div>
    <div class="card-components">${compHtml}${ritualHtml}${concHtml}</div>
    ${flavorHtml}
    <div class="card-description">${spell.description}${higherHtml}</div>
    <div class="card-source">${bookDot}${spell.source}</div>
  `;

  return card;
}

// ============================================================
// SELECTION
// ============================================================
function toggleCard(spellId, cardEl) {
  if (state.selectedSpells.has(spellId)) {
    state.selectedSpells.delete(spellId);
    cardEl.classList.remove('selected');
    cardEl.querySelector('.select-indicator').innerHTML = '';
  } else {
    state.selectedSpells.add(spellId);
    cardEl.classList.add('selected');
    cardEl.querySelector('.select-indicator').innerHTML = '&#10003;';
  }
  updateSelectionUI();
}

function clearSelection() {
  state.selectedSpells.clear();
  document.querySelectorAll('.spell-card.selected').forEach(c => {
    c.classList.remove('selected');
    const ind = c.querySelector('.select-indicator');
    if (ind) ind.innerHTML = '';
  });
  updateSelectionUI();
}

function selectAllVisible() {
  const visibleCards = document.querySelectorAll('#card-grid .spell-card');
  visibleCards.forEach(card => {
    const spellId = card.dataset.id;
    if (spellId) {
      state.selectedSpells.add(spellId);
      card.classList.add('selected');
      const ind = card.querySelector('.select-indicator');
      if (ind) ind.innerHTML = '&#10003;';
    }
  });
  updateSelectionUI();
}

function updateSelectionUI() {
  const count = state.selectedSpells.size;
  const visibleCount = document.querySelectorAll('#card-grid .spell-card').length;
  document.getElementById('selection-count').textContent = `${count} selected`;
  document.getElementById('btn-print').disabled = count === 0;
  document.getElementById('btn-clear').disabled = count === 0;
  const btnSelectAll = document.getElementById('btn-select-all');
  if (btnSelectAll) btnSelectAll.disabled = visibleCount === 0;

  // Update results bar
  const resultsBar = document.getElementById('results-bar');
  if (resultsBar.style.display !== 'none') {
    const total = document.querySelectorAll('#card-grid .spell-card').length;
    resultsBar.textContent = `${total} spell${total !== 1 ? 's' : ''} available${count > 0 ? ` · ${count} selected` : ''}`;
  }
}

// ============================================================
// PRINT PREVIEW
// ============================================================
function openPrintPreview() {
  const selectedIds = Array.from(state.selectedSpells);
  const selectedSpells = SPELLS
    .filter(s => selectedIds.includes(s.id))
    .sort((a, b) => a.level !== b.level ? a.level - b.level : a.name.localeCompare(b.name));

  const pages = chunkArray(selectedSpells, 8);

  // Build preview
  const container = document.getElementById('print-pages-container');
  container.innerHTML = '';

  pages.forEach((pageSpells, idx) => {
    const lbl = document.createElement('div');
    lbl.className = 'page-label';
    lbl.textContent = `Page ${idx + 1} of ${pages.length}`;
    container.appendChild(lbl);

    const page = document.createElement('div');
    page.className = 'print-page-preview';
    pageSpells.forEach(spell => {
      page.appendChild(buildCard(spell, state.selectedClass, false));
    });
    container.appendChild(page);
  });

  document.getElementById('preview-page-count').textContent =
    `${selectedSpells.length} card${selectedSpells.length !== 1 ? 's' : ''} · ${pages.length} page${pages.length !== 1 ? 's' : ''}`;

  document.getElementById('print-preview-overlay').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closePrintPreview() {
  document.getElementById('print-preview-overlay').classList.remove('active');
  document.body.style.overflow = '';
}

function executePrint() {
  const selectedIds = Array.from(state.selectedSpells);
  const selectedSpells = SPELLS
    .filter(s => selectedIds.includes(s.id))
    .sort((a, b) => a.level !== b.level ? a.level - b.level : a.name.localeCompare(b.name));

  const pages = chunkArray(selectedSpells, 8);
  const printOutput = document.getElementById('print-output');
  printOutput.innerHTML = '';

  pages.forEach(pageSpells => {
    const page = document.createElement('div');
    page.className = 'print-page';
    pageSpells.forEach(spell => {
      page.appendChild(buildCard(spell, state.selectedClass, false));
    });
    printOutput.appendChild(page);
  });

  closePrintPreview();

  // Open print dialog then clear the hidden DOM so cards don't render on screen
  setTimeout(() => {
    window.print();
    setTimeout(() => { printOutput.innerHTML = ''; }, 1500);
  }, 100);
}

// ============================================================
// UTILITIES
// ============================================================
function chunkArray(arr, size) {
  const chunks = [];
  for (let i = 0; i < arr.length; i += size) {
    chunks.push(arr.slice(i, i + size));
  }
  return chunks;
}

// ============================================================
// MOBILE FILTER PANEL
// ============================================================
function toggleMobileFilters() {
  const bar = document.querySelector('.filter-bar');
  const btn = document.getElementById('btn-filter-toggle');
  const isOpen = btn.getAttribute('aria-expanded') === 'true';
  bar.classList.toggle('expanded', !isOpen);
  btn.classList.toggle('open', !isOpen);
  btn.setAttribute('aria-expanded', String(!isOpen));
}

function closeMobileFilters() {
  const bar = document.querySelector('.filter-bar');
  const btn = document.getElementById('btn-filter-toggle');
  if (bar && bar.classList.contains('expanded')) {
    bar.classList.remove('expanded');
    btn.classList.remove('open');
    btn.setAttribute('aria-expanded', 'false');
  }
}

// Auto-collapse filters when user scrolls down on mobile
(function initScrollCollapse() {
  let lastScrollY = 0;
  let ticking = false;

  window.addEventListener('scroll', function() {
    if (window.innerWidth > 768) return; // desktop: do nothing
    const currentY = window.scrollY;
    if (!ticking) {
      window.requestAnimationFrame(function() {
        if (currentY > lastScrollY && currentY > 60) {
          // scrolling down past 60px — collapse filters
          closeMobileFilters();
        }
        lastScrollY = currentY;
        ticking = false;
      });
      ticking = true;
    }
  }, { passive: true });
})();

</script>
</body>
</html>